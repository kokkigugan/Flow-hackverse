{"ast":null,"code":"import _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport { config } from '@onflow/config';\nexport { config } from '@onflow/config';\nimport { invariant } from '@onflow/util-invariant';\nimport * as sdk from '@onflow/sdk';\nimport { invariant as invariant$1, arg, encodeMessageFromSignable, createSignableVoucher, pipe, interaction, config as config$1, resolve, send as send$1, getTransactionStatus, decode, getEventsAtBlockHeightRange, block, atBlockHeight, getAccount } from '@onflow/sdk';\nexport { TestUtils, account, arg, args, atBlockHeight, atBlockId, authorization, authorizations, block, build, createSignableVoucher, decode, getAccount, getBlock, getBlockHeader, getCollection, getEvents, getEventsAtBlockHeightRange, getEventsAtBlockIds, getTransaction, getTransactionStatus, invariant, isBad, isOk, limit, param, params, payer, ping, pipe, proposer, ref, script, send, transaction, validator, voucherIntercept, voucherToTxId, why } from '@onflow/sdk';\nimport _typeof from '@babel/runtime/helpers/typeof';\nimport * as t$1 from '@onflow/types';\nimport fetchTransport from 'node-fetch';\nimport { withPrefix, sansPrefix } from '@onflow/util-address';\nexport { display, sansPrefix, withPrefix } from '@onflow/util-address';\nimport _createForOfIteratorHelper from '@babel/runtime/helpers/createForOfIteratorHelper';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _objectSpread from '@babel/runtime/helpers/objectSpread2';\nimport { INIT, SUBSCRIBE, UNSUBSCRIBE, send, subscriber, snapshoter, spawn, UPDATED as UPDATED$2, SNAPSHOT as SNAPSHOT$1 } from '@onflow/util-actor';\nimport * as rlp from '@onflow/rlp';\nimport { Buffer, encode } from '@onflow/rlp';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport { log, LEVELS } from '@onflow/util-logger';\nimport { uid } from '@onflow/util-uid';\nimport require$$0 from 'buffer';\nexport { template as cadence, template as cdc } from '@onflow/util-template';\nvar isServerSide = function isServerSide() {\n  return typeof window === \"undefined\";\n};\nvar SESSION_STORAGE = {\n  can: !isServerSide(),\n  get: function () {\n    var _get = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(key) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", JSON.parse(sessionStorage.getItem(key)));\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    function get(_x) {\n      return _get.apply(this, arguments);\n    }\n    return get;\n  }(),\n  put: function () {\n    var _put = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(key, value) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              return _context2.abrupt(\"return\", sessionStorage.setItem(key, JSON.stringify(value)));\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    function put(_x2, _x3) {\n      return _put.apply(this, arguments);\n    }\n    return put;\n  }()\n};\nconfig({\n  \"discovery.wallet.method.default\": \"IFRAME/RPC\",\n  \"fcl.storage.default\": SESSION_STORAGE\n});\nfunction configLens(_x4) {\n  return _configLens.apply(this, arguments);\n}\nfunction _configLens() {\n  _configLens = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(regex) {\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.t0 = Object;\n            _context3.t1 = Object;\n            _context3.next = 4;\n            return config().where(regex);\n          case 4:\n            _context3.t2 = _context3.sent;\n            _context3.t3 = _context3.t1.entries.call(_context3.t1, _context3.t2).map(function (_ref) {\n              var _ref2 = _slicedToArray(_ref, 2),\n                key = _ref2[0],\n                value = _ref2[1];\n              return [key.replace(regex, \"\"), value];\n            });\n            return _context3.abrupt(\"return\", _context3.t0.fromEntries.call(_context3.t0, _context3.t3));\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _configLens.apply(this, arguments);\n}\nvar VERSION = \"1.3.2\";\nvar is = function is(type) {\n  return function (d) {\n    return _typeof(d) === type;\n  };\n};\nvar isRequired = function isRequired(d) {\n  return d != null;\n};\nvar isObject = is(\"object\");\nvar isString = is(\"string\");\nvar isFunc = is(\"function\");\nvar isNumber = is(\"number\");\nfunction normalizeArgs(ax) {\n  if (isFunc(ax)) return ax(sdk.arg, t$1);\n  return [];\n}\nfunction httpDocumentResolver(_x) {\n  return _httpDocumentResolver.apply(this, arguments);\n}\nfunction _httpDocumentResolver() {\n  _httpDocumentResolver = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n    var url, res, document;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            url = _ref.url;\n            invariant(typeof url !== \"undefined\", \"retrieve({ url }) -- url must be defined\");\n            _context.prev = 2;\n            _context.next = 5;\n            return fetchTransport(url);\n          case 5:\n            res = _context.sent;\n            _context.next = 11;\n            break;\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](2);\n            throw new Error(\"httpDocumentResolver Error: Failed to retrieve document.\");\n          case 11:\n            if (!res.ok) {\n              _context.next = 17;\n              break;\n            }\n            _context.next = 14;\n            return res.json();\n          case 14:\n            _context.t1 = _context.sent;\n            _context.next = 18;\n            break;\n          case 17:\n            _context.t1 = null;\n          case 18:\n            document = _context.t1;\n            return _context.abrupt(\"return\", document);\n          case 20:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[2, 8]]);\n  }));\n  return _httpDocumentResolver.apply(this, arguments);\n}\nvar DOCUMENT_RESOLVERS = new Map([[\"http\", httpDocumentResolver], [\"https\", httpDocumentResolver]]);\nfunction retrieve(_x2) {\n  return _retrieve.apply(this, arguments);\n}\nfunction _retrieve() {\n  _retrieve = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref2) {\n    var url, documentResolversFromConfig, urlParts, protocol, resolver, document;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            url = _ref2.url;\n            invariant(typeof url !== \"undefined\", \"retrieve({ url }) -- url must be defined\");\n            invariant(typeof url === \"string\", \"retrieve({ url }) -- url must be a string\");\n            _context2.next = 5;\n            return config().where(/^document\\.resolver\\./);\n          case 5:\n            documentResolversFromConfig = _context2.sent;\n            Object.keys(documentResolversFromConfig).map(function (key) {\n              var resolverFromConfig = documentResolversFromConfig[key];\n              var resolverProtocol = key.replace(/^document\\.resolver\\./, \"\");\n              DOCUMENT_RESOLVERS.set(resolverProtocol, resolverFromConfig);\n            });\n            urlParts = /^(.*):\\/\\/([A-Za-z0-9\\-\\.]+)(:[0-9]+)?(.*)$/.exec(url);\n            invariant(urlParts, \"Failed to parse URL\");\n            protocol = urlParts[1];\n            invariant(urlParts, \"Failed to parse URL protocol\");\n            resolver = DOCUMENT_RESOLVERS.get(protocol);\n            invariant(resolver, \"No resolver found for protcol=\".concat(protocol));\n            _context2.next = 15;\n            return resolver({\n              url: url\n            });\n          case 15:\n            document = _context2.sent;\n            return _context2.abrupt(\"return\", document);\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _retrieve.apply(this, arguments);\n}\nfunction normalizeInteractionTemplate(template) {\n  if (template == null) return null;\n  switch (template[\"f_version\"]) {\n    case \"1.0.0\":\n      return template;\n    default:\n      throw new Error(\"normalizeInteractionTemplate Error: Invalid InteractionTemplate\");\n  }\n}\nfunction deriveCadenceByNetwork(_ref) {\n  var _template, _template$data;\n  var network = _ref.network,\n    template = _ref.template;\n  invariant$1(network != undefined, \"deriveCadenceByNetwork({ network }) -- network must be defined\");\n  invariant$1(typeof network === \"string\", \"deriveCadenceByNetwork({ network }) -- network must be a string\");\n  invariant$1(template != undefined, \"generateDependencyPin({ template }) -- template must be defined\");\n  invariant$1(_typeof(template) === \"object\", \"generateDependencyPin({ template }) -- template must be an object\");\n  invariant$1(template.f_type === \"InteractionTemplate\", \"generateDependencyPin({ template }) -- template must be an InteractionTemplate\");\n  template = normalizeInteractionTemplate(template);\n  switch (template.f_version) {\n    case \"1.0.0\":\n      var networkDependencies = Object.keys((_template = template) === null || _template === void 0 ? void 0 : (_template$data = _template.data) === null || _template$data === void 0 ? void 0 : _template$data.dependencies).map(function (dependencyPlaceholder) {\n        var _template2, _template2$data, _template2$data$depen;\n        var dependencyNetworkContracts = Object.values((_template2 = template) === null || _template2 === void 0 ? void 0 : (_template2$data = _template2.data) === null || _template2$data === void 0 ? void 0 : (_template2$data$depen = _template2$data.dependencies) === null || _template2$data$depen === void 0 ? void 0 : _template2$data$depen[dependencyPlaceholder]);\n        invariant$1(dependencyNetworkContracts, \"deriveCadenceByNetwork -- Could not find contracts for dependency placeholder: \".concat(dependencyPlaceholder));\n        invariant$1(dependencyNetworkContracts.length === 0, \"deriveCadenceByNetwork -- Could not find contracts for dependency placeholder: \".concat(dependencyPlaceholder));\n        var dependencyContract = dependencyNetworkContracts[0];\n        var dependencyContractForNetwork = dependencyContract === null || dependencyContract === void 0 ? void 0 : dependencyContract[network];\n        invariant$1(dependencyContractForNetwork, \"deriveCadenceByNetwork -- Could not find \".concat(network, \" network information for dependency: \").concat(dependencyPlaceholder));\n        return [dependencyPlaceholder, dependencyContractForNetwork.address];\n      });\n      return networkDependencies.reduce(function (cadence, _ref2) {\n        var _ref3 = _slicedToArray(_ref2, 2),\n          placeholder = _ref3[0],\n          address = _ref3[1];\n        var regex = new RegExp(\"(\\\\b\" + placeholder + \"\\\\b)\", \"g\");\n        return cadence.replace(regex, address);\n      }, template.data.cadence);\n    default:\n      throw new Error(\"deriveCadenceByNetwork Error: Unsupported template version\");\n  }\n}\nfunction deriveDependencies(_x) {\n  return _deriveDependencies.apply(this, arguments);\n}\nfunction _deriveDependencies() {\n  _deriveDependencies = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n    var _template$data;\n    var template, network, derivedDependencies, dependencyPlaceholderKeys, _i, _dependencyPlaceholde, _template$data2, dependencyPlaceholderKey, dependencyPlaceholder, dependencyPlaceholderContractsKeys, dependencyPlaceholderContract, dependency;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            template = _ref.template;\n            _context.next = 3;\n            return config.get(\"flow.network\");\n          case 3:\n            network = _context.sent;\n            invariant(network, \"FCL configureDependencies Error: Missing configuration value for 'flow.network'\");\n            derivedDependencies = {};\n            _context.t0 = template[\"f_version\"];\n            _context.next = _context.t0 === \"1.0.0\" ? 9 : 12;\n            break;\n          case 9:\n            dependencyPlaceholderKeys = Object.keys(template === null || template === void 0 ? void 0 : (_template$data = template.data) === null || _template$data === void 0 ? void 0 : _template$data.dependencies);\n            for (_i = 0, _dependencyPlaceholde = dependencyPlaceholderKeys; _i < _dependencyPlaceholde.length; _i++) {\n              dependencyPlaceholderKey = _dependencyPlaceholde[_i];\n              dependencyPlaceholder = template === null || template === void 0 ? void 0 : (_template$data2 = template.data) === null || _template$data2 === void 0 ? void 0 : _template$data2.dependencies[dependencyPlaceholderKey];\n              dependencyPlaceholderContractsKeys = Object.keys(dependencyPlaceholder);\n              invariant(dependencyPlaceholderContractsKeys.length > 0, \"FCL configureDependencies Error: No contracts found in template for placeholder=\".concat(dependencyPlaceholderKey));\n              dependencyPlaceholderContract = dependencyPlaceholder[dependencyPlaceholderContractsKeys[0]];\n              dependency = dependencyPlaceholderContract[network];\n              invariant(dependency, \"FCL configureDependencies Error: No dependency information for placeholder=\".concat(dependencyPlaceholderKey, \" contract=\").concat(dependencyPlaceholderContractsKeys[0], \" network=\").concat(network));\n              invariant(dependency === null || dependency === void 0 ? void 0 : dependency.address, \"FCL configureDependencies Error: No address information for placeholder=\".concat(dependencyPlaceholderKey, \" contract=\").concat(dependencyPlaceholderContractsKeys[0], \" network=\").concat(network));\n              derivedDependencies[dependencyPlaceholderKey] = withPrefix(dependency === null || dependency === void 0 ? void 0 : dependency.address);\n            }\n            return _context.abrupt(\"return\", derivedDependencies);\n          case 12:\n            throw new Error(\"FCL configureDependencies Error: Unsupported template version\");\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _deriveDependencies.apply(this, arguments);\n}\nfunction prepTemplateOpts(_x) {\n  return _prepTemplateOpts.apply(this, arguments);\n}\nfunction _prepTemplateOpts() {\n  _prepTemplateOpts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(opts) {\n    var dependencies, cadence;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!isString(opts === null || opts === void 0 ? void 0 : opts.template)) {\n              _context.next = 4;\n              break;\n            }\n            _context.next = 3;\n            return retrieve({\n              url: opts === null || opts === void 0 ? void 0 : opts.template\n            });\n          case 3:\n            opts.template = _context.sent;\n          case 4:\n            dependencies = {};\n            if (!(opts !== null && opts !== void 0 && opts.template)) {\n              _context.next = 10;\n              break;\n            }\n            opts.template = normalizeInteractionTemplate(opts === null || opts === void 0 ? void 0 : opts.template);\n            _context.next = 9;\n            return deriveDependencies({\n              template: opts.template\n            });\n          case 9:\n            dependencies = _context.sent;\n          case 10:\n            _context.t0 = opts.cadence;\n            if (_context.t0) {\n              _context.next = 19;\n              break;\n            }\n            _context.t1 = deriveCadenceByNetwork;\n            _context.t2 = opts.template;\n            _context.next = 16;\n            return sdk.config().get(\"flow.network\");\n          case 16:\n            _context.t3 = _context.sent;\n            _context.t4 = {\n              template: _context.t2,\n              network: _context.t3\n            };\n            _context.t0 = (0, _context.t1)(_context.t4);\n          case 19:\n            cadence = _context.t0;\n            opts.cadence = cadence;\n            opts.dependencies = dependencies;\n            return _context.abrupt(\"return\", opts);\n          case 23:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _prepTemplateOpts.apply(this, arguments);\n}\nfunction pre(_x, _x2) {\n  return _pre.apply(this, arguments);\n}\nfunction _pre() {\n  _pre = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(type, opts) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            // prettier-ignore\n            invariant(isRequired(opts), \"\".concat(type, \"(opts) -- opts is required\")); // prettier-ignore\n\n            invariant(isObject(opts), \"\".concat(type, \"(opts) -- opts must be an object\")); // prettier-ignore\n\n            invariant(!(opts.cadence && opts.template), \"\".concat(type, \"({ template, cadence }) -- cannot pass both cadence and template\")); // prettier-ignore\n\n            invariant(isRequired(opts.cadence || (opts === null || opts === void 0 ? void 0 : opts.template)), \"\".concat(type, \"({ cadence }) -- cadence is required\")); // // prettier-ignore\n\n            invariant(isString(opts.cadence) || (opts === null || opts === void 0 ? void 0 : opts.template), \"\".concat(type, \"({ cadence }) -- cadence must be a string\")); // prettier-ignore\n\n            _context.t0 = invariant;\n            _context.t1 = opts.cadence;\n            if (_context.t1) {\n              _context.next = 11;\n              break;\n            }\n            _context.next = 10;\n            return sdk.config().get(\"flow.network\");\n          case 10:\n            _context.t1 = _context.sent;\n          case 11:\n            _context.t2 = _context.t1;\n            _context.t3 = \"\".concat(type, \"(opts) -- Required value for \\\"flow.network\\\" not defined in config. See: \", \"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration\");\n            (0, _context.t0)(_context.t2, _context.t3);\n            _context.t4 = invariant;\n            _context.next = 17;\n            return sdk.config().get(\"accessNode.api\");\n          case 17:\n            _context.t5 = _context.sent;\n            _context.t6 = \"\".concat(type, \"(opts) -- Required value for \\\"accessNode.api\\\" not defined in config. See: \", \"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration\");\n            (0, _context.t4)(_context.t5, _context.t6);\n          case 20:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _pre.apply(this, arguments);\n}\nfunction preMutate(_x3) {\n  return _preMutate.apply(this, arguments);\n}\nfunction _preMutate() {\n  _preMutate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(opts) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", pre(\"mutate\", opts));\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _preMutate.apply(this, arguments);\n}\nfunction preQuery(_x4) {\n  return _preQuery.apply(this, arguments);\n}\nfunction _preQuery() {\n  _preQuery = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(opts) {\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            return _context3.abrupt(\"return\", pre(\"query\", opts));\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _preQuery.apply(this, arguments);\n}\n\n/** Query the Flow Blockchain\n *\n *  @arg {Object} opts         - Query Options and configuration\n *  @arg {string} opts.cadence - Cadence Script used to query Flow\n *  @arg {ArgsFn} opts.args    - Arguments passed to cadence script\n *  @arg {Object} opts.template - Interaction Template for a script\n *  @arg {number} opts.limit   - Compute Limit for Query\n *  @returns {Promise<Response>}\n *\n *  Where:\n *    @callback ArgsFn\n *    @arg {ArgFn}  arg - Argument function to define a single argument\n *    @arg {Object} t   - Cadence Types object used to define the type\n *    @returns {args[]}\n *\n *    @callback ArgFn\n *    @arg {Any}  value - the value of the argument\n *    @arg {Type} type  - the cadence type of the value\n *    @returns {arg}\n *\n *  Example:\n *    const cadence = `\n *      cadence: `\n *        pub fun main(a: Int, b: Int, c: Address): Int {\n *          log(c)\n *          return a + b\n *        }\n *    `.trim()\n *\n *    const args = (arg, t) => [\n *      arg(5, t.Int),\n *      arg(7, t.Int),\n *      arg(\"0xb2db43ad6bc345fec9\", t.Address),\n *    ]\n *\n *    await query({ cadence, args })\n */\n\nfunction query() {\n  return _query.apply(this, arguments);\n}\nfunction _query() {\n  _query = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var opts,\n      _args2 = arguments;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            opts = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : {};\n            _context2.next = 3;\n            return preQuery(opts);\n          case 3:\n            _context2.next = 5;\n            return prepTemplateOpts(opts);\n          case 5:\n            opts = _context2.sent;\n            return _context2.abrupt(\"return\", sdk.config().overload(opts.dependencies || {}, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n              return _regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      return _context.abrupt(\"return\",\n                      // prettier-ignore\n                      sdk.send([sdk.script(opts.cadence), sdk.args(normalizeArgs(opts.args || [])), opts.limit && typeof opts.limit === \"number\" && sdk.limit(opts.limit)]).then(sdk.decode));\n                    case 1:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee);\n            }))));\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _query.apply(this, arguments);\n}\nfunction fetchServices(_x, _x2) {\n  return _fetchServices.apply(this, arguments);\n}\nfunction _fetchServices() {\n  _fetchServices = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(servicesURL, code) {\n    var url, resp, services, _iterator, _step, service;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(servicesURL == null || code == null)) {\n              _context.next = 2;\n              break;\n            }\n            return _context.abrupt(\"return\", []);\n          case 2:\n            url = new URL(servicesURL);\n            url.searchParams.append(\"code\", code);\n            _context.next = 6;\n            return fetch(url, {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              }\n            }).then(function (d) {\n              return d.json();\n            });\n          case 6:\n            resp = _context.sent;\n            if (!Array.isArray(resp)) {\n              _context.next = 9;\n              break;\n            }\n            return _context.abrupt(\"return\", resp);\n          case 9:\n            // Backwards compatibility for First-Gen Wallet Providers\n            services = []; // Convert authorizations into authz services\n\n            if (Array.isArray(resp.authorizations)) {\n              _iterator = _createForOfIteratorHelper(resp.authorizations);\n              try {\n                for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                  service = _step.value;\n                  services.push(_objectSpread({\n                    type: \"authz\",\n                    keyId: resp.keyId\n                  }, service));\n                }\n              } catch (err) {\n                _iterator.e(err);\n              } finally {\n                _iterator.f();\n              }\n            } // Convert Provider info into an authn service\n\n            if (resp.provider != null) {\n              services.push(_objectSpread({\n                type: \"authn\",\n                id: \"wallet-provider#authn\"\n              }, resp.provider));\n            }\n            return _context.abrupt(\"return\", services);\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _fetchServices.apply(this, arguments);\n}\nfunction mergeServices() {\n  var sx1 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var sx2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  // TODO: Make this smarter\n  return [].concat(_toConsumableArray(sx1), _toConsumableArray(sx2));\n}\nvar SERVICE_PRAGMA = {\n  f_type: \"Service\",\n  f_vsn: \"1.0.0\"\n};\nvar IDENTITY_PRAGMA = {\n  f_type: \"Identity\",\n  f_vsn: \"1.0.0\"\n};\nvar USER_PRAGMA = {\n  f_type: \"USER\",\n  f_vsn: \"1.0.0\"\n};\nvar POLLING_RESPONSE_PRAGMA = {\n  f_type: \"PollingResponse\",\n  f_vsn: \"1.0.0\"\n};\nvar COMPOSITE_SIGNATURE_PRAGMA = {\n  f_type: \"CompositeSignature\",\n  f_vsn: \"1.0.0\"\n};\n\n//   \"f_type\": \"Service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"authn\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"endpoint\": \"https://rawr\",\n//   \"id\": \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\", // wallets internal id for the user\n//   \"identity\": {\n//     \"address\": \"0x____\"\n//   },\n//   \"provider\": {\n//     \"address\": \"0x____\",\n//     \"name\": \"Best Wallet\",\n//     \"description\": \"The Best Wallet\"\n//     \"icon\": \"https://\",\n//   }\n// }\n\nfunction normalizeAuthn(service) {\n  if (service == null) return null;\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service;\n    default:\n      return _objectSpread(_objectSpread({}, SERVICE_PRAGMA), {}, {\n        type: service.type,\n        uid: service.id,\n        endpoint: service.authn,\n        id: service.pid,\n        provider: {\n          address: withPrefix(service.addr),\n          name: service.name,\n          icon: service.icon\n        }\n      });\n  }\n}\n\n//   \"f_type\": \"service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"authz\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"endpoint\": \"https://rawr\",\n//   \"method\": \"HTTP/POST\", // HTTP/POST | IFRAME/RPC | HTTP/RPC\n//   \"identity\": {\n//      \"address\": \"0x______\",\n//      \"keyId\": 0,\n//   },\n//   \"data\": {}, // included in body of authz request\n//   \"params\": {}, // included as query params on endpoint url\n// }\n\nfunction normalizeAuthz(service) {\n  if (service == null) return null;\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service;\n    default:\n      return _objectSpread(_objectSpread({}, SERVICE_PRAGMA), {}, {\n        type: service.type,\n        uid: service.id,\n        endpoint: service.endpoint,\n        method: service.method,\n        identity: _objectSpread(_objectSpread({}, IDENTITY_PRAGMA), {}, {\n          address: withPrefix(service.addr),\n          keyId: service.keyId\n        }),\n        params: service.params,\n        data: service.data\n      });\n  }\n}\n\n//   \"f_type\": \"service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"pre-authz\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"endpoint\": \"https://rawr\",\n//   \"method\": \"HTTP/POST\", // HTTP/POST | IFRAME/RPC | HTTP/RPC\n//   \"identity\": {\n//      \"address\": \"0x______\",\n//      \"keyId\": 0,\n//   },\n//   \"data\": {}, // included in body of pre-authz request\n//   \"params\": {}, // included as query params on endpoint url\n// }\n\nfunction normalizePreAuthz(service) {\n  if (service == null) return null;\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service;\n    default:\n      return _objectSpread(_objectSpread({}, SERVICE_PRAGMA), {}, {\n        type: service.type,\n        uid: service.id,\n        endpoint: service.endpoint,\n        method: service.method,\n        identity: _objectSpread(_objectSpread({}, IDENTITY_PRAGMA), {}, {\n          address: withPrefix(service.addr),\n          keyId: service.keyId\n        }),\n        params: service.params,\n        data: service.data\n      });\n  }\n}\n\n//    \"f_type\": \"Service\",\n//    \"f_vsn\": \"1.0.0\",\n//    \"type\": \"frame\",\n//    \"endpoint\": \"https://rawr\",\n//    \"data\": {},   // Sent to frame when ready\n//    \"params\": {}, // include in query params on frame\n// }\n\nfunction normalizeFrame(service) {\n  if (service == null) return null;\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service;\n    default:\n      return _objectSpread(_objectSpread({\n        old: service\n      }, SERVICE_PRAGMA), {}, {\n        type: \"frame\",\n        endpoint: service.endpoint,\n        params: service.params || {},\n        data: service.data || {}\n      });\n  }\n}\n\n//    \"f_type\": \"Service\",\n//    \"f_vsn\": \"1.0.0\",\n//    \"type\": \"back-channel-rpc\",\n//    \"endpoint\": \"https://rawr\",\n//    \"method\": \"HTTP/GET\", // HTTP/GET | HTTP/POST\n//    \"data\": {},           // included in body of rpc\n//    \"params\": {},         // included as query params on endpoint url\n// }\n\nfunction normalizeBackChannelRpc(service) {\n  if (service == null) return null;\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service;\n    default:\n      return _objectSpread(_objectSpread({}, SERVICE_PRAGMA), {}, {\n        type: \"back-channel-rpc\",\n        endpoint: service.endpoint,\n        method: service.method,\n        params: service.params || {},\n        data: service.data || {}\n      });\n  }\n}\n\n//   \"f_type\": \"Service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"open-id\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"method: \"data\",\n//   \"data\": {\n//      \"profile\": {\n//        \"name\": \"Bob\",\n//        \"family_name\": \"Builder\",\n//        \"given_name\": \"Robert\",\n//        \"middle_name\": \"the\",\n//        \"nickname\": \"Bob the Builder\",\n//        \"perferred_username\": \"bob\",\n//        \"profile\": \"https://www.bobthebuilder.com/\",\n//        \"picture\": \"https://avatars.onflow.org/avatar/bob\",\n//        \"gender\": \"...\",\n//        \"birthday\": \"2001-01-18\",\n//        \"zoneinfo\": \"America/Vancouver\",\n//        \"locale\": \"en-us\",\n//        \"updated_at\": \"1614970797388\"\n//      },\n//      \"email\": {\n//        \"email\": \"bob@bob.bob\",\n//        \"email_verified\": true\n//      },\n//      \"address\": {\n//        \"address\": \"One Apple Park Way, Cupertino, CA 95014, USA\"\n//      },\n//      \"phone\": {\n//        \"phone_number\": \"+1 (xxx) yyy-zzzz\",\n//        \"phone_number_verified\": true\n//      },\n//      \"social\": {\n//        \"twitter\": \"@_qvvg\",\n//        \"twitter_verified\": true\n//      },\n//   }\n// }\n\nfunction normalizeOpenId(service) {\n  if (service == null) return null;\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service;\n    default:\n      return null;\n  }\n}\n\n// {\n//   \"f_type\": \"Service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"user-signature\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"endpoint\": \"https://rawr\",\n//   \"method\": \"IFRAME/RPC\", // HTTP/POST | IFRAME/RPC | HTTP/RPC\n//   \"id\": \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\", // wallets internal id for the user\n//   \"data\": {}, // included in body of user-signature request\n//   \"params\": {}, // included as query params on endpoint url\n// }\nfunction normalizeUserSignature(service) {\n  if (service == null) return null;\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service;\n    default:\n      throw new Error(\"Invalid user-signature service\");\n  }\n}\n\n//    \"f_type\": \"Service\",\n//    \"f_vsn\": \"1.0.0\",\n//    type: \"local-view\",\n//    method: \"VIEW/IFRAME\",\n//    endpoint: \"https://woot.org/authz/local\",\n//    data: {},\n//    params: {},\n// }\n\nfunction normalizeLocalView(resp) {\n  if (resp == null) return null;\n  if (resp.method == null) {\n    resp = _objectSpread(_objectSpread({}, resp), {}, {\n      type: \"local-view\",\n      method: \"VIEW/IFRAME\"\n    });\n  }\n  switch (resp[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return resp;\n    default:\n      return _objectSpread(_objectSpread({}, SERVICE_PRAGMA), {}, {\n        type: resp.type || \"local-view\",\n        method: resp.method,\n        endpoint: resp.endpoint,\n        data: resp.data || {},\n        params: resp.params || {}\n      });\n  }\n}\n\n// {\n//   \"f_type\": \"Service\",                    // Its a service!\n//   \"f_vsn\": \"1.0.0\",                       // Follows the v1.0.0 spec for the service\n//   \"type\": \"account-proof\",                // the type of service it is\n//   \"method\": \"DATA\",                       // Its data!\n//   \"uid\": \"awesome-wallet#account-proof\",  // A unique identifier for the service\n//   \"data\": {\n//     \"f_type\": \"account-proof\",\n//     \"f_vsn\": \"1.0.0\",\n//     \"nonce\": \"0A1BC2FF\",                  // Nonce signed by the current account-proof (minimum 32 bytes in total, i.e 64 hex characters)\n//     \"address\": \"0xUSER\",                  // The user's address (8 bytes, i.e 16 hex characters)\n//     \"signature\": CompositeSignature,      // address (sans-prefix), keyId, signature (hex)\n// }\nfunction normalizeAccountProof(service) {\n  if (service == null) return null;\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service;\n    default:\n      throw new Error(\"FCL Normalizer Error: Invalid account-proof service\");\n  }\n}\n\n// {\n//   \"f_type\": \"Service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"authn-refresh\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"endpoint\": \"https://rawr\",\n//   \"method\": \"HTTP/POST\",  // \"HTTP/POST\", // HTTP/POST | IFRAME/RPC | HTTP/RPC\n//   \"id\": \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\", // wallets internal id for the user\n//   \"data\": {}, // included in body of request\n//   \"params\": {}, // included as query params on endpoint url\n// }\nfunction normalizeAuthnRefresh(service) {\n  if (service == null) return null;\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service;\n    default:\n      throw new Error(\"Invalid authn-refresh service\");\n  }\n}\nvar serviceNormalizers = {\n  \"back-channel-rpc\": normalizeBackChannelRpc,\n  \"pre-authz\": normalizePreAuthz,\n  authz: normalizeAuthz,\n  authn: normalizeAuthn,\n  frame: normalizeFrame,\n  \"open-id\": normalizeOpenId,\n  \"user-signature\": normalizeUserSignature,\n  \"local-view\": normalizeLocalView,\n  \"account-proof\": normalizeAccountProof,\n  \"authn-refresh\": normalizeAuthnRefresh\n};\nfunction normalizeService(service, data) {\n  try {\n    var normalized = serviceNormalizers[service.type](service, data);\n    return normalized;\n  } catch (error) {\n    console.error(\"Unrecognized FCL Service Type [\".concat(service.type, \"]\"), service, error);\n    return service;\n  }\n}\nfunction deriveCompositeId(authn) {\n  return rlp.encode([authn.provider.address || authn.provider.name || \"UNSPECIFIED\", authn.id]).toString(\"hex\");\n}\nfunction normalizeData(data) {\n  data.addr = data.addr ? withPrefix(data.addr) : null;\n  data.paddr = data.paddr ? withPrefix(data.paddr) : null;\n  return data;\n}\nfunction findService(type, services) {\n  return services.find(function (d) {\n    return d.type === type;\n  });\n}\nfunction buildUser(_x) {\n  return _buildUser.apply(this, arguments);\n}\nfunction _buildUser() {\n  _buildUser = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data) {\n    var services, authn;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            data = normalizeData(data);\n            _context.t0 = mergeServices;\n            _context.t1 = data.services || [];\n            _context.next = 5;\n            return fetchServices(data.hks, data.code);\n          case 5:\n            _context.t2 = _context.sent;\n            services = (0, _context.t0)(_context.t1, _context.t2).map(function (service) {\n              return normalizeService(service, data);\n            });\n            authn = findService(\"authn\", services);\n            return _context.abrupt(\"return\", _objectSpread(_objectSpread({}, USER_PRAGMA), {}, {\n              addr: withPrefix(data.addr),\n              cid: deriveCompositeId(authn),\n              loggedIn: true,\n              services: services,\n              expiresAt: data.expires\n            }));\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _buildUser.apply(this, arguments);\n}\nfunction serviceOfType() {\n  var services = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var type = arguments.length > 1 ? arguments[1] : undefined;\n  return services.find(function (service) {\n    return service.type === type;\n  });\n}\nfunction serviceEndpoint(service) {\n  var url = new URL(service.endpoint);\n  url.searchParams.append(\"l6n\", window.location.origin);\n  if (service.params != null) {\n    for (var _i = 0, _Object$entries = Object.entries(service.params || {}); _i < _Object$entries.length; _i++) {\n      var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n        key = _Object$entries$_i[0],\n        value = _Object$entries$_i[1];\n      url.searchParams.append(key, value);\n    }\n  }\n  return url;\n}\nfunction fetchService(service) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var method = opts.method || \"POST\";\n  var body = method === \"GET\" ? undefined : JSON.stringify(opts.data || service.data || {});\n  return fetch(serviceEndpoint(service), {\n    method: method,\n    headers: _objectSpread(_objectSpread(_objectSpread({}, service.headers || {}), opts.headers || {}), {}, {\n      \"Content-Type\": \"application/json\"\n    }),\n    body: body\n  }).then(function (d) {\n    return d.json();\n  });\n}\n\n//    \"f_type\": \"PollingResponse\",\n//    \"f_vsn\": \"1.0.0\",\n//    \"status\": \"PENDING\", // PENDING | APPROVED | DECLINED | REDIRECT\n//    \"reason\": null,      // Reason for Declining Transaction\n//    \"data\": null,        // Return value for APPROVED\n//    \"updates\": BackChannelRpc,\n//    \"local\": Frame,\n// }\n\nfunction normalizePollingResponse(resp) {\n  var _resp$status, _resp$reason;\n  if (resp == null) return null;\n  switch (resp[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return resp;\n    default:\n      return _objectSpread(_objectSpread({}, POLLING_RESPONSE_PRAGMA), {}, {\n        status: (_resp$status = resp.status) !== null && _resp$status !== void 0 ? _resp$status : \"APPROVED\",\n        reason: (_resp$reason = resp.reason) !== null && _resp$reason !== void 0 ? _resp$reason : null,\n        data: resp.compositeSignature || resp.data || _objectSpread({}, resp) || {},\n        updates: normalizeBackChannelRpc(resp.authorizationUpdates),\n        local: normalizeFrame((resp.local || [])[0])\n      });\n  }\n}\nvar OPTIONS = {\n  \"HTTP/GET\": \"GET\",\n  \"HTTP/POST\": \"POST\"\n};\nvar serviceMethod = function serviceMethod(service) {\n  invariant(OPTIONS[service.method], \"Invalid Service Method for type back-channel-rpc\", {\n    service: service\n  });\n  return OPTIONS[service.method];\n};\nfunction poll(_x) {\n  return _poll.apply(this, arguments);\n}\nfunction _poll() {\n  _poll = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(service) {\n    var canContinue,\n      resp,\n      _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            canContinue = _args.length > 1 && _args[1] !== undefined ? _args[1] : function () {\n              return true;\n            };\n            invariant(service, \"Missing Polling Service\", {\n              service: service\n            });\n            if (canContinue()) {\n              _context.next = 4;\n              break;\n            }\n            throw new Error(\"Externally Halted\");\n          case 4:\n            _context.next = 6;\n            return fetchService(service, {\n              method: serviceMethod(service)\n            }).then(normalizePollingResponse);\n          case 6:\n            resp = _context.sent;\n            _context.t0 = resp.status;\n            _context.next = _context.t0 === \"APPROVED\" ? 10 : _context.t0 === \"DECLINED\" ? 11 : 12;\n            break;\n          case 10:\n            return _context.abrupt(\"return\", resp.data);\n          case 11:\n            throw new Error(\"Declined: \".concat(resp.reason || \"No reason supplied.\"));\n          case 12:\n            _context.next = 14;\n            return new Promise(function (r) {\n              return setTimeout(r, 500);\n            });\n          case 14:\n            return _context.abrupt(\"return\", poll(resp.updates, canContinue));\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _poll.apply(this, arguments);\n}\nvar FRAME = \"FCL_IFRAME\";\nvar FRAME_STYLES = \"\\n  position:fixed;\\n  top: 0px;\\n  right: 0px;\\n  bottom: 0px;\\n  left: 0px;\\n  height: 100%;\\n  width: 100vw;\\n  display:block;\\n  background:rgba(0,0,0,0.25);\\n  z-index: 2147483647;\\n  box-sizing: border-box;\\n  color-scheme: light;\\n\";\nfunction renderFrame(src) {\n  invariant(!document.getElementById(FRAME), \"Attempt at triggering multiple Frames\", {\n    src: src\n  });\n  var $frame = document.createElement(\"iframe\");\n  $frame.src = src;\n  $frame.id = FRAME;\n  $frame.allow = \"usb *; hid *\";\n  $frame.frameBorder = \"0\";\n  $frame.style.cssText = FRAME_STYLES;\n  document.body.append($frame);\n  var unmount = function unmount() {\n    if (document.getElementById(FRAME)) {\n      document.getElementById(FRAME).remove();\n    }\n  };\n  return [$frame.contentWindow, unmount];\n}\nvar POP = \"FCL_POP\";\nvar popup = null;\nvar previousUrl$1 = null;\nfunction popupWindow(url, windowName, win, w, h) {\n  var y = win.top.outerHeight / 2 + win.top.screenY - h / 2;\n  var x = win.top.outerWidth / 2 + win.top.screenX - w / 2;\n  var popup = win.open(url, windowName, \"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=\".concat(w, \", height=\").concat(h, \", top=\").concat(y, \", left=\").concat(x));\n  if (!popup) throw new Error(\"Popup failed to open (was it blocked by a popup blocker?)\");\n  return popup;\n}\nfunction renderPop(src) {\n  var _popup;\n  if (popup == null || (_popup = popup) !== null && _popup !== void 0 && _popup.closed) {\n    popup = popupWindow(src, POP, window, 640, 770);\n  } else if (previousUrl$1 !== src) {\n    popup.location.replace(src);\n    popup.focus();\n  } else {\n    popup.focus();\n  }\n  previousUrl$1 = src;\n  var unmount = function unmount() {\n    if (popup && !popup.closed) {\n      popup.close();\n    }\n    popup = null;\n  };\n  return [popup, unmount];\n}\nvar tab$1 = null;\nvar previousUrl = null;\nfunction renderTab(src) {\n  var _tab;\n  if (tab$1 == null || (_tab = tab$1) !== null && _tab !== void 0 && _tab.closed) {\n    tab$1 = window.open(src, \"_blank\");\n    if (!tab$1) throw new Error(\"Tab failed to open (was it blocked by the browser?)\");\n  } else if (previousUrl !== src) {\n    tab$1.location.replace(src);\n    tab$1.focus();\n  } else {\n    tab$1.focus();\n  }\n  previousUrl = src;\n  var unmount = function unmount() {\n    if (tab$1 && !tab$1.closed) {\n      tab$1.close();\n    }\n    tab$1 = null;\n  };\n  return [tab$1, unmount];\n}\nvar VIEWS = {\n  \"VIEW/IFRAME\": renderFrame,\n  \"VIEW/POP\": renderPop,\n  \"VIEW/TAB\": renderTab\n};\nfunction execLocal(_x) {\n  return _execLocal.apply(this, arguments);\n}\nfunction _execLocal() {\n  _execLocal = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(service) {\n    var opts,\n      _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            opts = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            _context.prev = 1;\n            return _context.abrupt(\"return\", VIEWS[service.method](serviceEndpoint(service), opts));\n          case 5:\n            _context.prev = 5;\n            _context.t0 = _context[\"catch\"](1);\n            console.error(\"execLocal({service, opts = {}})\", _context.t0, {\n              service: service,\n              opts: opts\n            });\n            throw _context.t0;\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[1, 5]]);\n  }));\n  return _execLocal.apply(this, arguments);\n}\nfunction execHttpPost(_x) {\n  return _execHttpPost.apply(this, arguments);\n}\nfunction _execHttpPost() {\n  _execHttpPost = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n    var service, body, config, resp, canContinue, _yield$execLocal, _yield$execLocal2, unmount, close;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            service = _ref.service, body = _ref.body, config = _ref.config, _ref.opts;\n            _context.next = 3;\n            return fetchService(service, {\n              data: _objectSpread({\n                fclVersion: VERSION,\n                service: {\n                  params: service.params,\n                  data: service.data,\n                  type: service.type\n                },\n                config: config\n              }, body)\n            }).then(normalizePollingResponse);\n          case 3:\n            resp = _context.sent;\n            if (!(resp.status === \"APPROVED\")) {\n              _context.next = 8;\n              break;\n            }\n            return _context.abrupt(\"return\", resp.data);\n          case 8:\n            if (!(resp.status === \"DECLINED\")) {\n              _context.next = 12;\n              break;\n            }\n            throw new Error(\"Declined: \".concat(resp.reason || \"No reason supplied.\"));\n          case 12:\n            if (!(resp.status === \"REDIRECT\")) {\n              _context.next = 16;\n              break;\n            }\n            return _context.abrupt(\"return\", resp);\n          case 16:\n            if (!(resp.status === \"PENDING\")) {\n              _context.next = 28;\n              break;\n            }\n            canContinue = true;\n            _context.next = 20;\n            return execLocal(normalizeLocalView(resp.local));\n          case 20:\n            _yield$execLocal = _context.sent;\n            _yield$execLocal2 = _slicedToArray(_yield$execLocal, 2);\n            _yield$execLocal2[0];\n            unmount = _yield$execLocal2[1];\n            close = function close() {\n              try {\n                unmount();\n                canContinue = false;\n              } catch (error) {\n                console.error(\"Frame Close Error\", error);\n              }\n            };\n            return _context.abrupt(\"return\", poll(resp.updates, function () {\n              return canContinue;\n            }).then(function (serviceResponse) {\n              close();\n              return serviceResponse;\n            })[\"catch\"](function (error) {\n              console.error(error);\n              close();\n              throw error;\n            }));\n          case 28:\n            console.error(\"Auto Decline: Invalid Response\", {\n              service: service,\n              resp: resp\n            });\n            throw new Error(\"Auto Decline: Invalid Response\");\n          case 30:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _execHttpPost.apply(this, arguments);\n}\nvar CLOSE_EVENT = \"FCL:VIEW:CLOSE\";\nvar READY_EVENT = \"FCL:VIEW:READY\";\nvar RESPONSE_EVENT = \"FCL:VIEW:RESPONSE\";\nvar _ = function _(e) {\n  return typeof e === \"string\" && e.toLowerCase();\n};\nvar IGNORE = new Set([\"monetizationstart\", \"monetizationpending\", \"monetizationprogress\", \"monetizationstop\"]);\nvar deprecate = function deprecate(was, want) {\n  return console.warn(\"DEPRECATION NOTICE\", \"Received \".concat(was, \", please use \").concat(want, \" for this and future versions of FCL\"));\n};\nvar buildMessageHandler = function buildMessageHandler(_ref) {\n  var close = _ref.close,\n    send = _ref.send,\n    onReady = _ref.onReady,\n    onResponse = _ref.onResponse,\n    onMessage = _ref.onMessage;\n  return function (e) {\n    try {\n      if (_typeof(e.data) !== \"object\") return;\n      if (IGNORE.has(e.data.type)) return;\n      if (_(e.data.type) === _(CLOSE_EVENT)) close();\n      if (_(e.data.type) === _(READY_EVENT)) onReady(e, {\n        send: send,\n        close: close\n      });\n      if (_(e.data.type) === _(RESPONSE_EVENT)) onResponse(e, {\n        send: send,\n        close: close\n      });\n      onMessage(e, {\n        send: send,\n        close: close\n      }); // Backwards Compatible\n\n      if (_(e.data.type) === _(\"FCL:FRAME:READY\")) {\n        deprecate(e.data.type, READY_EVENT);\n        onReady(e, {\n          send: send,\n          close: close\n        });\n      }\n      if (_(e.data.type) === _(\"FCL:FRAME:RESPONSE\")) {\n        deprecate(e.data.type, RESPONSE_EVENT);\n        onResponse(e, {\n          send: send,\n          close: close\n        });\n      }\n      if (_(e.data.type) === _(\"FCL:FRAME:CLOSE\")) {\n        deprecate(e.data.type, CLOSE_EVENT);\n        close();\n      } //\n\n      if (_(e.data.type) === _(\"FCL::CHALLENGE::RESPONSE\")) {\n        deprecate(e.data.type, RESPONSE_EVENT);\n        onResponse(e, {\n          send: send,\n          close: close\n        });\n      }\n      if (_(e.data.type) === _(\"FCL::AUTHZ_READY\")) {\n        deprecate(e.data.type, READY_EVENT);\n        onReady(e, {\n          send: send,\n          close: close\n        });\n      }\n      if (_(e.data.type) === _(\"FCL::CHALLENGE::CANCEL\")) {\n        deprecate(e.data.type, CLOSE_EVENT);\n        close();\n      }\n      if (_(e.data.type) === _(\"FCL::CANCEL\")) {\n        deprecate(e.data.type, CLOSE_EVENT);\n        close();\n      }\n    } catch (error) {\n      console.error(\"Frame Callback Error\", error);\n      close();\n    }\n  };\n};\nvar noop$3 = function noop() {};\nfunction frame(service) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (service == null) return {\n    send: noop$3,\n    close: noop$3\n  };\n  var onClose = opts.onClose || noop$3;\n  var onMessage = opts.onMessage || noop$3;\n  var onReady = opts.onReady || noop$3;\n  var onResponse = opts.onResponse || noop$3;\n  var handler = buildMessageHandler({\n    close: close,\n    send: send,\n    onReady: onReady,\n    onResponse: onResponse,\n    onMessage: onMessage\n  });\n  window.addEventListener(\"message\", handler);\n  var _renderFrame = renderFrame(serviceEndpoint(service)),\n    _renderFrame2 = _slicedToArray(_renderFrame, 2),\n    $frame = _renderFrame2[0],\n    unmount = _renderFrame2[1];\n  return {\n    send: send,\n    close: close\n  };\n  function close() {\n    try {\n      window.removeEventListener(\"message\", handler);\n      unmount();\n      onClose();\n    } catch (error) {\n      console.error(\"Frame Close Error\", error);\n    }\n  }\n  function send(msg) {\n    try {\n      $frame.postMessage(JSON.parse(JSON.stringify(msg || {})), \"*\");\n    } catch (error) {\n      console.error(\"Frame Send Error\", msg, error);\n    }\n  }\n}\nfunction execIframeRPC(_ref) {\n  var service = _ref.service,\n    body = _ref.body,\n    config = _ref.config,\n    opts = _ref.opts;\n  return new Promise(function (resolve, reject) {\n    var id = uid();\n    var includeOlderJsonRpcCall = opts.includeOlderJsonRpcCall;\n    frame(service, {\n      onReady: function onReady(_, _ref2) {\n        return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          var send;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  send = _ref2.send;\n                  _context.prev = 1;\n                  send({\n                    type: \"FCL:VIEW:READY:RESPONSE\",\n                    fclVersion: VERSION,\n                    body: body,\n                    service: {\n                      params: service.params,\n                      data: service.data,\n                      type: service.type\n                    },\n                    config: config\n                  });\n                  send({\n                    fclVersion: VERSION,\n                    type: \"FCL:FRAME:READY:RESPONSE\",\n                    body: body,\n                    service: {\n                      params: service.params,\n                      data: service.data,\n                      type: service.type\n                    },\n                    config: config,\n                    deprecated: {\n                      message: \"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE\"\n                    }\n                  });\n                  if (includeOlderJsonRpcCall) {\n                    send({\n                      jsonrpc: \"2.0\",\n                      id: id,\n                      method: \"fcl:sign\",\n                      params: [body, service.params],\n                      deprecated: {\n                        message: \"jsonrpc is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE\"\n                      }\n                    });\n                  }\n                  _context.next = 10;\n                  break;\n                case 7:\n                  _context.prev = 7;\n                  _context.t0 = _context[\"catch\"](1);\n                  throw _context.t0;\n                case 10:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, null, [[1, 7]]);\n        }))();\n      },\n      onResponse: function onResponse(e, _ref3) {\n        var close = _ref3.close;\n        try {\n          if (_typeof(e.data) !== \"object\") return;\n          var resp = normalizePollingResponse(e.data);\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data);\n              close();\n              break;\n            case \"DECLINED\":\n              reject(\"Declined: \".concat(resp.reason || \"No reason supplied\"));\n              close();\n              break;\n            case \"REDIRECT\":\n              resolve(resp);\n              close();\n              break;\n            default:\n              reject(\"Declined: No reason supplied\");\n              close();\n              break;\n          }\n        } catch (error) {\n          console.error(\"execIframeRPC onResponse error\", error);\n          throw error;\n        }\n      },\n      onMessage: function onMessage(e, _ref4) {\n        var close = _ref4.close;\n        try {\n          if (_typeof(e.data) !== \"object\") return;\n          if (e.data.jsonrpc !== \"2.0\") return;\n          if (e.data.id !== id) return;\n          var resp = normalizePollingResponse(e.data.result);\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data);\n              close();\n              break;\n            case \"DECLINED\":\n              reject(\"Declined: \".concat(resp.reason || \"No reason supplied\"));\n              close();\n              break;\n            case \"REDIRECT\":\n              resolve(resp);\n              close();\n              break;\n            default:\n              reject(\"Declined: No reason supplied\");\n              close();\n              break;\n          }\n        } catch (error) {\n          console.error(\"execIframeRPC onMessage error\", error);\n          throw error;\n        }\n      },\n      onClose: function onClose() {\n        reject(\"Declined: Externally Halted\");\n      }\n    });\n  });\n}\nvar noop$2 = function noop() {};\nfunction pop(service) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (service == null) return {\n    send: noop$2,\n    close: noop$2\n  };\n  var onClose = opts.onClose || noop$2;\n  var onMessage = opts.onMessage || noop$2;\n  var onReady = opts.onReady || noop$2;\n  var onResponse = opts.onResponse || noop$2;\n  var handler = buildMessageHandler({\n    close: close,\n    send: send,\n    onReady: onReady,\n    onResponse: onResponse,\n    onMessage: onMessage\n  });\n  window.addEventListener(\"message\", handler);\n  var _renderPop = renderPop(serviceEndpoint(service)),\n    _renderPop2 = _slicedToArray(_renderPop, 2),\n    $pop = _renderPop2[0],\n    unmount = _renderPop2[1];\n  var timer = setInterval(function () {\n    if ($pop && $pop.closed) {\n      close();\n    }\n  }, 500);\n  return {\n    send: send,\n    close: close\n  };\n  function close() {\n    try {\n      window.removeEventListener(\"message\", handler);\n      clearInterval(timer);\n      unmount();\n      onClose();\n    } catch (error) {\n      console.error(\"Popup Close Error\", error);\n    }\n  }\n  function send(msg) {\n    try {\n      $pop.postMessage(JSON.parse(JSON.stringify(msg || {})), \"*\");\n    } catch (error) {\n      console.error(\"Popup Send Error\", msg, error);\n    }\n  }\n}\nfunction execPopRPC(_ref) {\n  var service = _ref.service,\n    body = _ref.body,\n    config = _ref.config,\n    opts = _ref.opts;\n  return new Promise(function (resolve, reject) {\n    var id = uid();\n    var redir = opts.redir,\n      includeOlderJsonRpcCall = opts.includeOlderJsonRpcCall;\n    pop(service, {\n      onReady: function onReady(_, _ref2) {\n        return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          var send;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  send = _ref2.send;\n                  _context.prev = 1;\n                  send({\n                    fclVersion: VERSION,\n                    type: \"FCL:VIEW:READY:RESPONSE\",\n                    body: body,\n                    service: {\n                      params: service.params,\n                      data: service.data,\n                      type: service.type\n                    },\n                    config: config\n                  });\n                  send({\n                    fclVersion: VERSION,\n                    type: \"FCL:FRAME:READY:RESPONSE\",\n                    body: body,\n                    service: {\n                      params: service.params,\n                      data: service.data,\n                      type: service.type\n                    },\n                    config: config,\n                    deprecated: {\n                      message: \"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE\"\n                    }\n                  });\n                  if (includeOlderJsonRpcCall) {\n                    send({\n                      jsonrpc: \"2.0\",\n                      id: id,\n                      method: \"fcl:sign\",\n                      params: [body, service.params]\n                    });\n                  }\n                  _context.next = 10;\n                  break;\n                case 7:\n                  _context.prev = 7;\n                  _context.t0 = _context[\"catch\"](1);\n                  throw _context.t0;\n                case 10:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, null, [[1, 7]]);\n        }))();\n      },\n      onResponse: function onResponse(e, _ref3) {\n        var close = _ref3.close;\n        try {\n          if (_typeof(e.data) !== \"object\") return;\n          var resp = normalizePollingResponse(e.data);\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data);\n              !redir && close();\n              break;\n            case \"DECLINED\":\n              reject(\"Declined: \".concat(resp.reason || \"No reason supplied\"));\n              close();\n              break;\n            case \"REDIRECT\":\n              resolve(resp);\n              close();\n              break;\n            default:\n              reject(\"Declined: No reason supplied\");\n              close();\n              break;\n          }\n        } catch (error) {\n          console.error(\"execPopRPC onResponse error\", error);\n          throw error;\n        }\n      },\n      onMessage: function onMessage(e, _ref4) {\n        var close = _ref4.close;\n        try {\n          if (_typeof(e.data) !== \"object\") return;\n          if (e.data.jsonrpc !== \"2.0\") return;\n          if (e.data.id !== id) return;\n          var resp = normalizePollingResponse(e.data.result);\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data);\n              !redir && close();\n              break;\n            case \"DECLINED\":\n              reject(\"Declined: \".concat(resp.reason || \"No reason supplied\"));\n              close();\n              break;\n            case \"REDIRECT\":\n              resolve(resp);\n              close();\n              break;\n            default:\n              reject(\"Declined: No reason supplied\");\n              close();\n              break;\n          }\n        } catch (error) {\n          console.error(\"execPopRPC onMessage error\", error);\n          throw error;\n        }\n      },\n      onClose: function onClose() {\n        reject(\"Declined: Externally Halted\");\n      }\n    });\n  });\n}\nvar noop$1 = function noop() {};\nfunction tab(service) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (service == null) return {\n    send: noop$1,\n    close: noop$1\n  };\n  var onClose = opts.onClose || noop$1;\n  var onMessage = opts.onMessage || noop$1;\n  var onReady = opts.onReady || noop$1;\n  var onResponse = opts.onResponse || noop$1;\n  var handler = buildMessageHandler({\n    close: close,\n    send: send,\n    onReady: onReady,\n    onResponse: onResponse,\n    onMessage: onMessage\n  });\n  window.addEventListener(\"message\", handler);\n  var _renderTab = renderTab(serviceEndpoint(service)),\n    _renderTab2 = _slicedToArray(_renderTab, 2),\n    $tab = _renderTab2[0],\n    unmount = _renderTab2[1];\n  var timer = setInterval(function () {\n    if ($tab && $tab.closed) {\n      close();\n    }\n  }, 500);\n  return {\n    send: send,\n    close: close\n  };\n  function close() {\n    try {\n      window.removeEventListener(\"message\", handler);\n      clearInterval(timer);\n      unmount();\n      onClose();\n    } catch (error) {\n      console.error(\"Tab Close Error\", error);\n    }\n  }\n  function send(msg) {\n    try {\n      $tab.postMessage(JSON.parse(JSON.stringify(msg || {})), \"*\");\n    } catch (error) {\n      console.error(\"Tab Send Error\", msg, error);\n    }\n  }\n}\nfunction execTabRPC(_ref) {\n  var service = _ref.service,\n    body = _ref.body,\n    config = _ref.config,\n    opts = _ref.opts;\n  return new Promise(function (resolve, reject) {\n    var id = uid();\n    var redir = opts.redir,\n      includeOlderJsonRpcCall = opts.includeOlderJsonRpcCall;\n    tab(service, {\n      onReady: function onReady(_, _ref2) {\n        return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          var send;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  send = _ref2.send;\n                  _context.prev = 1;\n                  send({\n                    fclVersion: VERSION,\n                    type: \"FCL:VIEW:READY:RESPONSE\",\n                    body: body,\n                    service: {\n                      params: service.params,\n                      data: service.data,\n                      type: service.type\n                    },\n                    config: config\n                  });\n                  send({\n                    fclVersion: VERSION,\n                    type: \"FCL:FRAME:READY:RESPONSE\",\n                    body: body,\n                    service: {\n                      params: service.params,\n                      data: service.data,\n                      type: service.type\n                    },\n                    config: config,\n                    deprecated: {\n                      message: \"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE\"\n                    }\n                  });\n                  if (includeOlderJsonRpcCall) {\n                    send({\n                      jsonrpc: \"2.0\",\n                      id: id,\n                      method: \"fcl:sign\",\n                      params: [body, service.params]\n                    });\n                  }\n                  _context.next = 10;\n                  break;\n                case 7:\n                  _context.prev = 7;\n                  _context.t0 = _context[\"catch\"](1);\n                  throw _context.t0;\n                case 10:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, null, [[1, 7]]);\n        }))();\n      },\n      onResponse: function onResponse(e, _ref3) {\n        var close = _ref3.close;\n        try {\n          if (_typeof(e.data) !== \"object\") return;\n          var resp = normalizePollingResponse(e.data);\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data);\n              !redir && close();\n              break;\n            case \"DECLINED\":\n              reject(\"Declined: \".concat(resp.reason || \"No reason supplied\"));\n              close();\n              break;\n            case \"REDIRECT\":\n              resolve(resp);\n              close();\n              break;\n            default:\n              reject(\"Declined: No reason supplied\");\n              close();\n              break;\n          }\n        } catch (error) {\n          console.error(\"execPopRPC onResponse error\", error);\n          throw error;\n        }\n      },\n      onMessage: function onMessage(e, _ref4) {\n        var close = _ref4.close;\n        try {\n          if (_typeof(e.data) !== \"object\") return;\n          if (e.data.jsonrpc !== \"2.0\") return;\n          if (e.data.id !== id) return;\n          var resp = normalizePollingResponse(e.data.result);\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data);\n              !redir && close();\n              break;\n            case \"DECLINED\":\n              reject(\"Declined: \".concat(resp.reason || \"No reason supplied\"));\n              close();\n              break;\n            case \"REDIRECT\":\n              resolve(resp);\n              close();\n              break;\n            default:\n              reject(\"Declined: No reason supplied\");\n              close();\n              break;\n          }\n        } catch (error) {\n          console.error(\"execPopRPC onMessage error\", error);\n          throw error;\n        }\n      },\n      onClose: function onClose() {\n        reject(\"Declined: Externally Halted\");\n      }\n    });\n  });\n}\nvar noop = function noop() {};\nfunction extension(service) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (service == null) return {\n    send: noop,\n    close: noop\n  };\n  var onClose = opts.onClose || noop;\n  var onMessage = opts.onMessage || noop;\n  var onReady = opts.onReady || noop;\n  var onResponse = opts.onResponse || noop;\n  var handler = buildMessageHandler({\n    close: close,\n    send: send,\n    onReady: onReady,\n    onResponse: onResponse,\n    onMessage: onMessage\n  });\n  window.addEventListener(\"message\", handler);\n  send({\n    service: service\n  });\n  return {\n    send: send,\n    close: close\n  };\n  function close() {\n    try {\n      window.removeEventListener(\"message\", handler);\n      onClose();\n    } catch (error) {\n      console.error(\"Ext Close Error\", error);\n    }\n  }\n  function send(msg) {\n    try {\n      window && window.postMessage(JSON.parse(JSON.stringify(msg || {})), \"*\");\n    } catch (error) {\n      console.error(\"Ext Send Error\", msg, error);\n    }\n  }\n}\nfunction execExtRPC(_ref) {\n  var service = _ref.service,\n    body = _ref.body,\n    config = _ref.config;\n  _ref.opts;\n  return new Promise(function (resolve, reject) {\n    extension(service, {\n      onReady: function onReady(_, _ref2) {\n        return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          var send;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  send = _ref2.send;\n                  _context.prev = 1;\n                  send({\n                    fclVersion: VERSION,\n                    type: \"FCL:VIEW:READY:RESPONSE\",\n                    body: body,\n                    service: {\n                      params: service.params,\n                      data: service.data,\n                      type: service.type\n                    },\n                    config: config\n                  });\n                  _context.next = 8;\n                  break;\n                case 5:\n                  _context.prev = 5;\n                  _context.t0 = _context[\"catch\"](1);\n                  throw _context.t0;\n                case 8:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, null, [[1, 5]]);\n        }))();\n      },\n      onResponse: function onResponse(e, _ref3) {\n        var close = _ref3.close;\n        try {\n          if (_typeof(e.data) !== \"object\") return;\n          var resp = normalizePollingResponse(e.data);\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data);\n              close();\n              break;\n            case \"DECLINED\":\n              reject(\"Declined: \".concat(resp.reason || \"No reason supplied\"));\n              close();\n              break;\n            case \"REDIRECT\":\n              resolve(resp);\n              close();\n              break;\n            default:\n              reject(\"Declined: No reason supplied\");\n              close();\n              break;\n          }\n        } catch (error) {\n          console.error(\"execExtRPC onResponse error\", error);\n          throw error;\n        }\n      },\n      onClose: function onClose() {\n        reject(\"Declined: Externally Halted\");\n      }\n    });\n  });\n}\nvar CORE_STRATEGIES = {\n  \"HTTP/RPC\": execHttpPost,\n  \"HTTP/POST\": execHttpPost,\n  \"IFRAME/RPC\": execIframeRPC,\n  \"POP/RPC\": execPopRPC,\n  \"TAB/RPC\": execTabRPC,\n  \"EXT/RPC\": execExtRPC\n};\nvar supportedPlugins = [\"ServicePlugin\"];\nvar supportedServicePlugins = [\"discovery-service\"];\nvar validateDiscoveryPlugin = function validateDiscoveryPlugin(servicePlugin) {\n  var services = servicePlugin.services,\n    serviceStrategy = servicePlugin.serviceStrategy;\n  invariant(Array.isArray(services) && services.length, \"Array of Discovery Services is required\");\n  var _iterator = _createForOfIteratorHelper(services),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var ds = _step.value;\n      invariant(isRequired(ds.f_type) && ds.f_type === \"Service\", \"Service is required\");\n      invariant(isRequired(ds.type) && ds.type === \"authn\", \"Service must be type authn. Received \".concat(ds.type));\n      invariant(ds.method in CORE_STRATEGIES || serviceStrategy.method === ds.method, \"Service method \".concat(ds.method, \" is not supported\"));\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  invariant(isRequired(serviceStrategy), \"Service strategy is required\");\n  invariant(isRequired(serviceStrategy.method) && isString(serviceStrategy.method), \"Service strategy method is required\");\n  invariant(isRequired(serviceStrategy.exec) && isFunc(serviceStrategy.exec), \"Service strategy exec function is required\");\n  return {\n    discoveryServices: services,\n    serviceStrategy: serviceStrategy\n  };\n};\nvar ServiceRegistry = function ServiceRegistry() {\n  var services = new Set();\n  var strategies = new Map(Object.entries(CORE_STRATEGIES));\n  var add = function add(servicePlugin) {\n    invariant(supportedServicePlugins.includes(servicePlugin.type), \"Service Plugin type \".concat(servicePlugin.type, \" is not supported\"));\n    if (servicePlugin.type === \"discovery-service\") {\n      var _validateDiscoveryPlu = validateDiscoveryPlugin(servicePlugin),\n        discoveryServices = _validateDiscoveryPlu.discoveryServices,\n        serviceStrategy = _validateDiscoveryPlu.serviceStrategy;\n      setServices(discoveryServices);\n      if (!strategies.has(serviceStrategy.method)) {\n        strategies.set(serviceStrategy.method, serviceStrategy.exec);\n      } else {\n        log({\n          title: \"Add Service Plugin\",\n          message: \"Service strategy for \".concat(serviceStrategy.method, \" already exists\"),\n          level: LEVELS.warn\n        });\n      }\n    }\n  };\n  var setServices = function setServices(discoveryServices) {\n    return services = new Set(_toConsumableArray(discoveryServices));\n  };\n  var getServices = function getServices() {\n    return _toConsumableArray(services);\n  };\n  var getStrategy = function getStrategy(method) {\n    return strategies.get(method);\n  };\n  var getStrategies = function getStrategies() {\n    return _toConsumableArray(strategies.keys());\n  };\n  return Object.freeze({\n    add: add,\n    getServices: getServices,\n    getStrategy: getStrategy,\n    getStrategies: getStrategies\n  });\n};\nvar validatePlugins = function validatePlugins(plugins) {\n  var pluginsArray;\n  invariant(plugins, \"No plugins supplied\");\n  if (!Array.isArray(plugins)) {\n    pluginsArray = [plugins];\n  } else {\n    pluginsArray = _toConsumableArray(plugins);\n  }\n  var _iterator2 = _createForOfIteratorHelper(pluginsArray),\n    _step2;\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var p = _step2.value;\n      invariant(isRequired(p.name), \"Plugin name is required\");\n      invariant(isRequired(p.f_type), \"Plugin f_type is required\");\n      invariant(supportedPlugins.includes(p.f_type), \"Plugin type \".concat(p.f_type, \" is not supported\"));\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n  return pluginsArray;\n};\nvar PluginRegistry = function PluginRegistry() {\n  var pluginsMap = new Map();\n  var getPlugins = function getPlugins() {\n    return pluginsMap;\n  };\n  var add = function add(plugins) {\n    var pluginsArray = validatePlugins(plugins);\n    var _iterator3 = _createForOfIteratorHelper(pluginsArray),\n      _step3;\n    try {\n      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n        var p = _step3.value;\n        pluginsMap.set(p.name, p);\n        if (p.f_type === \"ServicePlugin\") {\n          serviceRegistry.add(p);\n        }\n      }\n    } catch (err) {\n      _iterator3.e(err);\n    } finally {\n      _iterator3.f();\n    }\n  };\n  return Object.freeze({\n    add: add,\n    getPlugins: getPlugins\n  });\n};\nvar serviceRegistry = ServiceRegistry();\nvar pluginRegistry = PluginRegistry();\nvar execStrategy = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n    var service, body, config, opts, strategy;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            service = _ref.service, body = _ref.body, config = _ref.config, opts = _ref.opts;\n            strategy = serviceRegistry.getStrategy(service.method);\n            return _context.abrupt(\"return\", strategy({\n              service: service,\n              body: body,\n              config: config,\n              opts: opts\n            }));\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return function execStrategy(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nfunction execService(_x2) {\n  return _execService.apply(this, arguments);\n}\nfunction _execService() {\n  _execService = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref3) {\n    var _window$location$host, _window, _window$location;\n    var service, _ref3$msg, msg, _ref3$config, config, _ref3$opts, opts, execConfig, res;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            service = _ref3.service, _ref3$msg = _ref3.msg, msg = _ref3$msg === void 0 ? {} : _ref3$msg, _ref3$config = _ref3.config, config = _ref3$config === void 0 ? {} : _ref3$config, _ref3$opts = _ref3.opts, opts = _ref3$opts === void 0 ? {} : _ref3$opts;\n            msg.data = service.data;\n            _context2.next = 4;\n            return configLens(/^service\\./);\n          case 4:\n            _context2.t0 = _context2.sent;\n            _context2.next = 7;\n            return configLens(/^app\\.detail\\./);\n          case 7:\n            _context2.t1 = _context2.sent;\n            _context2.t2 = _objectSpread(_objectSpread({}, config.client), {}, {\n              fclVersion: VERSION,\n              fclLibrary: \"https://github.com/onflow/fcl-js\",\n              hostname: (_window$location$host = (_window = window) === null || _window === void 0 ? void 0 : (_window$location = _window.location) === null || _window$location === void 0 ? void 0 : _window$location.hostname) !== null && _window$location$host !== void 0 ? _window$location$host : null\n            });\n            execConfig = {\n              services: _context2.t0,\n              app: _context2.t1,\n              client: _context2.t2\n            };\n            _context2.prev = 10;\n            _context2.next = 13;\n            return execStrategy({\n              service: service,\n              body: msg,\n              config: execConfig,\n              opts: opts\n            });\n          case 13:\n            res = _context2.sent;\n            if (!(res.status === \"REDIRECT\")) {\n              _context2.next = 21;\n              break;\n            }\n            invariant(service.type === res.data.type, \"Cannot shift recursive service type in execService\");\n            _context2.next = 18;\n            return execService({\n              service: res.data,\n              msg: msg,\n              config: execConfig,\n              opts: opts\n            });\n          case 18:\n            return _context2.abrupt(\"return\", _context2.sent);\n          case 21:\n            return _context2.abrupt(\"return\", res);\n          case 22:\n            _context2.next = 28;\n            break;\n          case 24:\n            _context2.prev = 24;\n            _context2.t3 = _context2[\"catch\"](10);\n            log({\n              title: \"Error on execService \".concat(service === null || service === void 0 ? void 0 : service.type),\n              message: _context2.t3,\n              level: LEVELS.error\n            });\n            throw _context2.t3;\n          case 28:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[10, 24]]);\n  }));\n  return _execService.apply(this, arguments);\n}\n\n//    \"f_type\": \"CompositeSignature\",\n//    \"f_vsn\": \"1.0.0\",\n//    \"addr\": \"_____\",         // sans-prefix\n//    \"signature\": \"adfe1234\", // hex\n//    \"keyId\": 3,\n// }\n\nfunction normalizeCompositeSignature(resp) {\n  if (resp == null) return null;\n  switch (resp[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return resp;\n    default:\n      return _objectSpread(_objectSpread({}, COMPOSITE_SIGNATURE_PRAGMA), {}, {\n        addr: sansPrefix(resp.addr || resp.address),\n        signature: resp.signature || resp.sig,\n        keyId: resp.keyId\n      });\n  }\n}\nvar makeDiscoveryServices = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var _window;\n    var extensionServices;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            extensionServices = ((_window = window) === null || _window === void 0 ? void 0 : _window.fcl_extensions) || [];\n            return _context.abrupt(\"return\", [].concat(_toConsumableArray(extensionServices), _toConsumableArray(serviceRegistry.getServices())));\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return function makeDiscoveryServices() {\n    return _ref.apply(this, arguments);\n  };\n}();\nfunction getDiscoveryService(_x) {\n  return _getDiscoveryService.apply(this, arguments);\n}\nfunction _getDiscoveryService() {\n  _getDiscoveryService = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(service) {\n    var _service$endpoint;\n    var discoveryAuthnInclude, discoveryWalletMethod, method, endpoint;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return config.get(\"discovery.authn.include\", []);\n          case 2:\n            discoveryAuthnInclude = _context2.sent;\n            _context2.next = 5;\n            return config.first([\"discovery.wallet.method\", \"discovery.wallet.method.default\"]);\n          case 5:\n            discoveryWalletMethod = _context2.sent;\n            method = service !== null && service !== void 0 && service.method ? service.method : discoveryWalletMethod;\n            if (!((_service$endpoint = service === null || service === void 0 ? void 0 : service.endpoint) !== null && _service$endpoint !== void 0)) {\n              _context2.next = 11;\n              break;\n            }\n            _context2.t0 = _service$endpoint;\n            _context2.next = 14;\n            break;\n          case 11:\n            _context2.next = 13;\n            return config.first([\"discovery.wallet\", \"challenge.handshake\"]);\n          case 13:\n            _context2.t0 = _context2.sent;\n          case 14:\n            endpoint = _context2.t0;\n            invariant(endpoint, \"\\n    If no service is passed to \\\"authenticate,\\\" then \\\"discovery.wallet\\\" must be defined in fcl config.\\n    See: \\\"https://docs.onflow.org/fcl/reference/api/#setting-configuration-values\\\"\\n    \");\n            return _context2.abrupt(\"return\", _objectSpread(_objectSpread({}, service), {}, {\n              type: \"authn\",\n              endpoint: endpoint,\n              method: method,\n              discoveryAuthnInclude: discoveryAuthnInclude\n            }));\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _getDiscoveryService.apply(this, arguments);\n}\nfunction getServices(_x) {\n  return _getServices.apply(this, arguments);\n}\nfunction _getServices() {\n  _getServices = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n    var _window, _window$navigator;\n    var types, endpoint, include, url;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            types = _ref.types;\n            _context.next = 3;\n            return config.get(\"discovery.authn.endpoint\");\n          case 3:\n            endpoint = _context.sent;\n            invariant(Boolean(endpoint), \"\\\"discovery.authn.endpoint\\\" in config must be defined.\");\n            _context.next = 7;\n            return config.get(\"discovery.authn.include\", []);\n          case 7:\n            include = _context.sent;\n            url = new URL(endpoint);\n            _context.t0 = fetch;\n            _context.t1 = url;\n            _context.t2 = {\n              \"Content-Type\": \"application/json\"\n            };\n            _context.t3 = JSON;\n            _context.t4 = types;\n            _context.t5 = VERSION;\n            _context.t6 = include;\n            _context.next = 18;\n            return makeDiscoveryServices();\n          case 18:\n            _context.t7 = _context.sent;\n            _context.t8 = serviceRegistry.getStrategies();\n            _context.t9 = (_window = window) === null || _window === void 0 ? void 0 : (_window$navigator = _window.navigator) === null || _window$navigator === void 0 ? void 0 : _window$navigator.userAgent;\n            _context.t10 = {\n              type: _context.t4,\n              fclVersion: _context.t5,\n              include: _context.t6,\n              clientServices: _context.t7,\n              supportedStrategies: _context.t8,\n              userAgent: _context.t9\n            };\n            _context.t11 = _context.t3.stringify.call(_context.t3, _context.t10);\n            _context.t12 = {\n              method: \"POST\",\n              headers: _context.t2,\n              body: _context.t11\n            };\n            return _context.abrupt(\"return\", (0, _context.t0)(_context.t1, _context.t12).then(function (d) {\n              return d.json();\n            }));\n          case 25:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getServices.apply(this, arguments);\n}\nvar _HANDLERS$3;\nvar SERVICE_ACTOR_KEYS = {\n  AUTHN: \"authn\",\n  RESULTS: \"results\",\n  SNAPSHOT: \"SNAPSHOT\",\n  UPDATED: \"UPDATED\",\n  UPDATE_RESULTS: \"UPDATE_RESULTS\"\n};\nvar warn = function warn(fact, msg) {\n  if (fact) {\n    console.warn(\"\\n      %cFCL Warning\\n      ============================\\n      \".concat(msg, \"\\n      For more info, please see the docs: https://docs.onflow.org/fcl/\\n      ============================\\n      \"), \"font-weight:bold;font-family:monospace;\");\n  }\n};\nvar fetchServicesFromDiscovery = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var services;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return getServices({\n              types: [SERVICE_ACTOR_KEYS.AUTHN]\n            });\n          case 3:\n            services = _context.sent;\n            send(SERVICE_ACTOR_KEYS.AUTHN, SERVICE_ACTOR_KEYS.UPDATE_RESULTS, {\n              results: services\n            });\n            _context.next = 10;\n            break;\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            log({\n              title: \"\".concat(_context.t0.name, \" Error fetching Discovery API services.\"),\n              message: _context.t0.message,\n              level: LEVELS.error\n            });\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 7]]);\n  }));\n  return function fetchServicesFromDiscovery() {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar HANDLERS$3 = (_HANDLERS$3 = {}, _defineProperty(_HANDLERS$3, INIT, function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(ctx) {\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            warn(typeof window === \"undefined\", '\"fcl.discovery\" is only available in the browser.'); // If you call this before the window is loaded extensions will not be set yet\n\n            if (document.readyState === 'complete') {\n              fetchServicesFromDiscovery();\n            } else {\n              window.onload = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n                return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        fetchServicesFromDiscovery();\n                      case 1:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2);\n              }));\n            }\n          case 2:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}()), _defineProperty(_HANDLERS$3, SERVICE_ACTOR_KEYS.UPDATE_RESULTS, function (ctx, _letter, data) {\n  ctx.merge(data);\n  ctx.broadcast(SERVICE_ACTOR_KEYS.UPDATED, _objectSpread({}, ctx.all()));\n}), _defineProperty(_HANDLERS$3, SUBSCRIBE, function (ctx, letter) {\n  ctx.subscribe(letter.from);\n  ctx.send(letter.from, SERVICE_ACTOR_KEYS.UPDATED, _objectSpread({}, ctx.all()));\n}), _defineProperty(_HANDLERS$3, UNSUBSCRIBE, function (ctx, letter) {\n  return ctx.unsubscribe(letter.from);\n}), _defineProperty(_HANDLERS$3, SERVICE_ACTOR_KEYS.SNAPSHOT, function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(ctx, letter) {\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            return _context4.abrupt(\"return\", letter.reply(_objectSpread({}, ctx.all())));\n          case 1:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return function (_x2, _x3) {\n    return _ref4.apply(this, arguments);\n  };\n}()), _HANDLERS$3);\nvar spawnProviders = function spawnProviders() {\n  return spawn(HANDLERS$3, SERVICE_ACTOR_KEYS.AUTHN);\n};\nvar authn = {\n  subscribe: function subscribe(cb) {\n    return subscriber(SERVICE_ACTOR_KEYS.AUTHN, spawnProviders, cb);\n  },\n  snapshot: function snapshot() {\n    return snapshoter(SERVICE_ACTOR_KEYS.AUTHN, spawnProviders);\n  },\n  update: function update() {\n    return fetchServicesFromDiscovery();\n  }\n};\nvar discovery = {\n  authn: authn\n};\nfunction isAndroid() {\n  return typeof navigator !== \"undefined\" && /android/i.test(navigator.userAgent);\n}\nfunction isSmallIOS() {\n  return typeof navigator !== \"undefined\" && /iPhone|iPod/.test(navigator.userAgent);\n}\nfunction isLargeIOS() {\n  return typeof navigator !== \"undefined\" && /iPad/.test(navigator.userAgent);\n}\nfunction isIOS() {\n  return isSmallIOS() || isLargeIOS();\n}\nfunction isMobile() {\n  return isAndroid() || isIOS();\n}\nvar _HANDLERS$2;\nvar isFn = function isFn(d) {\n  return typeof d === \"function\";\n};\nvar NAME = \"CURRENT_USER\";\nvar UPDATED$1 = \"CURRENT_USER/UPDATED\";\nvar SNAPSHOT = \"SNAPSHOT\";\nvar SET_CURRENT_USER = \"SET_CURRENT_USER\";\nvar DEL_CURRENT_USER = \"DEL_CURRENT_USER\";\nvar DATA = \"{\\n  \\\"f_type\\\": \\\"User\\\",\\n  \\\"f_vsn\\\": \\\"1.0.0\\\",\\n  \\\"addr\\\":null,\\n  \\\"cid\\\":null,\\n  \\\"loggedIn\\\":null,\\n  \\\"expiresAt\\\":null,\\n  \\\"services\\\":[]\\n}\";\nvar getStoredUser = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(storage) {\n    var fallback, stored;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            fallback = JSON.parse(DATA);\n            _context.next = 3;\n            return storage.get(NAME);\n          case 3:\n            stored = _context.sent;\n            if (!(stored != null && fallback[\"f_vsn\"] !== stored[\"f_vsn\"])) {\n              _context.next = 7;\n              break;\n            }\n            storage.removeItem(NAME);\n            return _context.abrupt(\"return\", fallback);\n          case 7:\n            return _context.abrupt(\"return\", stored || fallback);\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return function getStoredUser(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar HANDLERS$2 = (_HANDLERS$2 = {}, _defineProperty(_HANDLERS$2, INIT, function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(ctx) {\n    var storage, user;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (typeof window === \"undefined\") {\n              console.warn(\"\\n        %cFCL Warning\\n        ============================\\n        \\\"currentUser\\\" is only available in the browser.\\n        For more info, please see the docs: https://docs.onflow.org/fcl/\\n        ============================\\n        \", \"font-weight:bold;font-family:monospace;\");\n            }\n            ctx.merge(JSON.parse(DATA));\n            _context2.next = 4;\n            return config.first([\"fcl.storage\", \"fcl.storage.default\"]);\n          case 4:\n            storage = _context2.sent;\n            if (!storage.can) {\n              _context2.next = 10;\n              break;\n            }\n            _context2.next = 8;\n            return getStoredUser(storage);\n          case 8:\n            user = _context2.sent;\n            if (notExpired(user)) ctx.merge(user);\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return function (_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}()), _defineProperty(_HANDLERS$2, SUBSCRIBE, function (ctx, letter) {\n  ctx.subscribe(letter.from);\n  ctx.send(letter.from, UPDATED$1, _objectSpread({}, ctx.all()));\n}), _defineProperty(_HANDLERS$2, UNSUBSCRIBE, function (ctx, letter) {\n  ctx.unsubscribe(letter.from);\n}), _defineProperty(_HANDLERS$2, SNAPSHOT, function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(ctx, letter) {\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            letter.reply(_objectSpread({}, ctx.all()));\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return function (_x3, _x4) {\n    return _ref3.apply(this, arguments);\n  };\n}()), _defineProperty(_HANDLERS$2, SET_CURRENT_USER, function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(ctx, letter, data) {\n    var storage;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            ctx.merge(data);\n            _context4.next = 3;\n            return config.first([\"fcl.storage\", \"fcl.storage.default\"]);\n          case 3:\n            storage = _context4.sent;\n            if (storage.can) storage.put(NAME, ctx.all());\n            ctx.broadcast(UPDATED$1, _objectSpread({}, ctx.all()));\n          case 6:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return function (_x5, _x6, _x7) {\n    return _ref4.apply(this, arguments);\n  };\n}()), _defineProperty(_HANDLERS$2, DEL_CURRENT_USER, function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(ctx, letter) {\n    var storage;\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            ctx.merge(JSON.parse(DATA));\n            _context5.next = 3;\n            return config.first([\"fcl.storage\", \"fcl.storage.default\"]);\n          case 3:\n            storage = _context5.sent;\n            if (storage.can) storage.put(NAME, ctx.all());\n            ctx.broadcast(UPDATED$1, _objectSpread({}, ctx.all()));\n          case 6:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n  return function (_x8, _x9) {\n    return _ref5.apply(this, arguments);\n  };\n}()), _HANDLERS$2);\nvar spawnCurrentUser = function spawnCurrentUser() {\n  return spawn(HANDLERS$2, NAME);\n};\nfunction notExpired(user) {\n  return user.expiresAt == null || user.expiresAt === 0 || user.expiresAt > Date.now();\n}\nfunction getAccountProofData() {\n  return _getAccountProofData.apply(this, arguments);\n}\nfunction _getAccountProofData() {\n  _getAccountProofData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n    var accountProofDataResolver, accountProofData;\n    return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            _context8.next = 2;\n            return config.get(\"fcl.accountProof.resolver\");\n          case 2:\n            accountProofDataResolver = _context8.sent;\n            if (isFn(accountProofDataResolver)) {\n              _context8.next = 5;\n              break;\n            }\n            return _context8.abrupt(\"return\");\n          case 5:\n            _context8.next = 7;\n            return accountProofDataResolver();\n          case 7:\n            accountProofData = _context8.sent;\n            if (!(accountProofData == null)) {\n              _context8.next = 10;\n              break;\n            }\n            return _context8.abrupt(\"return\");\n          case 10:\n            invariant(typeof accountProofData.appIdentifier === \"string\", \"appIdentifier must be a string\");\n            invariant(/^[0-9a-f]+$/i.test(accountProofData.nonce), \"Nonce must be a hex string\");\n            return _context8.abrupt(\"return\", accountProofData);\n          case 13:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8);\n  }));\n  return _getAccountProofData.apply(this, arguments);\n}\nvar makeConfig = /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(_ref6) {\n    var discoveryAuthnInclude;\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            discoveryAuthnInclude = _ref6.discoveryAuthnInclude;\n            _context6.t0 = discoveryAuthnInclude;\n            _context6.next = 4;\n            return makeDiscoveryServices();\n          case 4:\n            _context6.t1 = _context6.sent;\n            _context6.t2 = serviceRegistry.getStrategies();\n            _context6.t3 = {\n              discoveryAuthnInclude: _context6.t0,\n              clientServices: _context6.t1,\n              supportedStrategies: _context6.t2\n            };\n            return _context6.abrupt(\"return\", {\n              client: _context6.t3\n            });\n          case 8:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n  return function makeConfig(_x10) {\n    return _ref7.apply(this, arguments);\n  };\n}();\nfunction authenticate$1() {\n  return _authenticate.apply(this, arguments);\n}\nfunction _authenticate() {\n  _authenticate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10() {\n    var _service$provider, _service$provider2;\n    var _ref11,\n      service,\n      _ref11$redir,\n      redir,\n      _service$provider3,\n      _args10 = arguments;\n    return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n      while (1) {\n        switch (_context10.prev = _context10.next) {\n          case 0:\n            _ref11 = _args10.length > 0 && _args10[0] !== undefined ? _args10[0] : {}, service = _ref11.service, _ref11$redir = _ref11.redir, redir = _ref11$redir === void 0 ? false : _ref11$redir;\n            if (!(service && !(service !== null && service !== void 0 && (_service$provider = service.provider) !== null && _service$provider !== void 0 && _service$provider.is_installed) && service !== null && service !== void 0 && (_service$provider2 = service.provider) !== null && _service$provider2 !== void 0 && _service$provider2.requires_install)) {\n              _context10.next = 4;\n              break;\n            }\n            window.location.href = service === null || service === void 0 ? void 0 : (_service$provider3 = service.provider) === null || _service$provider3 === void 0 ? void 0 : _service$provider3.install_link;\n            return _context10.abrupt(\"return\");\n          case 4:\n            return _context10.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n              var _ref12 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(resolve, reject) {\n                var opts, user, discoveryService, refreshService, accountProofData, response, _response;\n                return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n                  while (1) {\n                    switch (_context9.prev = _context9.next) {\n                      case 0:\n                        spawnCurrentUser();\n                        opts = {\n                          redir: redir\n                        };\n                        _context9.next = 4;\n                        return snapshot();\n                      case 4:\n                        user = _context9.sent;\n                        _context9.next = 7;\n                        return getDiscoveryService(service);\n                      case 7:\n                        discoveryService = _context9.sent;\n                        refreshService = serviceOfType(user.services, \"authn-refresh\");\n                        _context9.prev = 9;\n                        _context9.next = 12;\n                        return getAccountProofData();\n                      case 12:\n                        accountProofData = _context9.sent;\n                        _context9.next = 19;\n                        break;\n                      case 15:\n                        _context9.prev = 15;\n                        _context9.t0 = _context9[\"catch\"](9);\n                        console.error(\"Error During Authentication: Could not resolve account proof data.\\n        \".concat(_context9.t0));\n                        return _context9.abrupt(\"return\", reject(_context9.t0));\n                      case 19:\n                        if (!user.loggedIn) {\n                          _context9.next = 47;\n                          break;\n                        }\n                        if (!refreshService) {\n                          _context9.next = 46;\n                          break;\n                        }\n                        _context9.prev = 21;\n                        _context9.next = 24;\n                        return execService({\n                          service: refreshService,\n                          msg: accountProofData,\n                          opts: opts\n                        });\n                      case 24:\n                        response = _context9.sent;\n                        _context9.t1 = send;\n                        _context9.t2 = NAME;\n                        _context9.t3 = SET_CURRENT_USER;\n                        _context9.next = 30;\n                        return buildUser(response);\n                      case 30:\n                        _context9.t4 = _context9.sent;\n                        (0, _context9.t1)(_context9.t2, _context9.t3, _context9.t4);\n                        _context9.next = 37;\n                        break;\n                      case 34:\n                        _context9.prev = 34;\n                        _context9.t5 = _context9[\"catch\"](21);\n                        console.error(\"Error: Could not refresh authentication.\", _context9.t5);\n                      case 37:\n                        _context9.prev = 37;\n                        _context9.t6 = resolve;\n                        _context9.next = 41;\n                        return snapshot();\n                      case 41:\n                        _context9.t7 = _context9.sent;\n                        return _context9.abrupt(\"return\", (0, _context9.t6)(_context9.t7));\n                      case 44:\n                        _context9.next = 47;\n                        break;\n                      case 46:\n                        return _context9.abrupt(\"return\", resolve(user));\n                      case 47:\n                        _context9.prev = 47;\n                        _context9.t8 = execService;\n                        _context9.t9 = discoveryService;\n                        _context9.t10 = accountProofData;\n                        _context9.next = 53;\n                        return makeConfig(discoveryService);\n                      case 53:\n                        _context9.t11 = _context9.sent;\n                        _context9.t12 = opts;\n                        _context9.t13 = {\n                          service: _context9.t9,\n                          msg: _context9.t10,\n                          config: _context9.t11,\n                          opts: _context9.t12\n                        };\n                        _context9.next = 58;\n                        return (0, _context9.t8)(_context9.t13);\n                      case 58:\n                        _response = _context9.sent;\n                        _context9.t14 = send;\n                        _context9.t15 = NAME;\n                        _context9.t16 = SET_CURRENT_USER;\n                        _context9.next = 64;\n                        return buildUser(_response);\n                      case 64:\n                        _context9.t17 = _context9.sent;\n                        (0, _context9.t14)(_context9.t15, _context9.t16, _context9.t17);\n                        _context9.next = 71;\n                        break;\n                      case 68:\n                        _context9.prev = 68;\n                        _context9.t18 = _context9[\"catch\"](47);\n                        console.error(\"Error while authenticating\", _context9.t18);\n                      case 71:\n                        _context9.prev = 71;\n                        _context9.t19 = resolve;\n                        _context9.next = 75;\n                        return snapshot();\n                      case 75:\n                        _context9.t20 = _context9.sent;\n                        (0, _context9.t19)(_context9.t20);\n                        return _context9.finish(71);\n                      case 78:\n                      case \"end\":\n                        return _context9.stop();\n                    }\n                  }\n                }, _callee9, null, [[9, 15], [21, 34, 37, 44], [47, 68, 71, 78]]);\n              }));\n              return function (_x14, _x15) {\n                return _ref12.apply(this, arguments);\n              };\n            }()));\n          case 5:\n          case \"end\":\n            return _context10.stop();\n        }\n      }\n    }, _callee10);\n  }));\n  return _authenticate.apply(this, arguments);\n}\nfunction unauthenticate$1() {\n  spawnCurrentUser();\n  send(NAME, DEL_CURRENT_USER);\n}\nvar normalizePreAuthzResponse = function normalizePreAuthzResponse(authz) {\n  return {\n    f_type: \"PreAuthzResponse\",\n    f_vsn: \"1.0.0\",\n    proposer: (authz || {}).proposer,\n    payer: (authz || {}).payer || [],\n    authorization: (authz || {}).authorization || []\n  };\n};\nfunction resolvePreAuthz(authz) {\n  var resp = normalizePreAuthzResponse(authz);\n  var axs = [];\n  if (resp.proposer != null) axs.push([\"PROPOSER\", resp.proposer]);\n  var _iterator = _createForOfIteratorHelper(resp.payer || []),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var az = _step.value;\n      axs.push([\"PAYER\", az]);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  var _iterator2 = _createForOfIteratorHelper(resp.authorization || []),\n    _step2;\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var _az = _step2.value;\n      axs.push([\"AUTHORIZER\", _az]);\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n  var result = axs.map(function (_ref8) {\n    var _ref9 = _slicedToArray(_ref8, 2),\n      role = _ref9[0],\n      az = _ref9[1];\n    return {\n      tempId: [az.identity.address, az.identity.keyId].join(\"|\"),\n      addr: az.identity.address,\n      keyId: az.identity.keyId,\n      signingFunction: function signingFunction(signable) {\n        return execService({\n          service: az,\n          msg: signable\n        });\n      },\n      role: {\n        proposer: role === \"PROPOSER\",\n        payer: role === \"PAYER\",\n        authorizer: role === \"AUTHORIZER\"\n      }\n    };\n  });\n  return result;\n}\nfunction authorization(_x11) {\n  return _authorization.apply(this, arguments);\n}\nfunction _authorization() {\n  _authorization = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee13(account) {\n    return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n      while (1) {\n        switch (_context13.prev = _context13.next) {\n          case 0:\n            spawnCurrentUser();\n            return _context13.abrupt(\"return\", _objectSpread(_objectSpread({}, account), {}, {\n              tempId: \"CURRENT_USER\",\n              resolve: function resolve(account, preSignable) {\n                return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12() {\n                  var user, authz, preAuthz, windowRef;\n                  return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n                    while (1) {\n                      switch (_context12.prev = _context12.next) {\n                        case 0:\n                          _context12.next = 2;\n                          return authenticate$1({\n                            redir: true\n                          });\n                        case 2:\n                          user = _context12.sent;\n                          authz = serviceOfType(user.services, \"authz\");\n                          preAuthz = serviceOfType(user.services, \"pre-authz\");\n                          if (!preAuthz) {\n                            _context12.next = 11;\n                            break;\n                          }\n                          _context12.t0 = resolvePreAuthz;\n                          _context12.next = 9;\n                          return execService({\n                            service: preAuthz,\n                            msg: preSignable\n                          });\n                        case 9:\n                          _context12.t1 = _context12.sent;\n                          return _context12.abrupt(\"return\", (0, _context12.t0)(_context12.t1));\n                        case 11:\n                          if (!authz) {\n                            _context12.next = 14;\n                            break;\n                          }\n                          if (isMobile() && authz.method === \"WC/RPC\") {\n                            windowRef = window.open(\"\", \"_blank\");\n                          }\n                          return _context12.abrupt(\"return\", _objectSpread(_objectSpread({}, account), {}, {\n                            tempId: \"CURRENT_USER\",\n                            resolve: null,\n                            addr: sansPrefix(authz.identity.address),\n                            keyId: authz.identity.keyId,\n                            sequenceNum: null,\n                            signature: null,\n                            signingFunction: function signingFunction(signable) {\n                              return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11() {\n                                return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n                                  while (1) {\n                                    switch (_context11.prev = _context11.next) {\n                                      case 0:\n                                        _context11.t0 = normalizeCompositeSignature;\n                                        _context11.next = 3;\n                                        return execService({\n                                          service: authz,\n                                          msg: signable,\n                                          opts: {\n                                            includeOlderJsonRpcCall: true,\n                                            windowRef: windowRef\n                                          }\n                                        });\n                                      case 3:\n                                        _context11.t1 = _context11.sent;\n                                        return _context11.abrupt(\"return\", (0, _context11.t0)(_context11.t1));\n                                      case 5:\n                                      case \"end\":\n                                        return _context11.stop();\n                                    }\n                                  }\n                                }, _callee11);\n                              }))();\n                            }\n                          }));\n                        case 14:\n                          throw new Error(\"No Authz or PreAuthz Service configured for CURRENT_USER\");\n                        case 15:\n                        case \"end\":\n                          return _context12.stop();\n                      }\n                    }\n                  }, _callee12);\n                }))();\n              }\n            }));\n          case 2:\n          case \"end\":\n            return _context13.stop();\n        }\n      }\n    }, _callee13);\n  }));\n  return _authorization.apply(this, arguments);\n}\nfunction subscribe(callback) {\n  spawnCurrentUser();\n  var EXIT = \"@EXIT\";\n  var self = spawn( /*#__PURE__*/function () {\n    var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(ctx) {\n      var letter;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              ctx.send(NAME, SUBSCRIBE);\n            case 1:\n              _context7.next = 4;\n              return ctx.receive();\n            case 4:\n              letter = _context7.sent;\n              if (!(letter.tag === EXIT)) {\n                _context7.next = 8;\n                break;\n              }\n              ctx.send(NAME, UNSUBSCRIBE);\n              return _context7.abrupt(\"return\");\n            case 8:\n              callback(letter.data);\n              _context7.next = 1;\n              break;\n            case 11:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n    return function (_x12) {\n      return _ref10.apply(this, arguments);\n    };\n  }());\n  return function () {\n    return send(self, EXIT);\n  };\n}\nfunction snapshot() {\n  spawnCurrentUser();\n  return send(NAME, SNAPSHOT, null, {\n    expectReply: true,\n    timeout: 0\n  });\n}\nfunction resolveArgument() {\n  return _resolveArgument.apply(this, arguments);\n}\nfunction _resolveArgument() {\n  _resolveArgument = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee15() {\n    var _yield$authenticate, addr;\n    return _regeneratorRuntime.wrap(function _callee15$(_context15) {\n      while (1) {\n        switch (_context15.prev = _context15.next) {\n          case 0:\n            _context15.next = 2;\n            return authenticate$1();\n          case 2:\n            _yield$authenticate = _context15.sent;\n            addr = _yield$authenticate.addr;\n            return _context15.abrupt(\"return\", arg(withPrefix(addr), t$1.Address));\n          case 5:\n          case \"end\":\n            return _context15.stop();\n        }\n      }\n    }, _callee15);\n  }));\n  return _resolveArgument.apply(this, arguments);\n}\nvar makeSignable = function makeSignable(msg) {\n  invariant(/^[0-9a-f]+$/i.test(msg), \"Message must be a hex string\");\n  return {\n    message: msg\n  };\n};\nfunction signUserMessage(_x13) {\n  return _signUserMessage.apply(this, arguments);\n}\nfunction _signUserMessage() {\n  _signUserMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee16(msg) {\n    var user, signingService, response;\n    return _regeneratorRuntime.wrap(function _callee16$(_context16) {\n      while (1) {\n        switch (_context16.prev = _context16.next) {\n          case 0:\n            spawnCurrentUser();\n            _context16.next = 3;\n            return authenticate$1({\n              redir: true\n            });\n          case 3:\n            user = _context16.sent;\n            signingService = serviceOfType(user.services, \"user-signature\");\n            invariant(signingService, \"Current user must have authorized a signing service.\");\n            _context16.prev = 6;\n            _context16.next = 9;\n            return execService({\n              service: signingService,\n              msg: makeSignable(msg)\n            });\n          case 9:\n            response = _context16.sent;\n            if (!Array.isArray(response)) {\n              _context16.next = 14;\n              break;\n            }\n            return _context16.abrupt(\"return\", response.map(function (compSigs) {\n              return normalizeCompositeSignature(compSigs);\n            }));\n          case 14:\n            return _context16.abrupt(\"return\", [normalizeCompositeSignature(response)]);\n          case 15:\n            _context16.next = 20;\n            break;\n          case 17:\n            _context16.prev = 17;\n            _context16.t0 = _context16[\"catch\"](6);\n            return _context16.abrupt(\"return\", _context16.t0);\n          case 20:\n          case \"end\":\n            return _context16.stop();\n        }\n      }\n    }, _callee16, null, [[6, 17]]);\n  }));\n  return _signUserMessage.apply(this, arguments);\n}\nvar currentUser = function currentUser() {\n  return {\n    authenticate: authenticate$1,\n    unauthenticate: unauthenticate$1,\n    authorization: authorization,\n    signUserMessage: signUserMessage,\n    subscribe: subscribe,\n    snapshot: snapshot,\n    resolveArgument: resolveArgument\n  };\n};\ncurrentUser.authenticate = authenticate$1;\ncurrentUser.unauthenticate = unauthenticate$1;\ncurrentUser.authorization = authorization;\ncurrentUser.signUserMessage = signUserMessage;\ncurrentUser.subscribe = subscribe;\ncurrentUser.snapshot = snapshot;\ncurrentUser.resolveArgument = resolveArgument;\n\n/** As the current user Mutate the Flow Blockchain\n *\n *  @arg {Object} opts - Mutation Options and configuration\n *  @arg {string} opts.cadence - Cadence Transaction used to mutate Flow\n *  @arg {ArgsFn} opts.args - Arguments passed to cadence transaction\n *  @arg {Object} opts.template - Interaction Template for a transaction\n *  @arg {number} opts.limit - Compute Limit for transaction\n *  @returns {string} Transaction Id\n *\n *  Where:\n *    @callback ArgsFn\n *    @arg {ArgFn}  arg - Argument function to define a single argument\n *    @arg {Object} t   - Cadence Types object used to define the type\n *    @returns {args[]}\n *\n *    @callback ArgFn\n *    @arg {Any}  value - the value of the argument\n *    @arg {Type} type  - the cadence type of the value\n *    @returns {arg}\n *\n *  Example:\n *    fcl.mutate({\n *      cadence: `\n *        transaction(a: Int, b: Int, c: Address) {\n *          prepare(acct: AuthAccount) {\n *            log(acct)\n *            log(a)\n *            log(b)\n *            log(c)\n *          }\n *        }\n *      `,\n *      args: (arg, t) => [\n *        arg(6, t.Int),\n *        arg(7, t.Int),\n *        arg(\"0xba1132bc08f82fe2\", t.Address),\n *      ],\n *    })\n *\n *\n *  Options:\n *    type Options = {\n *      template: InteractionTemplate | String // InteractionTemplate or url to one\n *      cadence: String!,\n *      args: (arg, t) => Array<Arg>,\n *      limit: Number,\n *      authz: AuthzFn, // will overload the trinity of signatory roles\n *      proposer: AuthzFn, // will overload the proposer signatory role\n *      payer: AuthzFn, // will overload the payer signatory role\n *      authorizations: [AuthzFn], // an array of authorization functions used as authorizations signatory roles\n *    }\n */\n\nfunction mutate() {\n  return _mutate.apply(this, arguments);\n}\nfunction _mutate() {\n  _mutate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var opts,\n      txid,\n      authz,\n      _args2 = arguments;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            opts = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : {};\n            _context2.prev = 1;\n            _context2.next = 4;\n            return preMutate(opts);\n          case 4:\n            _context2.next = 6;\n            return prepTemplateOpts(opts);\n          case 6:\n            opts = _context2.sent;\n            _context2.next = 9;\n            return sdk.config().get(\"fcl.authz\", currentUser().authorization);\n          case 9:\n            authz = _context2.sent;\n            txid = sdk.config().overload(opts.dependencies || {}, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n              return _regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      return _context.abrupt(\"return\",\n                      // prettier-ignore\n                      sdk.send([sdk.transaction(opts.cadence), sdk.args(normalizeArgs(opts.args || [])), opts.limit && isNumber(opts.limit) && sdk.limit(opts.limit),\n                      // opts.proposer > opts.authz > authz\n                      sdk.proposer(opts.proposer || opts.authz || authz),\n                      // opts.payer > opts.authz > authz\n                      sdk.payer(opts.payer || opts.authz || authz),\n                      // opts.authorizations > [opts.authz > authz]\n                      sdk.authorizations(opts.authorizations || [opts.authz || authz])]).then(sdk.decode));\n                    case 1:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee);\n            })));\n            return _context2.abrupt(\"return\", txid);\n          case 14:\n            _context2.prev = 14;\n            _context2.t0 = _context2[\"catch\"](1);\n            throw _context2.t0;\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[1, 14]]);\n  }));\n  return _mutate.apply(this, arguments);\n}\nvar onMessageFromFCL = function onMessageFromFCL(messageType) {\n  var cb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n  var buildData = function buildData(data) {\n    var _data$body;\n    if (data.deprecated) console.warn(\"DEPRECATION NOTICE\", data.deprecated.message);\n    data === null || data === void 0 ? true : (_data$body = data.body) === null || _data$body === void 0 ? true : delete _data$body.interaction;\n    return data;\n  };\n  var internal = function internal(e) {\n    var data = e.data;\n    if (_typeof(data) !== \"object\") return;\n    if (_typeof(data) == null) return;\n    if (data.type !== messageType) return;\n    cb(buildData(data));\n  };\n  window.addEventListener(\"message\", internal);\n  return function () {\n    return window.removeEventListener(\"message\", internal);\n  };\n};\nvar sendMsgToFCL = function sendMsgToFCL(type) {\n  var msg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (window.location !== window.parent.location) {\n    window.parent.postMessage(_objectSpread(_objectSpread({}, msg), {}, {\n      type: type\n    }), \"*\");\n  } else if (window.opener) {\n    window.opener.postMessage(_objectSpread(_objectSpread({}, msg), {}, {\n      type: type\n    }), \"*\");\n  } else {\n    throw new Error(\"Unable to communicate with parent FCL instance\");\n  }\n};\nvar ready = function ready(cb) {\n  onMessageFromFCL(\"FCL:VIEW:READY:RESPONSE\", cb);\n  sendMsgToFCL(\"FCL:VIEW:READY\");\n};\nvar close = function close() {\n  sendMsgToFCL(\"FCL:VIEW:CLOSE\");\n};\nvar approve = function approve(data) {\n  sendMsgToFCL(\"FCL:VIEW:RESPONSE\", {\n    f_type: \"PollingResponse\",\n    f_vsn: \"1.0.0\",\n    status: \"APPROVED\",\n    reason: null,\n    data: data\n  });\n};\nvar decline = function decline(reason) {\n  sendMsgToFCL(\"FCL:VIEW:RESPONSE\", {\n    f_type: \"PollingResponse\",\n    f_vsn: \"1.0.0\",\n    status: \"DECLINED\",\n    reason: reason,\n    data: null\n  });\n};\nvar redirect = function redirect(data) {\n  sendMsgToFCL(\"FCL:VIEW:RESPONSE\", {\n    f_type: \"PollingResponse\",\n    f_vsn: \"1.0.0\",\n    status: \"REDIRECT\",\n    reason: null,\n    data: data\n  });\n};\nfunction CompositeSignature(addr, keyId, signature) {\n  this.f_type = COMPOSITE_SIGNATURE_PRAGMA.f_type;\n  this.f_vsn = COMPOSITE_SIGNATURE_PRAGMA.f_vsn;\n  this.addr = withPrefix(addr);\n  this.keyId = Number(keyId);\n  this.signature = signature;\n}\nvar rightPaddedHexBuffer = function rightPaddedHexBuffer(value, pad) {\n  return Buffer.from(value.padEnd(pad * 2, \"0\"), \"hex\");\n};\nvar leftPaddedHexBuffer = function leftPaddedHexBuffer(value, pad) {\n  return Buffer.from(value.padStart(pad * 2, \"0\"), \"hex\");\n};\nvar addressBuffer = function addressBuffer(addr) {\n  return leftPaddedHexBuffer(addr, 8);\n};\nvar nonceBuffer = function nonceBuffer(nonce) {\n  return Buffer.from(nonce, \"hex\");\n};\nvar encodeAccountProof = function encodeAccountProof(_ref) {\n  var address = _ref.address,\n    nonce = _ref.nonce,\n    appIdentifier = _ref.appIdentifier;\n  var includeDomainTag = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  invariant(address, \"Encode Message For Provable Authn Error: address must be defined\");\n  invariant(nonce, \"Encode Message For Provable Authn Error: nonce must be defined\");\n  invariant(appIdentifier, \"Encode Message For Provable Authn Error: appIdentifier must be defined\");\n  invariant(nonce.length >= 64, \"Encode Message For Provable Authn Error: nonce must be minimum of 32 bytes\");\n  var ACCOUNT_PROOF_DOMAIN_TAG = rightPaddedHexBuffer(Buffer.from(\"FCL-ACCOUNT-PROOF-V0.0\").toString(\"hex\"), 32);\n  if (includeDomainTag) {\n    return Buffer.concat([ACCOUNT_PROOF_DOMAIN_TAG, encode([appIdentifier, addressBuffer(sansPrefix(address)), nonceBuffer(nonce)])]).toString(\"hex\");\n  }\n  return encode([appIdentifier, addressBuffer(sansPrefix(address)), nonceBuffer(nonce)]).toString(\"hex\");\n};\nfunction injectExtService(service) {\n  if (service.type === \"authn\" && service.endpoint != null) {\n    if (!Array.isArray(window.fcl_extensions)) {\n      window.fcl_extensions = [];\n    }\n    window.fcl_extensions.push(service);\n  } else {\n    console.warn(\"Authn service is required\");\n  }\n}\nvar index$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  sendMsgToFCL: sendMsgToFCL,\n  ready: ready,\n  close: close,\n  approve: approve,\n  decline: decline,\n  redirect: redirect,\n  onMessageFromFCL: onMessageFromFCL,\n  encodeMessageFromSignable: encodeMessageFromSignable,\n  CompositeSignature: CompositeSignature,\n  encodeAccountProof: encodeAccountProof,\n  injectExtService: injectExtService\n});\nvar ACCOUNT_PROOF = \"ACCOUNT_PROOF\";\nvar USER_SIGNATURE = \"USER_SIGNATURE\";\nvar validateArgs = function validateArgs(args) {\n  if (args.appIdentifier) {\n    var appIdentifier = args.appIdentifier,\n      address = args.address,\n      nonce = args.nonce,\n      signatures = args.signatures;\n    invariant(isString(appIdentifier), \"verifyAccountProof({ appIdentifier }) -- appIdentifier must be a string\");\n    invariant(isString(address) && sansPrefix(address).length === 16, \"verifyAccountProof({ address }) -- address must be a valid address\");\n    invariant(/^[0-9a-f]+$/i.test(nonce), \"nonce must be a hex string\");\n    invariant(Array.isArray(signatures) && signatures.every(function (sig, i, arr) {\n      return sig.f_type === \"CompositeSignature\";\n    }), \"Must include an Array of CompositeSignatures to verify\");\n    invariant(signatures.map(function (cs) {\n      return cs.addr;\n    }).every(function (addr, i, arr) {\n      return addr === arr[0];\n    }), \"User signatures to be verified must be from a single account address\");\n    return true;\n  } else {\n    var message = args.message,\n      _address = args.address,\n      compSigs = args.compSigs;\n    invariant(/^[0-9a-f]+$/i.test(message), \"Signed message must be a hex string\");\n    invariant(isString(_address) && sansPrefix(_address).length === 16, \"verifyUserSignatures({ address }) -- address must be a valid address\");\n    invariant(Array.isArray(compSigs) && compSigs.every(function (sig, i, arr) {\n      return sig.f_type === \"CompositeSignature\";\n    }), \"Must include an Array of CompositeSignatures to verify\");\n    invariant(compSigs.map(function (cs) {\n      return cs.addr;\n    }).every(function (addr, i, arr) {\n      return addr === arr[0];\n    }), \"User signatures to be verified must be from a single account address\");\n    return true;\n  }\n};\nvar getVerifySignaturesScript = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(sig, opts) {\n    var verifyFunction, network, fclCryptoContract;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            verifyFunction = sig === \"ACCOUNT_PROOF\" ? \"verifyAccountProofSignatures\" : \"verifyUserSignatures\";\n            _context.next = 3;\n            return config.get(\"flow.network\");\n          case 3:\n            network = _context.sent;\n            if (network) {\n              _context.next = 9;\n              break;\n            }\n            _context.next = 7;\n            return config.get(\"env\");\n          case 7:\n            network = _context.sent;\n            if (network) log.deprecate({\n              pkg: \"FCL\",\n              subject: 'Using the \"env\" configuration key for specifying the flow network',\n              message: 'Please use \"flow.network\" instead.',\n              transition: \"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/TRANSITIONS.md#0001-deprecate-env-config-key\"\n            });\n          case 9:\n            invariant(opts.fclCryptoContract || network === \"testnet\" || network === \"mainnet\", \"${verifyFunction}({ fclCryptoContract }) -- config.flow.network must be specified (testnet || mainnet) or contract address provided via opts.fclCryptoContract\");\n            if (opts.fclCryptoContract) {\n              fclCryptoContract = opts.fclCryptoContract;\n            } else {\n              fclCryptoContract = network === \"testnet\" ? \"0x74daa6f9c7ef24b1\" : \"0xb4b82a1c9d21d284\";\n            }\n            return _context.abrupt(\"return\", \"\\n      import FCLCrypto from \".concat(fclCryptoContract, \"\\n\\n      pub fun main(\\n          address: Address, \\n          message: String, \\n          keyIndices: [Int], \\n          signatures: [String]\\n      ): Bool {\\n        return FCLCrypto.\").concat(verifyFunction, \"(address: address, message: message, keyIndices: keyIndices, signatures: signatures)\\n      }\\n    \"));\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return function getVerifySignaturesScript(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n/**\n * Verify a valid account proof signature or signatures for an account on Flow.\n *\n * @param {string} appIdentifier - A message string in hexadecimal format\n * @param {Object} accountProofData - An object consisting of address, nonce, and signatures\n * @param {string} accountProofData.address - A Flow account address\n * @param {string} accountProofData.nonce - A random string in hexadecimal format (minimum 32 bytes in total, i.e 64 hex characters)\n * @param {Object[]} accountProofData.signatures - An array of composite signatures to verify\n * @param {Object} [opts={}] - Options object\n * @param {string} opts.fclCryptoContract - An optional override Flow account address where the FCLCrypto contract is deployed\n * @return {bool}\n *\n * @example\n *\n *  const accountProofData = {\n *   address: \"0x123\",\n *   nonce: \"F0123\"\n *   signatures: [{f_type: \"CompositeSignature\", f_vsn: \"1.0.0\", addr: \"0x123\", keyId: 0, signature: \"abc123\"}],\n *  }\n *\n *  const isValid = await fcl.AppUtils.verifyAccountProof(\n *    \"AwesomeAppId\",\n *    accountProofData,\n *    {fclCryptoContract}\n *  )\n */\n\nfunction verifyAccountProof(_x3, _x4) {\n  return _verifyAccountProof.apply(this, arguments);\n}\n/**\n * Verify a valid signature/s for an account on Flow.\n *\n * @param {string} msg - A message string in hexadecimal format\n * @param {Array} compSigs - An array of Composite Signatures\n * @param {string} compSigs[].addr - The account address\n * @param {number} compSigs[].keyId - The account keyId\n * @param {string} compSigs[].signature - The signature to verify\n * @param {Object} [opts={}] - Options object\n * @param {string} opts.fclCryptoContract - An optional override of Flow account address where the FCLCrypto contract is deployed\n * @return {bool}\n *\n * @example\n *\n *  const isValid = await fcl.AppUtils.verifyUserSignatures(\n *    Buffer.from('FOO').toString(\"hex\"),\n *    [{f_type: \"CompositeSignature\", f_vsn: \"1.0.0\", addr: \"0x123\", keyId: 0, signature: \"abc123\"}],\n *    {fclCryptoContract}\n *  )\n */\n\nfunction _verifyAccountProof() {\n  _verifyAccountProof = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(appIdentifier, _ref2) {\n    var address,\n      nonce,\n      signatures,\n      opts,\n      message,\n      signaturesArr,\n      keyIndices,\n      _iterator,\n      _step,\n      el,\n      _args2 = arguments;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            address = _ref2.address, nonce = _ref2.nonce, signatures = _ref2.signatures;\n            opts = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : {};\n            validateArgs({\n              appIdentifier: appIdentifier,\n              address: address,\n              nonce: nonce,\n              signatures: signatures\n            });\n            message = encodeAccountProof({\n              address: address,\n              nonce: nonce,\n              appIdentifier: appIdentifier\n            }, false);\n            signaturesArr = [];\n            keyIndices = [];\n            _iterator = _createForOfIteratorHelper(signatures);\n            try {\n              for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                el = _step.value;\n                signaturesArr.push(el.signature);\n                keyIndices.push(el.keyId.toString());\n              }\n            } catch (err) {\n              _iterator.e(err);\n            } finally {\n              _iterator.f();\n            }\n            _context2.t0 = query;\n            _context2.next = 11;\n            return getVerifySignaturesScript(ACCOUNT_PROOF, opts);\n          case 11:\n            _context2.t1 = _context2.sent;\n            _context2.t2 = function args(arg, t) {\n              return [arg(withPrefix(address), t.Address), arg(message, t.String), arg(keyIndices, t.Array(t.Int)), arg(signaturesArr, t.Array(t.String))];\n            };\n            _context2.t3 = {\n              cadence: _context2.t1,\n              args: _context2.t2\n            };\n            return _context2.abrupt(\"return\", (0, _context2.t0)(_context2.t3));\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _verifyAccountProof.apply(this, arguments);\n}\nfunction verifyUserSignatures$1(_x5, _x6) {\n  return _verifyUserSignatures.apply(this, arguments);\n}\nfunction _verifyUserSignatures() {\n  _verifyUserSignatures = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(message, compSigs) {\n    var opts,\n      address,\n      signaturesArr,\n      keyIndices,\n      _iterator2,\n      _step2,\n      el,\n      _args3 = arguments;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            opts = _args3.length > 2 && _args3[2] !== undefined ? _args3[2] : {};\n            address = withPrefix(compSigs[0].addr);\n            validateArgs({\n              message: message,\n              address: address,\n              compSigs: compSigs\n            });\n            signaturesArr = [];\n            keyIndices = [];\n            _iterator2 = _createForOfIteratorHelper(compSigs);\n            try {\n              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                el = _step2.value;\n                signaturesArr.push(el.signature);\n                keyIndices.push(el.keyId.toString());\n              }\n            } catch (err) {\n              _iterator2.e(err);\n            } finally {\n              _iterator2.f();\n            }\n            _context3.t0 = query;\n            _context3.next = 10;\n            return getVerifySignaturesScript(USER_SIGNATURE, opts);\n          case 10:\n            _context3.t1 = _context3.sent;\n            _context3.t2 = function args(arg, t) {\n              return [arg(address, t.Address), arg(message, t.String), arg(keyIndices, t.Array(t.Int)), arg(signaturesArr, t.Array(t.String))];\n            };\n            _context3.t3 = {\n              cadence: _context3.t1,\n              args: _context3.t2\n            };\n            return _context3.abrupt(\"return\", (0, _context3.t0)(_context3.t3));\n          case 14:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _verifyUserSignatures.apply(this, arguments);\n}\nvar index$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  verifyAccountProof: verifyAccountProof,\n  verifyUserSignatures: verifyUserSignatures$1\n});\n\n/**\n * Verify a valid signature/s for an account on Flow.\n *\n * @deprecated since version '1.0.0-alpha.0', use AppUtils.verifyUserSignatures instead\n *\n */\n\nvar verifyUserSignatures = log.deprecate({\n  pkg: \"FCL\",\n  subject: \"fcl.verifyUserSignatures()\",\n  message: \"Please use fcl.AppUtils.verifyUserSignatures()\",\n  callback: function verifyUserSignatures(message, compSigs) {\n    return verifyUserSignatures$1(message, compSigs);\n  }\n});\nvar serialize = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var args,\n      opts,\n      resolveFunction,\n      _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            args = _args.length > 0 && _args[0] !== undefined ? _args[0] : [];\n            opts = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            _context.next = 4;\n            return config$1.first([\"sdk.resolve\"], opts.resolve || resolve);\n          case 4:\n            resolveFunction = _context.sent;\n            if (!Array.isArray(args)) {\n              _context.next = 9;\n              break;\n            }\n            _context.next = 8;\n            return pipe(interaction(), args);\n          case 8:\n            args = _context.sent;\n          case 9:\n            _context.t0 = JSON;\n            _context.t1 = createSignableVoucher;\n            _context.next = 13;\n            return resolveFunction(args);\n          case 13:\n            _context.t2 = _context.sent;\n            _context.t3 = (0, _context.t1)(_context.t2);\n            return _context.abrupt(\"return\", _context.t0.stringify.call(_context.t0, _context.t3, null, 2));\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return function serialize() {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar _HANDLERS$1;\nvar RATE$1 = 2500;\nvar POLL = \"POLL\";\nvar fetchTxStatus = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(transactionId) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", send$1([getTransactionStatus(transactionId)]).then(decode));\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return function fetchTxStatus(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar isExpired = function isExpired(tx) {\n  return tx.status === 5;\n};\nvar isSealed = function isSealed(tx) {\n  return tx.status >= 4;\n};\nvar isExecuted = function isExecuted(tx) {\n  return tx.status >= 3;\n};\nvar isFinalized = function isFinalized(tx) {\n  return tx.status >= 2;\n};\nvar isPending = function isPending(tx) {\n  return tx.status >= 1;\n};\nvar isUnknown = function isUnknown(tx) {\n  return tx.status >= 0;\n};\nvar isDiff = function isDiff(cur, next) {\n  return JSON.stringify(cur) !== JSON.stringify(next);\n};\nvar HANDLERS$1 = (_HANDLERS$1 = {}, _defineProperty(_HANDLERS$1, INIT, function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(ctx) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            ctx.sendSelf(POLL);\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return function (_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}()), _defineProperty(_HANDLERS$1, SUBSCRIBE, function (ctx, letter) {\n  ctx.subscribe(letter.from);\n  ctx.send(letter.from, UPDATED$2, ctx.all());\n}), _defineProperty(_HANDLERS$1, UNSUBSCRIBE, function (ctx, letter) {\n  ctx.unsubscribe(letter.from);\n}), _defineProperty(_HANDLERS$1, SNAPSHOT$1, function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(ctx, letter) {\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            letter.reply(ctx.all());\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return function (_x3, _x4) {\n    return _ref3.apply(this, arguments);\n  };\n}()), _defineProperty(_HANDLERS$1, POLL, function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(ctx) {\n    var tx;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            _context4.next = 3;\n            return fetchTxStatus(ctx.self());\n          case 3:\n            tx = _context4.sent;\n            _context4.next = 9;\n            break;\n          case 6:\n            _context4.prev = 6;\n            _context4.t0 = _context4[\"catch\"](0);\n            return _context4.abrupt(\"return\", ctx.fatalError(_context4.t0));\n          case 9:\n            if (!isSealed(tx)) setTimeout(function () {\n              return ctx.sendSelf(POLL);\n            }, RATE$1);\n            if (isDiff(ctx.all(), tx)) ctx.broadcast(UPDATED$2, tx);\n            ctx.merge(tx);\n          case 12:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, null, [[0, 6]]);\n  }));\n  return function (_x5) {\n    return _ref4.apply(this, arguments);\n  };\n}()), _HANDLERS$1);\nvar scoped = function scoped(transactionId) {\n  if (_typeof(transactionId) === \"object\") transactionId = transactionId.transactionId;\n  if (transactionId == null) throw new Error(\"transactionId required\");\n  return transactionId;\n};\nvar spawnTransaction = function spawnTransaction(transactionId) {\n  return spawn(HANDLERS$1, scoped(transactionId));\n};\nfunction transaction(transactionId) {\n  function snapshot() {\n    return snapshoter(transactionId, spawnTransaction);\n  }\n  function subscribe(callback) {\n    return subscriber(scoped(transactionId), spawnTransaction, callback);\n  }\n  function once(predicate) {\n    return function innerOnce() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var suppress = opts.suppress || false;\n      return new Promise(function (resolve, reject) {\n        var unsub = subscribe(function (txStatus, error) {\n          if ((error || txStatus.statusCode) && !suppress) {\n            reject(error || txStatus.errorMessage);\n            unsub();\n          } else if (predicate(txStatus)) {\n            resolve(txStatus);\n            unsub();\n          }\n        });\n      });\n    };\n  }\n  return {\n    snapshot: snapshot,\n    subscribe: subscribe,\n    onceFinalized: once(isFinalized),\n    onceExecuted: once(isExecuted),\n    onceSealed: once(isSealed)\n  };\n}\ntransaction.isUnknown = isUnknown;\ntransaction.isPending = isPending;\ntransaction.isFinalized = isFinalized;\ntransaction.isExecuted = isExecuted;\ntransaction.isSealed = isSealed;\ntransaction.isExpired = isExpired;\nvar _HANDLERS;\nvar RATE = 10000;\nvar UPDATED = \"UPDATED\";\nvar TICK = \"TICK\";\nvar HIGH_WATER_MARK = \"hwm\";\nvar scheduleTick = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.t0 = setTimeout;\n            _context.t1 = function () {\n              return ctx.sendSelf(TICK);\n            };\n            _context.next = 4;\n            return config$1().get(\"fcl.eventPollRate\", RATE);\n          case 4:\n            _context.t2 = _context.sent;\n            return _context.abrupt(\"return\", (0, _context.t0)(_context.t1, _context.t2));\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return function scheduleTick(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar HANDLERS = (_HANDLERS = {}, _defineProperty(_HANDLERS, TICK, function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(ctx) {\n    var hwm, next, data, _iterator, _step, d;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (ctx.hasSubs()) {\n              _context2.next = 2;\n              break;\n            }\n            return _context2.abrupt(\"return\");\n          case 2:\n            hwm = ctx.get(HIGH_WATER_MARK);\n            if (!(hwm == null)) {\n              _context2.next = 18;\n              break;\n            }\n            _context2.t0 = ctx;\n            _context2.t1 = HIGH_WATER_MARK;\n            _context2.next = 8;\n            return block();\n          case 8:\n            _context2.t2 = _context2.sent;\n            _context2.t0.put.call(_context2.t0, _context2.t1, _context2.t2);\n            _context2.t3 = ctx;\n            _context2.t4 = TICK;\n            _context2.next = 14;\n            return scheduleTick(ctx);\n          case 14:\n            _context2.t5 = _context2.sent;\n            _context2.t3.put.call(_context2.t3, _context2.t4, _context2.t5);\n            _context2.next = 34;\n            break;\n          case 18:\n            _context2.next = 20;\n            return block();\n          case 20:\n            next = _context2.sent;\n            ctx.put(HIGH_WATER_MARK, next);\n            if (!(hwm.height < next.height)) {\n              _context2.next = 28;\n              break;\n            }\n            _context2.next = 25;\n            return send$1([getEventsAtBlockHeightRange(ctx.self(), hwm.height + 1, next.height)]).then(decode);\n          case 25:\n            data = _context2.sent;\n            _iterator = _createForOfIteratorHelper(data);\n            try {\n              for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                d = _step.value;\n                ctx.broadcast(UPDATED, d.data);\n              }\n            } catch (err) {\n              _iterator.e(err);\n            } finally {\n              _iterator.f();\n            }\n          case 28:\n            _context2.t6 = ctx;\n            _context2.t7 = TICK;\n            _context2.next = 32;\n            return scheduleTick(ctx);\n          case 32:\n            _context2.t8 = _context2.sent;\n            _context2.t6.put.call(_context2.t6, _context2.t7, _context2.t8);\n          case 34:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return function (_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}()), _defineProperty(_HANDLERS, SUBSCRIBE, function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(ctx, letter) {\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            if (ctx.hasSubs()) {\n              _context3.next = 7;\n              break;\n            }\n            _context3.t0 = ctx;\n            _context3.t1 = TICK;\n            _context3.next = 5;\n            return scheduleTick(ctx);\n          case 5:\n            _context3.t2 = _context3.sent;\n            _context3.t0.put.call(_context3.t0, _context3.t1, _context3.t2);\n          case 7:\n            ctx.subscribe(letter.from);\n          case 8:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return function (_x3, _x4) {\n    return _ref3.apply(this, arguments);\n  };\n}()), _defineProperty(_HANDLERS, UNSUBSCRIBE, function (ctx, letter) {\n  ctx.unsubscribe(letter.from);\n  if (!ctx.hasSubs()) {\n    clearTimeout(ctx.get(TICK));\n    ctx[\"delete\"](TICK);\n    ctx[\"delete\"](HIGH_WATER_MARK);\n  }\n}), _HANDLERS);\nvar spawnEvents = function spawnEvents(key) {\n  return spawn(HANDLERS, key);\n};\nfunction events(key) {\n  return {\n    subscribe: function subscribe(callback) {\n      return subscriber(key, spawnEvents, callback);\n    }\n  };\n}\nvar sha3 = {};\nvar sponge = {};\nvar permute = {};\nvar chi = {};\nvar copy = function copy(I, i) {\n  return function (O, o) {\n    var oi = o * 2;\n    var ii = i * 2;\n    O[oi] = I[ii];\n    O[oi + 1] = I[ii + 1];\n  };\n};\nvar copy_1 = copy;\n(function (exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports[\"default\"] = void 0;\n  var _copy = _interopRequireDefault(copy_1);\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      \"default\": obj\n    };\n  }\n  var chi = function chi(_ref) {\n    var A = _ref.A,\n      C = _ref.C;\n    for (var y = 0; y < 25; y += 5) {\n      for (var x = 0; x < 5; x++) {\n        (0, _copy[\"default\"])(A, y + x)(C, x);\n      }\n      for (var _x = 0; _x < 5; _x++) {\n        var xy = (y + _x) * 2;\n        var x1 = (_x + 1) % 5 * 2;\n        var x2 = (_x + 2) % 5 * 2;\n        A[xy] ^= ~C[x1] & C[x2];\n        A[xy + 1] ^= ~C[x1 + 1] & C[x2 + 1];\n      }\n    }\n  };\n  var _default = chi;\n  exports[\"default\"] = _default;\n})(chi);\nvar iota = {};\nvar roundConstants = {};\n(function (exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports[\"default\"] = void 0;\n  var ROUND_CONSTANTS = new Uint32Array([0, 1, 0, 32898, 2147483648, 32906, 2147483648, 2147516416, 0, 32907, 0, 2147483649, 2147483648, 2147516545, 2147483648, 32777, 0, 138, 0, 136, 0, 2147516425, 0, 2147483658, 0, 2147516555, 2147483648, 139, 2147483648, 32905, 2147483648, 32771, 2147483648, 32770, 2147483648, 128, 0, 32778, 2147483648, 2147483658, 2147483648, 2147516545, 2147483648, 32896, 0, 2147483649, 2147483648, 2147516424]);\n  var _default = ROUND_CONSTANTS;\n  exports[\"default\"] = _default;\n})(roundConstants);\n(function (exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports[\"default\"] = void 0;\n  var _roundConstants = _interopRequireDefault(roundConstants);\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      \"default\": obj\n    };\n  }\n  var iota = function iota(_ref) {\n    var A = _ref.A,\n      roundIndex = _ref.roundIndex;\n    var i = roundIndex * 2;\n    A[0] ^= _roundConstants[\"default\"][i];\n    A[1] ^= _roundConstants[\"default\"][i + 1];\n  };\n  var _default = iota;\n  exports[\"default\"] = _default;\n})(iota);\nvar rhoPi = {};\nvar piShuffles = {};\n(function (exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports[\"default\"] = void 0;\n  var PI_SHUFFLES = [10, 7, 11, 17, 18, 3, 5, 16, 8, 21, 24, 4, 15, 23, 19, 13, 12, 2, 20, 14, 22, 9, 6, 1];\n  var _default = PI_SHUFFLES;\n  exports[\"default\"] = _default;\n})(piShuffles);\nvar rhoOffsets = {};\n(function (exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports[\"default\"] = void 0;\n  var RHO_OFFSETS = [1, 3, 6, 10, 15, 21, 28, 36, 45, 55, 2, 14, 27, 41, 56, 8, 25, 43, 62, 18, 39, 61, 20, 44];\n  var _default = RHO_OFFSETS;\n  exports[\"default\"] = _default;\n})(rhoOffsets);\n(function (exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports[\"default\"] = void 0;\n  var _piShuffles = _interopRequireDefault(piShuffles);\n  var _rhoOffsets = _interopRequireDefault(rhoOffsets);\n  var _copy = _interopRequireDefault(copy_1);\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      \"default\": obj\n    };\n  }\n  var rhoPi = function rhoPi(_ref) {\n    var A = _ref.A,\n      C = _ref.C,\n      W = _ref.W;\n    (0, _copy[\"default\"])(A, 1)(W, 0);\n    var H = 0;\n    var L = 0;\n    var Wi = 0;\n    var ri = 32;\n    for (var i = 0; i < 24; i++) {\n      var j = _piShuffles[\"default\"][i];\n      var r = _rhoOffsets[\"default\"][i];\n      (0, _copy[\"default\"])(A, j)(C, 0);\n      H = W[0];\n      L = W[1];\n      ri = 32 - r;\n      Wi = r < 32 ? 0 : 1;\n      W[Wi] = H << r | L >>> ri;\n      W[(Wi + 1) % 2] = L << r | H >>> ri;\n      (0, _copy[\"default\"])(W, 0)(A, j);\n      (0, _copy[\"default\"])(C, 0)(W, 0);\n    }\n  };\n  var _default = rhoPi;\n  exports[\"default\"] = _default;\n})(rhoPi);\nvar theta = {};\n(function (exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports[\"default\"] = void 0;\n  var _copy = _interopRequireDefault(copy_1);\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      \"default\": obj\n    };\n  }\n  var theta = function theta(_ref) {\n    var A = _ref.A,\n      C = _ref.C,\n      D = _ref.D,\n      W = _ref.W;\n    var H = 0;\n    var L = 0;\n    for (var x = 0; x < 5; x++) {\n      var x20 = x * 2;\n      var x21 = (x + 5) * 2;\n      var x22 = (x + 10) * 2;\n      var x23 = (x + 15) * 2;\n      var x24 = (x + 20) * 2;\n      C[x20] = A[x20] ^ A[x21] ^ A[x22] ^ A[x23] ^ A[x24];\n      C[x20 + 1] = A[x20 + 1] ^ A[x21 + 1] ^ A[x22 + 1] ^ A[x23 + 1] ^ A[x24 + 1];\n    }\n    for (var _x = 0; _x < 5; _x++) {\n      (0, _copy[\"default\"])(C, (_x + 1) % 5)(W, 0);\n      H = W[0];\n      L = W[1];\n      W[0] = H << 1 | L >>> 31;\n      W[1] = L << 1 | H >>> 31;\n      D[_x * 2] = C[(_x + 4) % 5 * 2] ^ W[0];\n      D[_x * 2 + 1] = C[(_x + 4) % 5 * 2 + 1] ^ W[1];\n      for (var y = 0; y < 25; y += 5) {\n        A[(y + _x) * 2] ^= D[_x * 2];\n        A[(y + _x) * 2 + 1] ^= D[_x * 2 + 1];\n      }\n    }\n  };\n  var _default = theta;\n  exports[\"default\"] = _default;\n})(theta);\n(function (exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports[\"default\"] = void 0;\n  var _chi = _interopRequireDefault(chi);\n  var _iota = _interopRequireDefault(iota);\n  var _rhoPi = _interopRequireDefault(rhoPi);\n  var _theta = _interopRequireDefault(theta);\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      \"default\": obj\n    };\n  }\n  var permute = function permute() {\n    var C = new Uint32Array(10);\n    var D = new Uint32Array(10);\n    var W = new Uint32Array(2);\n    return function (A) {\n      for (var roundIndex = 0; roundIndex < 24; roundIndex++) {\n        (0, _theta[\"default\"])({\n          A: A,\n          C: C,\n          D: D,\n          W: W\n        });\n        (0, _rhoPi[\"default\"])({\n          A: A,\n          C: C,\n          W: W\n        });\n        (0, _chi[\"default\"])({\n          A: A,\n          C: C\n        });\n        (0, _iota[\"default\"])({\n          A: A,\n          roundIndex: roundIndex\n        });\n      }\n      C.fill(0);\n      D.fill(0);\n      W.fill(0);\n    };\n  };\n  var _default = permute;\n  exports[\"default\"] = _default;\n})(permute);\n(function (exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports[\"default\"] = void 0;\n  var _buffer = require$$0;\n  var _permute = _interopRequireDefault(permute);\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      \"default\": obj\n    };\n  }\n  var xorWords = function xorWords(I, O) {\n    for (var i = 0; i < I.length; i += 8) {\n      var o = i / 4;\n      O[o] ^= I[i + 7] << 24 | I[i + 6] << 16 | I[i + 5] << 8 | I[i + 4];\n      O[o + 1] ^= I[i + 3] << 24 | I[i + 2] << 16 | I[i + 1] << 8 | I[i];\n    }\n    return O;\n  };\n  var readWords = function readWords(I, O) {\n    for (var o = 0; o < O.length; o += 8) {\n      var i = o / 4;\n      O[o] = I[i + 1];\n      O[o + 1] = I[i + 1] >>> 8;\n      O[o + 2] = I[i + 1] >>> 16;\n      O[o + 3] = I[i + 1] >>> 24;\n      O[o + 4] = I[i];\n      O[o + 5] = I[i] >>> 8;\n      O[o + 6] = I[i] >>> 16;\n      O[o + 7] = I[i] >>> 24;\n    }\n    return O;\n  };\n  var Sponge = function Sponge(_ref) {\n    var _this = this;\n    var capacity = _ref.capacity,\n      padding = _ref.padding;\n    var keccak = (0, _permute[\"default\"])();\n    var stateSize = 200;\n    var blockSize = capacity / 8;\n    var queueSize = stateSize - capacity / 4;\n    var queueOffset = 0;\n    var state = new Uint32Array(stateSize / 4);\n    var queue = _buffer.Buffer.allocUnsafe(queueSize);\n    this.absorb = function (buffer) {\n      for (var i = 0; i < buffer.length; i++) {\n        queue[queueOffset] = buffer[i];\n        queueOffset += 1;\n        if (queueOffset >= queueSize) {\n          xorWords(queue, state);\n          keccak(state);\n          queueOffset = 0;\n        }\n      }\n      return _this;\n    };\n    this.squeeze = function () {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var output = {\n        buffer: options.buffer || _buffer.Buffer.allocUnsafe(blockSize),\n        padding: options.padding || padding,\n        queue: _buffer.Buffer.allocUnsafe(queue.length),\n        state: new Uint32Array(state.length)\n      };\n      queue.copy(output.queue);\n      for (var i = 0; i < state.length; i++) {\n        output.state[i] = state[i];\n      }\n      output.queue.fill(0, queueOffset);\n      output.queue[queueOffset] |= output.padding;\n      output.queue[queueSize - 1] |= 128;\n      xorWords(output.queue, output.state);\n      for (var offset = 0; offset < output.buffer.length; offset += queueSize) {\n        keccak(output.state);\n        readWords(output.state, output.buffer.slice(offset, offset + queueSize));\n      }\n      return output.buffer;\n    };\n    this.reset = function () {\n      queue.fill(0);\n      state.fill(0);\n      queueOffset = 0;\n      return _this;\n    };\n    return this;\n  };\n  var _default = Sponge;\n  exports[\"default\"] = _default;\n})(sponge);\n(function (exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports[\"default\"] = exports.SHAKE = exports.SHA3Hash = exports.SHA3 = exports.Keccak = void 0;\n  var _buffer = require$$0;\n  var _sponge = _interopRequireDefault(sponge);\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      \"default\": obj\n    };\n  }\n  var createHash = function createHash(_ref) {\n    var allowedSizes = _ref.allowedSizes,\n      defaultSize = _ref.defaultSize,\n      padding = _ref.padding;\n    return function Hash() {\n      var _this = this;\n      var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultSize;\n      if (!this || this.constructor !== Hash) {\n        return new Hash(size);\n      }\n      if (allowedSizes && !allowedSizes.includes(size)) {\n        throw new Error(\"Unsupported hash length\");\n      }\n      var sponge = new _sponge[\"default\"]({\n        capacity: size\n      });\n      this.update = function (input) {\n        var encoding = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"utf8\";\n        if (_buffer.Buffer.isBuffer(input)) {\n          sponge.absorb(input);\n          return _this;\n        }\n        if (typeof input === \"string\") {\n          return _this.update(_buffer.Buffer.from(input, encoding));\n        }\n        throw new TypeError(\"Not a string or buffer\");\n      };\n      this.digest = function () {\n        var formatOrOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"binary\";\n        var options = typeof formatOrOptions === \"string\" ? {\n          format: formatOrOptions\n        } : formatOrOptions;\n        var buffer = sponge.squeeze({\n          buffer: options.buffer,\n          padding: options.padding || padding\n        });\n        if (options.format && options.format !== \"binary\") {\n          return buffer.toString(options.format);\n        }\n        return buffer;\n      };\n      this.reset = function () {\n        sponge.reset();\n        return _this;\n      };\n      return this;\n    };\n  };\n  var Keccak = createHash({\n    allowedSizes: [224, 256, 384, 512],\n    defaultSize: 512,\n    padding: 1\n  });\n  exports.Keccak = Keccak;\n  var SHA3 = createHash({\n    allowedSizes: [224, 256, 384, 512],\n    defaultSize: 512,\n    padding: 6\n  });\n  exports.SHA3 = SHA3;\n  var SHAKE = createHash({\n    allowedSizes: [128, 256],\n    defaultSize: 256,\n    padding: 31\n  });\n  exports.SHAKE = SHAKE;\n  var SHA3Hash = Keccak;\n  exports.SHA3Hash = SHA3Hash;\n  SHA3.SHA3Hash = SHA3Hash;\n  var _default = SHA3;\n  exports[\"default\"] = _default;\n})(sha3);\nfunction genHash(_x) {\n  return _genHash.apply(this, arguments);\n}\nfunction _genHash() {\n  _genHash = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(utf8String) {\n    var sha;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            sha = new sha3.SHA3(256);\n            sha.update(Buffer.from(utf8String, \"utf8\"));\n            return _context.abrupt(\"return\", sha.digest(\"hex\"));\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _genHash.apply(this, arguments);\n}\nfunction generateTemplateId(_x) {\n  return _generateTemplateId.apply(this, arguments);\n}\nfunction _generateTemplateId() {\n  _generateTemplateId = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(_ref) {\n    var template, templateData, messages, dependencies, _arguments, encodedHex;\n    return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            template = _ref.template;\n            invariant$1(template != undefined, \"generateTemplateId({ template }) -- template must be defined\");\n            invariant$1(_typeof(template) === \"object\", \"generateTemplateId({ template }) -- template must be an object\");\n            invariant$1(typeof template.f_type === \"InteractionTemplate\", \"generateTemplateId({ template }) -- template object must be an InteractionTemplate\");\n            template = normalizeInteractionTemplate(template);\n            _context9.t0 = template.f_version;\n            _context9.next = _context9.t0 === \"1.0.0\" ? 8 : 40;\n            break;\n          case 8:\n            templateData = template.data;\n            _context9.next = 11;\n            return Promise.all(Object.keys(templateData.messages).map( /*#__PURE__*/function () {\n              var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(messageKey) {\n                var _templateData$message, _templateData$message2;\n                return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        _context2.next = 2;\n                        return genHash(messageKey);\n                      case 2:\n                        _context2.t0 = _context2.sent;\n                        _context2.next = 5;\n                        return Promise.all(Object.keys((_templateData$message = templateData.messages) === null || _templateData$message === void 0 ? void 0 : (_templateData$message2 = _templateData$message[messageKey]) === null || _templateData$message2 === void 0 ? void 0 : _templateData$message2.i18n).map( /*#__PURE__*/function () {\n                          var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(i18nkeylanguage) {\n                            var _templateData$message3, _templateData$message4, _templateData$message5;\n                            return _regeneratorRuntime.wrap(function _callee$(_context) {\n                              while (1) {\n                                switch (_context.prev = _context.next) {\n                                  case 0:\n                                    _context.next = 2;\n                                    return genHash(i18nkeylanguage);\n                                  case 2:\n                                    _context.t0 = _context.sent;\n                                    _context.next = 5;\n                                    return genHash((_templateData$message3 = templateData.messages) === null || _templateData$message3 === void 0 ? void 0 : (_templateData$message4 = _templateData$message3[messageKey]) === null || _templateData$message4 === void 0 ? void 0 : (_templateData$message5 = _templateData$message4.i18n) === null || _templateData$message5 === void 0 ? void 0 : _templateData$message5[i18nkeylanguage]);\n                                  case 5:\n                                    _context.t1 = _context.sent;\n                                    return _context.abrupt(\"return\", [_context.t0, _context.t1]);\n                                  case 7:\n                                  case \"end\":\n                                    return _context.stop();\n                                }\n                              }\n                            }, _callee);\n                          }));\n                          return function (_x3) {\n                            return _ref3.apply(this, arguments);\n                          };\n                        }()));\n                      case 5:\n                        _context2.t1 = _context2.sent;\n                        return _context2.abrupt(\"return\", [_context2.t0, _context2.t1]);\n                      case 7:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2);\n              }));\n              return function (_x2) {\n                return _ref2.apply(this, arguments);\n              };\n            }()));\n          case 11:\n            messages = _context9.sent;\n            _context9.next = 14;\n            return Promise.all(Object.keys(templateData === null || templateData === void 0 ? void 0 : templateData.dependencies).map( /*#__PURE__*/function () {\n              var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dependencyAddressPlaceholder) {\n                var _templateData$depende;\n                return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n                  while (1) {\n                    switch (_context5.prev = _context5.next) {\n                      case 0:\n                        _context5.next = 2;\n                        return genHash(dependencyAddressPlaceholder);\n                      case 2:\n                        _context5.t0 = _context5.sent;\n                        _context5.next = 5;\n                        return Promise.all(Object.keys(templateData === null || templateData === void 0 ? void 0 : (_templateData$depende = templateData.dependencies) === null || _templateData$depende === void 0 ? void 0 : _templateData$depende[dependencyAddressPlaceholder]).map( /*#__PURE__*/function () {\n                          var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dependencyContract) {\n                            var _templateData$depende2, _templateData$depende3;\n                            return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n                              while (1) {\n                                switch (_context4.prev = _context4.next) {\n                                  case 0:\n                                    _context4.next = 2;\n                                    return genHash(dependencyContract);\n                                  case 2:\n                                    _context4.t0 = _context4.sent;\n                                    _context4.next = 5;\n                                    return Promise.all(Object.keys(templateData === null || templateData === void 0 ? void 0 : (_templateData$depende2 = templateData.dependencies) === null || _templateData$depende2 === void 0 ? void 0 : (_templateData$depende3 = _templateData$depende2[dependencyAddressPlaceholder]) === null || _templateData$depende3 === void 0 ? void 0 : _templateData$depende3[dependencyContract]).map( /*#__PURE__*/function () {\n                                      var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dependencyContractNetwork) {\n                                        var _templateData$depende4, _templateData$depende5, _templateData$depende6, _templateData$depende7, _templateData$depende8, _templateData$depende9, _templateData$depende10, _templateData$depende11, _templateData$depende12, _templateData$depende13, _templateData$depende14, _templateData$depende15, _templateData$depende16, _templateData$depende17, _templateData$depende18;\n                                        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                                          while (1) {\n                                            switch (_context3.prev = _context3.next) {\n                                              case 0:\n                                                _context3.next = 2;\n                                                return genHash(dependencyContractNetwork);\n                                              case 2:\n                                                _context3.t0 = _context3.sent;\n                                                _context3.next = 5;\n                                                return genHash(templateData === null || templateData === void 0 ? void 0 : (_templateData$depende4 = templateData.dependencies) === null || _templateData$depende4 === void 0 ? void 0 : (_templateData$depende5 = _templateData$depende4[dependencyAddressPlaceholder]) === null || _templateData$depende5 === void 0 ? void 0 : (_templateData$depende6 = _templateData$depende5[dependencyContract]) === null || _templateData$depende6 === void 0 ? void 0 : _templateData$depende6[dependencyContractNetwork].address);\n                                              case 5:\n                                                _context3.t1 = _context3.sent;\n                                                _context3.next = 8;\n                                                return genHash(templateData === null || templateData === void 0 ? void 0 : (_templateData$depende7 = templateData.dependencies) === null || _templateData$depende7 === void 0 ? void 0 : (_templateData$depende8 = _templateData$depende7[dependencyAddressPlaceholder]) === null || _templateData$depende8 === void 0 ? void 0 : (_templateData$depende9 = _templateData$depende8[dependencyContract]) === null || _templateData$depende9 === void 0 ? void 0 : _templateData$depende9[dependencyContractNetwork].contract);\n                                              case 8:\n                                                _context3.t2 = _context3.sent;\n                                                _context3.next = 11;\n                                                return genHash(templateData === null || templateData === void 0 ? void 0 : (_templateData$depende10 = templateData.dependencies) === null || _templateData$depende10 === void 0 ? void 0 : (_templateData$depende11 = _templateData$depende10[dependencyAddressPlaceholder]) === null || _templateData$depende11 === void 0 ? void 0 : (_templateData$depende12 = _templateData$depende11[dependencyContract]) === null || _templateData$depende12 === void 0 ? void 0 : _templateData$depende12[dependencyContractNetwork].fq_address);\n                                              case 11:\n                                                _context3.t3 = _context3.sent;\n                                                _context3.next = 14;\n                                                return genHash(templateData === null || templateData === void 0 ? void 0 : (_templateData$depende13 = templateData.dependencies) === null || _templateData$depende13 === void 0 ? void 0 : (_templateData$depende14 = _templateData$depende13[dependencyAddressPlaceholder]) === null || _templateData$depende14 === void 0 ? void 0 : (_templateData$depende15 = _templateData$depende14[dependencyContract]) === null || _templateData$depende15 === void 0 ? void 0 : _templateData$depende15[dependencyContractNetwork].pin);\n                                              case 14:\n                                                _context3.t4 = _context3.sent;\n                                                _context3.next = 17;\n                                                return genHash(String(templateData === null || templateData === void 0 ? void 0 : (_templateData$depende16 = templateData.dependencies) === null || _templateData$depende16 === void 0 ? void 0 : (_templateData$depende17 = _templateData$depende16[dependencyAddressPlaceholder]) === null || _templateData$depende17 === void 0 ? void 0 : (_templateData$depende18 = _templateData$depende17[dependencyContract]) === null || _templateData$depende18 === void 0 ? void 0 : _templateData$depende18[dependencyContractNetwork].pin_block_height));\n                                              case 17:\n                                                _context3.t5 = _context3.sent;\n                                                _context3.t6 = [_context3.t1, _context3.t2, _context3.t3, _context3.t4, _context3.t5];\n                                                return _context3.abrupt(\"return\", [_context3.t0, _context3.t6]);\n                                              case 20:\n                                              case \"end\":\n                                                return _context3.stop();\n                                            }\n                                          }\n                                        }, _callee3);\n                                      }));\n                                      return function (_x6) {\n                                        return _ref6.apply(this, arguments);\n                                      };\n                                    }()));\n                                  case 5:\n                                    _context4.t1 = _context4.sent;\n                                    return _context4.abrupt(\"return\", [_context4.t0, _context4.t1]);\n                                  case 7:\n                                  case \"end\":\n                                    return _context4.stop();\n                                }\n                              }\n                            }, _callee4);\n                          }));\n                          return function (_x5) {\n                            return _ref5.apply(this, arguments);\n                          };\n                        }()));\n                      case 5:\n                        _context5.t1 = _context5.sent;\n                        return _context5.abrupt(\"return\", [_context5.t0, _context5.t1]);\n                      case 7:\n                      case \"end\":\n                        return _context5.stop();\n                    }\n                  }\n                }, _callee5);\n              }));\n              return function (_x4) {\n                return _ref4.apply(this, arguments);\n              };\n            }()));\n          case 14:\n            dependencies = _context9.sent;\n            _context9.next = 17;\n            return Promise.all(Object.keys(templateData === null || templateData === void 0 ? void 0 : templateData[\"arguments\"]).map( /*#__PURE__*/function () {\n              var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(argumentLabel) {\n                var _templateData$argumen, _templateData$argumen2, _templateData$argumen3, _templateData$argumen4;\n                return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n                  while (1) {\n                    switch (_context8.prev = _context8.next) {\n                      case 0:\n                        _context8.next = 2;\n                        return genHash(argumentLabel);\n                      case 2:\n                        _context8.t0 = _context8.sent;\n                        _context8.next = 5;\n                        return genHash(String(templateData === null || templateData === void 0 ? void 0 : (_templateData$argumen = templateData[\"arguments\"]) === null || _templateData$argumen === void 0 ? void 0 : _templateData$argumen[argumentLabel].index));\n                      case 5:\n                        _context8.t1 = _context8.sent;\n                        _context8.next = 8;\n                        return genHash(templateData === null || templateData === void 0 ? void 0 : (_templateData$argumen2 = templateData[\"arguments\"]) === null || _templateData$argumen2 === void 0 ? void 0 : _templateData$argumen2[argumentLabel].type);\n                      case 8:\n                        _context8.t2 = _context8.sent;\n                        _context8.next = 11;\n                        return genHash((templateData === null || templateData === void 0 ? void 0 : (_templateData$argumen3 = templateData[\"arguments\"]) === null || _templateData$argumen3 === void 0 ? void 0 : _templateData$argumen3[argumentLabel].balance) || \"\");\n                      case 11:\n                        _context8.t3 = _context8.sent;\n                        _context8.next = 14;\n                        return Promise.all(Object.keys(templateData === null || templateData === void 0 ? void 0 : (_templateData$argumen4 = templateData[\"arguments\"]) === null || _templateData$argumen4 === void 0 ? void 0 : _templateData$argumen4[argumentLabel].messages).map( /*#__PURE__*/function () {\n                          var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(argumentMessageKey) {\n                            var _templateData$argumen5, _templateData$argumen6;\n                            return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n                              while (1) {\n                                switch (_context7.prev = _context7.next) {\n                                  case 0:\n                                    _context7.next = 2;\n                                    return genHash(argumentMessageKey);\n                                  case 2:\n                                    _context7.t0 = _context7.sent;\n                                    _context7.next = 5;\n                                    return Promise.all(Object.keys(templateData === null || templateData === void 0 ? void 0 : (_templateData$argumen5 = templateData[\"arguments\"]) === null || _templateData$argumen5 === void 0 ? void 0 : (_templateData$argumen6 = _templateData$argumen5[argumentLabel].messages) === null || _templateData$argumen6 === void 0 ? void 0 : _templateData$argumen6[argumentMessageKey].i18n).map( /*#__PURE__*/function () {\n                                      var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(i18nkeylanguage) {\n                                        var _templateData$argumen7, _templateData$argumen8, _templateData$argumen9;\n                                        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n                                          while (1) {\n                                            switch (_context6.prev = _context6.next) {\n                                              case 0:\n                                                _context6.next = 2;\n                                                return genHash(i18nkeylanguage);\n                                              case 2:\n                                                _context6.t0 = _context6.sent;\n                                                _context6.next = 5;\n                                                return genHash(templateData === null || templateData === void 0 ? void 0 : (_templateData$argumen7 = templateData[\"arguments\"]) === null || _templateData$argumen7 === void 0 ? void 0 : (_templateData$argumen8 = _templateData$argumen7[argumentLabel].messages) === null || _templateData$argumen8 === void 0 ? void 0 : (_templateData$argumen9 = _templateData$argumen8[argumentMessageKey].i18n) === null || _templateData$argumen9 === void 0 ? void 0 : _templateData$argumen9[i18nkeylanguage]);\n                                              case 5:\n                                                _context6.t1 = _context6.sent;\n                                                return _context6.abrupt(\"return\", [_context6.t0, _context6.t1]);\n                                              case 7:\n                                              case \"end\":\n                                                return _context6.stop();\n                                            }\n                                          }\n                                        }, _callee6);\n                                      }));\n                                      return function (_x9) {\n                                        return _ref9.apply(this, arguments);\n                                      };\n                                    }()));\n                                  case 5:\n                                    _context7.t1 = _context7.sent;\n                                    return _context7.abrupt(\"return\", [_context7.t0, _context7.t1]);\n                                  case 7:\n                                  case \"end\":\n                                    return _context7.stop();\n                                }\n                              }\n                            }, _callee7);\n                          }));\n                          return function (_x8) {\n                            return _ref8.apply(this, arguments);\n                          };\n                        }()));\n                      case 14:\n                        _context8.t4 = _context8.sent;\n                        _context8.t5 = [_context8.t1, _context8.t2, _context8.t3, _context8.t4];\n                        return _context8.abrupt(\"return\", [_context8.t0, _context8.t5]);\n                      case 17:\n                      case \"end\":\n                        return _context8.stop();\n                    }\n                  }\n                }, _callee8);\n              }));\n              return function (_x7) {\n                return _ref7.apply(this, arguments);\n              };\n            }()));\n          case 17:\n            _arguments = _context9.sent;\n            _context9.t1 = encode;\n            _context9.next = 21;\n            return genHash(\"InteractionTemplate\");\n          case 21:\n            _context9.t2 = _context9.sent;\n            _context9.next = 24;\n            return genHash(\"1.0.0\");\n          case 24:\n            _context9.t3 = _context9.sent;\n            _context9.next = 27;\n            return genHash(templateData === null || templateData === void 0 ? void 0 : templateData.type);\n          case 27:\n            _context9.t4 = _context9.sent;\n            _context9.next = 30;\n            return genHash(templateData === null || templateData === void 0 ? void 0 : templateData[\"interface\"]);\n          case 30:\n            _context9.t5 = _context9.sent;\n            _context9.t6 = messages;\n            _context9.next = 34;\n            return genHash(templateData === null || templateData === void 0 ? void 0 : templateData.cadence);\n          case 34:\n            _context9.t7 = _context9.sent;\n            _context9.t8 = dependencies;\n            _context9.t9 = _arguments;\n            _context9.t10 = [_context9.t2, _context9.t3, _context9.t4, _context9.t5, _context9.t6, _context9.t7, _context9.t8, _context9.t9];\n            encodedHex = (0, _context9.t1)(_context9.t10).toString(\"hex\");\n            return _context9.abrupt(\"return\", genHash(encodedHex));\n          case 40:\n            throw new Error(\"generateTemplateId Error: Unsupported template version\");\n          case 41:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, _callee9);\n  }));\n  return _generateTemplateId.apply(this, arguments);\n}\nfunction getInteractionTemplateAudits(_x) {\n  return _getInteractionTemplateAudits.apply(this, arguments);\n}\nfunction _getInteractionTemplateAudits() {\n  _getInteractionTemplateAudits = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n    var template,\n      auditors,\n      opts,\n      recomputedTemplateID,\n      _auditors,\n      FlowInteractionAuditContract,\n      fclNetwork,\n      audits,\n      _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            template = _ref.template, auditors = _ref.auditors;\n            opts = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            invariant$1(template != undefined, \"getInteractionTemplateAudits({ template }) -- template must be defined\");\n            template = normalizeInteractionTemplate(template);\n            invariant$1(template.f_type === \"InteractionTemplate\", \"getInteractionTemplateAudits({ template }) -- template must be an InteractionTemplate\"); // Recompute ID to be sure it matches\n\n            _context.next = 7;\n            return generateTemplateId({\n              template: template\n            });\n          case 7:\n            recomputedTemplateID = _context.sent;\n            if (!(recomputedTemplateID !== template.id)) {\n              _context.next = 11;\n              break;\n            }\n            log({\n              title: \"getInteractionTemplateAudits Debug Error\",\n              message: \"Could not recompute and match template ID\\n                computed: \".concat(recomputedTemplateID, \"\\n                template: \").concat(template.id, \"\\n            \"),\n              level: LEVELS.debug\n            });\n            throw new Error(\"getInteractionTemplateAudits Error: Could not recompute and match template ID\");\n          case 11:\n            _context.t0 = template.f_version;\n            _context.next = _context.t0 === \"1.0.0\" ? 14 : 33;\n            break;\n          case 14:\n            _context.t1 = auditors;\n            if (_context.t1) {\n              _context.next = 19;\n              break;\n            }\n            _context.next = 18;\n            return config$1().get(\"flow.auditors\");\n          case 18:\n            _context.t1 = _context.sent;\n          case 19:\n            _auditors = _context.t1;\n            invariant$1(_auditors, \"getInteractionTemplateAudits Error: Required configuration for 'fcl.auditors' is not set\");\n            invariant$1(Array.isArray(_auditors), \"getInteractionTemplateAudits Error: Required configuration for 'fcl.auditors' is not an array\");\n            FlowInteractionAuditContract = opts.flowInteractionAuditContract;\n            if (FlowInteractionAuditContract) {\n              _context.next = 29;\n              break;\n            }\n            _context.next = 26;\n            return config$1().get(\"flow.network\");\n          case 26:\n            fclNetwork = _context.sent;\n            invariant$1(fclNetwork === \"mainnet\" || fclNetwork === \"testnet\", \"getInteractionTemplateAudits Error: Unable to determine address for FlowInteractionTemplateAudit contract. Set configuration for 'fcl.network' to 'mainnet' or 'testnet'\");\n            if (fclNetwork === \"mainnet\") {\n              FlowInteractionAuditContract = \"0xfd100e39d50a13e6\";\n            } else {\n              FlowInteractionAuditContract = \"0xf78bfc12d0a786dc\";\n            }\n          case 29:\n            _context.next = 31;\n            return query({\n              cadence: \"\\n        import FlowInteractionTemplateAudit from \".concat(FlowInteractionAuditContract, \"\\n        pub fun main(templateId: String, auditors: [Address]): {Address:Bool} {\\n          return FlowInteractionTemplateAudit.getHasTemplateBeenAuditedByAuditors(templateId: templateId, auditors: auditors)\\n        }\\n        \"),\n              args: function args(arg, t) {\n                return [arg(recomputedTemplateID, t.String), arg(_auditors, t.Array(t.Address))];\n              }\n            });\n          case 31:\n            audits = _context.sent;\n            return _context.abrupt(\"return\", audits);\n          case 33:\n            throw new Error(\"getInteractionTemplateAudits Error: Unsupported template version\");\n          case 34:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getInteractionTemplateAudits.apply(this, arguments);\n}\nfunction generateImport(_ref) {\n  var contractName = _ref.contractName,\n    address = _ref.address;\n  return {\n    contractName: contractName,\n    address: address,\n    contract: \"\"\n  };\n}\nfunction findImports(cadence) {\n  var imports = [];\n  var importsReg = /import ((\\w|,| )+)* from 0x\\w+/g;\n  var fileImports = cadence.match(importsReg) || [];\n  var _iterator = _createForOfIteratorHelper(fileImports),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var fileImport = _step.value;\n      var importLineReg = /import ((\\w+|, |)*) from (0x\\w+)/g;\n      var importLine = importLineReg.exec(fileImport);\n      var contractsReg = /((?:\\w+)+),?/g;\n      var contracts = importLine[1].match(contractsReg) || [];\n      var _iterator2 = _createForOfIteratorHelper(contracts),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var contract = _step2.value;\n          imports.push(generateImport({\n            address: importLine[3],\n            contractName: contract.replace(/,/g, \"\")\n          }));\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return imports;\n}\nfunction generateDependencyPin(_x) {\n  return _generateDependencyPin.apply(this, arguments);\n}\nfunction _generateDependencyPin() {\n  _generateDependencyPin = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n    var address,\n      contractName,\n      blockHeight,\n      opts,\n      horizon,\n      _i,\n      _horizon,\n      _account$contracts,\n      horizonImport,\n      account,\n      contractImports,\n      contractHashes,\n      contractHashesJoined,\n      _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            address = _ref.address, contractName = _ref.contractName, blockHeight = _ref.blockHeight;\n            opts = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            invariant$1(address != undefined, \"generateDependencyPin({ address }) -- address must be defined\");\n            invariant$1(contractName != undefined, \"generateDependencyPin({ contractName }) -- contractName must be defined\");\n            invariant$1(blockHeight != undefined, \"generateDependencyPin({ blockHeight }) -- blockHeight must be defined\");\n            invariant$1(typeof address === \"string\", \"generateDependencyPin({ address }) -- address must be a string\");\n            invariant$1(typeof contractName === \"string\", \"generateDependencyPin({ contractName }) -- contractName must be a string\");\n            invariant$1(typeof blockHeight === \"number\", \"generateDependencyPin({ blockHeight }) -- blockHeight must be a number\");\n            horizon = [generateImport({\n              contractName: contractName,\n              address: address\n            })];\n            _i = 0, _horizon = horizon;\n          case 10:\n            if (!(_i < _horizon.length)) {\n              _context.next = 33;\n              break;\n            }\n            horizonImport = _horizon[_i];\n            _context.t0 = send$1;\n            _context.t1 = getAccount;\n            _context.next = 16;\n            return config$1().get(horizonImport.address, horizonImport.address);\n          case 16:\n            _context.t2 = _context.sent;\n            _context.t3 = (0, _context.t1)(_context.t2);\n            _context.t4 = atBlockHeight(blockHeight);\n            _context.t5 = [_context.t3, _context.t4];\n            _context.t6 = opts;\n            _context.next = 23;\n            return (0, _context.t0)(_context.t5, _context.t6).then(decode);\n          case 23:\n            account = _context.sent;\n            horizonImport.contract = (_account$contracts = account.contracts) === null || _account$contracts === void 0 ? void 0 : _account$contracts[horizonImport.contractName];\n            if (horizonImport.contract) {\n              _context.next = 28;\n              break;\n            }\n            console.error(\"Did not find expected contract\", horizonImport, account);\n            throw new Error(\"Did not find expected contract\");\n          case 28:\n            contractImports = findImports(horizonImport.contract);\n            horizon.push.apply(horizon, _toConsumableArray(contractImports));\n          case 30:\n            _i++;\n            _context.next = 10;\n            break;\n          case 33:\n            contractHashes = horizon.map(function (iport) {\n              return genHash(iport.contract);\n            });\n            contractHashesJoined = contractHashes.join(\"\");\n            return _context.abrupt(\"return\", genHash(contractHashesJoined));\n          case 36:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _generateDependencyPin.apply(this, arguments);\n}\nfunction generateDependencyPinAtLatestSealedBlock(_x2) {\n  return _generateDependencyPinAtLatestSealedBlock.apply(this, arguments);\n}\nfunction _generateDependencyPinAtLatestSealedBlock() {\n  _generateDependencyPinAtLatestSealedBlock = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref2) {\n    var address,\n      contractName,\n      opts,\n      latestSealedBlock,\n      latestSealedBlockHeight,\n      _args2 = arguments;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            address = _ref2.address, contractName = _ref2.contractName;\n            opts = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : {};\n            _context2.next = 4;\n            return block({\n              sealed: true\n            }, opts);\n          case 4:\n            latestSealedBlock = _context2.sent;\n            latestSealedBlockHeight = latestSealedBlock === null || latestSealedBlock === void 0 ? void 0 : latestSealedBlock.height;\n            return _context2.abrupt(\"return\", generateDependencyPin({\n              address: address,\n              contractName: contractName,\n              blockHeight: latestSealedBlockHeight\n            }, opts));\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _generateDependencyPinAtLatestSealedBlock.apply(this, arguments);\n}\nfunction normalizeInteractionTemplateInterface(templateInterface) {\n  if (templateInterface == null) return null;\n  switch (templateInterface[\"f_version\"]) {\n    case \"1.0.0\":\n      return templateInterface;\n    default:\n      throw new Error(\"normalizeInteractionTemplateInterface Error: Invalid InteractionTemplateInterface\");\n  }\n}\nfunction generateTemplateInterfaceId(_x) {\n  return _generateTemplateInterfaceId.apply(this, arguments);\n}\nfunction _generateTemplateInterfaceId() {\n  _generateTemplateInterfaceId = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref) {\n    var templateInterface, interfaceData, encodedHex;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            templateInterface = _ref.templateInterface;\n            invariant$1(templateInterface != undefined, \"generateTemplateInterfaceId({ templateInterface }) -- templateInterface must be defined\");\n            invariant$1(_typeof(templateInterface) === \"object\", \"generateTemplateInterfaceId({ templateInterface }) -- templateInterface must be an object\");\n            invariant$1(typeof templateInterface.f_type === \"InteractionTemplateInterface\", \"generateTemplateInterfaceId({ templateInterface }) -- templateInterface object must be an InteractionTemplate\");\n            templateInterface = normalizeInteractionTemplateInterface(templateInterface);\n            _context2.t0 = templateInterface.f_version;\n            _context2.next = _context2.t0 === \"1.0.0\" ? 8 : 25;\n            break;\n          case 8:\n            interfaceData = templateInterface.data;\n            _context2.t1 = encode;\n            _context2.next = 12;\n            return genHash(\"InteractionTemplateInterface\");\n          case 12:\n            _context2.t2 = _context2.sent;\n            _context2.next = 15;\n            return genHash(\"1.0.0\");\n          case 15:\n            _context2.t3 = _context2.sent;\n            _context2.next = 18;\n            return genHash(interfaceData.flip);\n          case 18:\n            _context2.t4 = _context2.sent;\n            _context2.next = 21;\n            return Promise.all(Object.keys(interfaceData.arguments).map( /*#__PURE__*/function () {\n              var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(argumentLabel) {\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.next = 2;\n                        return genHash(argumentLabel);\n                      case 2:\n                        _context.t0 = _context.sent;\n                        _context.next = 5;\n                        return genHash(String(interfaceData.arguments[argumentLabel].index));\n                      case 5:\n                        _context.t1 = _context.sent;\n                        _context.next = 8;\n                        return genHash(interfaceData.arguments[argumentLabel].type);\n                      case 8:\n                        _context.t2 = _context.sent;\n                        return _context.abrupt(\"return\", [_context.t0, _context.t1, _context.t2]);\n                      case 10:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              }));\n              return function (_x2) {\n                return _ref2.apply(this, arguments);\n              };\n            }()));\n          case 21:\n            _context2.t5 = _context2.sent;\n            _context2.t6 = [_context2.t2, _context2.t3, _context2.t4, _context2.t5];\n            encodedHex = (0, _context2.t1)(_context2.t6).toString(\"hex\");\n            return _context2.abrupt(\"return\", genHash(encodedHex));\n          case 25:\n            throw new Error(\"generateTemplateInterfaceId Error: Unsupported templateInterface version\");\n          case 26:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _generateTemplateInterfaceId.apply(this, arguments);\n}\nfunction verifyDependencyPinsSame(_x) {\n  return _verifyDependencyPinsSame.apply(this, arguments);\n}\nfunction _verifyDependencyPinsSame() {\n  _verifyDependencyPinsSame = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n    var template,\n      blockHeight,\n      network,\n      opts,\n      templateDependenciesPlaceholderKeys,\n      _i,\n      _templateDependencies,\n      templateDependencyPlaceholderKey,\n      templateDependencyPlaceholder,\n      templateDependencyPlaceholderContractNames,\n      _i2,\n      _templateDependencyPl,\n      templateDependencyPlaceholderContractName,\n      templateDependencyPlaceholderContractNetworks,\n      templateDependency,\n      pin,\n      _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            template = _ref.template, blockHeight = _ref.blockHeight, network = _ref.network;\n            opts = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            invariant$1(template != undefined, \"generateDependencyPin({ template }) -- template must be defined\");\n            invariant$1(_typeof(template) === \"object\", \"generateDependencyPin({ template }) -- template must be an object\");\n            invariant$1(template.f_type === \"InteractionTemplate\", \"generateDependencyPin({ template }) -- template must be an InteractionTemplate\");\n            template = normalizeInteractionTemplate(template);\n            invariant$1(network != undefined, \"generateDependencyPin({ network }) network must be defined\");\n            invariant$1(blockHeight != undefined, \"generateDependencyPin({ blockHeight }) blockHeight must be defined\");\n            invariant$1(typeof blockHeight === \"number\", \"generateDependencyPin({ blockHeight }) blockHeight must be a number\");\n            _context.t0 = template.f_version;\n            _context.next = _context.t0 === \"1.0.0\" ? 12 : 38;\n            break;\n          case 12:\n            templateDependenciesPlaceholderKeys = Object.keys(template.data.dependencies);\n            _i = 0, _templateDependencies = templateDependenciesPlaceholderKeys;\n          case 14:\n            if (!(_i < _templateDependencies.length)) {\n              _context.next = 37;\n              break;\n            }\n            templateDependencyPlaceholderKey = _templateDependencies[_i];\n            templateDependencyPlaceholder = template.data.dependencies[templateDependencyPlaceholderKey];\n            templateDependencyPlaceholderContractNames = Object.keys(templateDependencyPlaceholder);\n            _i2 = 0, _templateDependencyPl = templateDependencyPlaceholderContractNames;\n          case 19:\n            if (!(_i2 < _templateDependencyPl.length)) {\n              _context.next = 34;\n              break;\n            }\n            templateDependencyPlaceholderContractName = _templateDependencyPl[_i2];\n            templateDependencyPlaceholderContractNetworks = template.data.dependencies[templateDependencyPlaceholderKey][templateDependencyPlaceholderContractName];\n            templateDependency = templateDependencyPlaceholderContractNetworks[network];\n            if (!(typeof templateDependency === \"undefined\")) {\n              _context.next = 25;\n              break;\n            }\n            return _context.abrupt(\"continue\", 31);\n          case 25:\n            _context.next = 27;\n            return generateDependencyPin({\n              address: templateDependency.address,\n              contractName: templateDependency.contract,\n              blockHeight: blockHeight\n            }, opts);\n          case 27:\n            pin = _context.sent;\n            if (!(pin !== templateDependency.pin)) {\n              _context.next = 31;\n              break;\n            }\n            log({\n              title: \"verifyDependencyPinsSame Debug Error\",\n              message: \"Could not recompute and match dependency pin.\\n                                address: \".concat(templateDependency.address, \" | contract: \").concat(templateDependency.contract, \"\\n                                computed: \").concat(pin, \"\\n                                template: \").concat(templateDependency.pin, \"\\n                            \"),\n              level: LEVELS.debug\n            });\n            return _context.abrupt(\"return\", false);\n          case 31:\n            _i2++;\n            _context.next = 19;\n            break;\n          case 34:\n            _i++;\n            _context.next = 14;\n            break;\n          case 37:\n            return _context.abrupt(\"return\", true);\n          case 38:\n            throw new Error(\"verifyDependencyPinsSame Error: Unsupported template version\");\n          case 39:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _verifyDependencyPinsSame.apply(this, arguments);\n}\nfunction verifyDependencyPinsSameAtLatestSealedBlock(_x2) {\n  return _verifyDependencyPinsSameAtLatestSealedBlock.apply(this, arguments);\n}\nfunction _verifyDependencyPinsSameAtLatestSealedBlock() {\n  _verifyDependencyPinsSameAtLatestSealedBlock = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref2) {\n    var template,\n      network,\n      opts,\n      latestSealedBlock,\n      latestSealedBlockHeight,\n      _args2 = arguments;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            template = _ref2.template, network = _ref2.network;\n            opts = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : {};\n            _context2.next = 4;\n            return block({\n              sealed: true\n            });\n          case 4:\n            latestSealedBlock = _context2.sent;\n            latestSealedBlockHeight = latestSealedBlock === null || latestSealedBlock === void 0 ? void 0 : latestSealedBlock.height;\n            return _context2.abrupt(\"return\", verifyDependencyPinsSame({\n              template: template,\n              network: network,\n              blockHeight: latestSealedBlockHeight\n            }, opts));\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _verifyDependencyPinsSameAtLatestSealedBlock.apply(this, arguments);\n}\nfunction getTemplateMessage(_ref) {\n  var _template$data, _messages$messageKey, _messages$messageKey$;\n  var _ref$localization = _ref.localization,\n    localization = _ref$localization === void 0 ? \"en-US\" : _ref$localization,\n    messageKey = _ref.messageKey,\n    template = _ref.template;\n  invariant$1(messageKey, \"getMessage({ messageKey }) -- messageKey must be defined\");\n  invariant$1(typeof messageKey === \"stirng\", \"getMessage({ messageKey }) -- messageKey must be a string\");\n  invariant$1(localization, \"getMessage({ localization }) -- localization must be defined\");\n  invariant$1(typeof localization === \"stirng\", \"getMessage({ localization }) -- localization must be a string\");\n  invariant$1(template != undefined, \"generateTemplateId({ template }) -- template must be defined\");\n  invariant$1(_typeof(template) === \"object\", \"generateTemplateId({ template }) -- template must be an object\");\n  invariant$1(typeof template.f_type === \"InteractionTemplate\", \"generateTemplateId({ template }) -- template object must be an InteractionTemplate\");\n  var messages = template === null || template === void 0 ? void 0 : (_template$data = template.data) === null || _template$data === void 0 ? void 0 : _template$data.messages;\n  return messages === null || messages === void 0 ? void 0 : (_messages$messageKey = messages[messageKey]) === null || _messages$messageKey === void 0 ? void 0 : (_messages$messageKey$ = _messages$messageKey.i18n) === null || _messages$messageKey$ === void 0 ? void 0 : _messages$messageKey$[localization];\n}\nfunction getTemplateArgumentMessage(_ref) {\n  var _template$data, _args$argumentLabel, _args$argumentLabel$m, _args$argumentLabel$m2, _args$argumentLabel$m3;\n  var _ref$localization = _ref.localization,\n    localization = _ref$localization === void 0 ? \"en-US\" : _ref$localization,\n    argumentLabel = _ref.argumentLabel,\n    messageKey = _ref.messageKey,\n    template = _ref.template;\n  invariant$1(messageKey, \"getMessage({ messageKey }) -- messageKey must be defined\");\n  invariant$1(typeof messageKey === \"stirng\", \"getMessage({ messageKey }) -- messageKey must be a string\");\n  invariant$1(argumentLabel, \"getMessage({ argumentLabel }) -- argumentLabel must be defined\");\n  invariant$1(typeof messageKey === \"stirng\", \"getMessage({ argumentLabel }) -- argumentLabel must be a string\");\n  invariant$1(localization, \"getMessage({ localization }) -- localization must be defined\");\n  invariant$1(typeof localization === \"stirng\", \"getMessage({ localization }) -- localization must be a string\");\n  invariant$1(template != undefined, \"generateTemplateId({ template }) -- template must be defined\");\n  invariant$1(_typeof(template) === \"object\", \"generateTemplateId({ template }) -- template must be an object\");\n  invariant$1(typeof template.f_type === \"InteractionTemplate\", \"generateTemplateId({ template }) -- template object must be an InteractionTemplate\");\n  var args = template === null || template === void 0 ? void 0 : (_template$data = template.data) === null || _template$data === void 0 ? void 0 : _template$data.arguments;\n  return args === null || args === void 0 ? void 0 : (_args$argumentLabel = args[argumentLabel]) === null || _args$argumentLabel === void 0 ? void 0 : (_args$argumentLabel$m = _args$argumentLabel.messages) === null || _args$argumentLabel$m === void 0 ? void 0 : (_args$argumentLabel$m2 = _args$argumentLabel$m[messageKey]) === null || _args$argumentLabel$m2 === void 0 ? void 0 : (_args$argumentLabel$m3 = _args$argumentLabel$m2.i18n) === null || _args$argumentLabel$m3 === void 0 ? void 0 : _args$argumentLabel$m3[localization];\n}\nvar index = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  getInteractionTemplateAudits: getInteractionTemplateAudits,\n  generateDependencyPin: generateDependencyPin,\n  generateDependencyPinAtLatestSealedBlock: generateDependencyPinAtLatestSealedBlock,\n  generateTemplateId: generateTemplateId,\n  generateTemplateInterfaceId: generateTemplateInterfaceId,\n  verifyDependencyPinsSame: verifyDependencyPinsSame,\n  verifyDependencyPinsSameAtLatestSealedBlock: verifyDependencyPinsSameAtLatestSealedBlock,\n  deriveCadenceByNetwork: deriveCadenceByNetwork,\n  getTemplateMessage: getTemplateMessage,\n  getTemplateArgumentMessage: getTemplateArgumentMessage\n});\nvar authenticate = function authenticate() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return currentUser().authenticate(opts);\n};\nvar unauthenticate = function unauthenticate() {\n  return currentUser().unauthenticate();\n};\nvar reauthenticate = function reauthenticate() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  currentUser().unauthenticate();\n  return currentUser().authenticate(opts);\n};\nvar signUp = function signUp() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return currentUser().authenticate(opts);\n};\nvar logIn = function logIn() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return currentUser().authenticate(opts);\n};\nvar authz = currentUser().authorization;\nvar t = t$1;\nexport { index$1 as AppUtils, index as InteractionTemplateUtils, VERSION, index$2 as WalletUtils, authenticate, authz, currentUser, discovery, events, logIn, mutate, pluginRegistry, query, reauthenticate, serialize, signUp, t, transaction as tx, unauthenticate, verifyUserSignatures };","map":{"version":3,"names":["isServerSide","window","SESSION_STORAGE","can","get","_get","_asyncToGenerator","_regeneratorRuntime","mark","_callee","key","wrap","_callee$","_context","prev","next","abrupt","JSON","parse","sessionStorage","getItem","stop","_x","apply","arguments","put","_put","_callee2","value","_callee2$","_context2","setItem","stringify","_x2","_x3","config","configLens","_x4","_configLens","_callee3","regex","_callee3$","_context3","t0","Object","t1","where","t2","sent","t3","entries","call","map","_ref","_ref2","_slicedToArray","replace","fromEntries","VERSION","is","type","d","_typeof","isRequired","isObject","isString","isFunc","isNumber","normalizeArgs","ax","sdk","arg","t$1","httpDocumentResolver","_httpDocumentResolver","url","res","document","invariant","fetchTransport","Error","ok","json","DOCUMENT_RESOLVERS","Map","retrieve","_retrieve","documentResolversFromConfig","urlParts","protocol","resolver","keys","resolverFromConfig","resolverProtocol","set","exec","concat","normalizeInteractionTemplate","template","deriveCadenceByNetwork","_template","_template$data","network","invariant$1","undefined","f_type","f_version","networkDependencies","data","dependencies","dependencyPlaceholder","_template2","_template2$data","_template2$data$depen","dependencyNetworkContracts","values","length","dependencyContract","dependencyContractForNetwork","address","reduce","cadence","_ref3","placeholder","RegExp","deriveDependencies","_deriveDependencies","derivedDependencies","dependencyPlaceholderKeys","_i","_dependencyPlaceholde","_template$data2","dependencyPlaceholderKey","dependencyPlaceholderContractsKeys","dependencyPlaceholderContract","dependency","withPrefix","prepTemplateOpts","_prepTemplateOpts","opts","t4","pre","t5","t6","preMutate","_preMutate","preQuery","_preQuery","query","_query","_args2","overload","send","script","args","limit","then","decode","fetchServices","_fetchServices","servicesURL","code","resp","services","_iterator","_step","service","URL","searchParams","append","fetch","method","headers","Array","isArray","authorizations","_createForOfIteratorHelper","s","n","done","push","_objectSpread","keyId","err","e","f","provider","id","mergeServices","sx1","sx2","_toConsumableArray","SERVICE_PRAGMA","f_vsn","IDENTITY_PRAGMA","USER_PRAGMA","POLLING_RESPONSE_PRAGMA","COMPOSITE_SIGNATURE_PRAGMA","normalizeAuthn","uid","endpoint","authn","pid","addr","name","icon","normalizeAuthz","identity","params","normalizePreAuthz","normalizeFrame","old","normalizeBackChannelRpc","normalizeOpenId","normalizeUserSignature","normalizeLocalView","normalizeAccountProof","normalizeAuthnRefresh","serviceNormalizers","authz","frame","normalizeService","normalized","error","console","deriveCompositeId","rlp","encode","toString","normalizeData","paddr","findService","find","buildUser","_buildUser","hks","cid","loggedIn","expiresAt","expires","serviceOfType","serviceEndpoint","location","origin","_Object$entries","_Object$entries$_i","fetchService","body","normalizePollingResponse","_resp$status","_resp$reason","status","reason","compositeSignature","updates","authorizationUpdates","local","OPTIONS","serviceMethod","poll","_poll","canContinue","_args","Promise","r","setTimeout","FRAME","FRAME_STYLES","renderFrame","src","getElementById","$frame","createElement","allow","frameBorder","style","cssText","unmount","remove","contentWindow","POP","popup","previousUrl$1","popupWindow","windowName","win","w","h","y","top","outerHeight","screenY","x","outerWidth","screenX","open","renderPop","_popup","closed","focus","close","tab$1","previousUrl","renderTab","_tab","VIEWS","execLocal","_execLocal","execHttpPost","_execHttpPost","_yield$execLocal","_yield$execLocal2","fclVersion","serviceResponse","CLOSE_EVENT","READY_EVENT","RESPONSE_EVENT","_","toLowerCase","IGNORE","Set","deprecate","was","want","warn","buildMessageHandler","onReady","onResponse","onMessage","has","noop$3","noop","onClose","handler","addEventListener","_renderFrame","_renderFrame2","removeEventListener","msg","postMessage","execIframeRPC","resolve","reject","includeOlderJsonRpcCall","deprecated","message","jsonrpc","_ref4","result","noop$2","pop","_renderPop","_renderPop2","$pop","timer","setInterval","clearInterval","execPopRPC","redir","noop$1","tab","_renderTab","_renderTab2","$tab","execTabRPC","extension","execExtRPC","CORE_STRATEGIES","supportedPlugins","supportedServicePlugins","validateDiscoveryPlugin","servicePlugin","serviceStrategy","ds","discoveryServices","ServiceRegistry","strategies","add","includes","_validateDiscoveryPlu","setServices","log","title","level","LEVELS","getServices","getStrategy","getStrategies","freeze","validatePlugins","plugins","pluginsArray","_iterator2","_step2","p","PluginRegistry","pluginsMap","getPlugins","_iterator3","_step3","serviceRegistry","pluginRegistry","execStrategy","strategy","execService","_execService","_window$location$host","_window","_window$location","_ref3$msg","_ref3$config","_ref3$opts","execConfig","client","fclLibrary","hostname","app","normalizeCompositeSignature","sansPrefix","signature","sig","makeDiscoveryServices","extensionServices","fcl_extensions","getDiscoveryService","_getDiscoveryService","_service$endpoint","discoveryAuthnInclude","discoveryWalletMethod","first","_getServices","_window$navigator","types","include","Boolean","t7","t8","t9","navigator","userAgent","t10","clientServices","supportedStrategies","t11","t12","SERVICE_ACTOR_KEYS","AUTHN","RESULTS","SNAPSHOT","UPDATED","UPDATE_RESULTS","fact","fetchServicesFromDiscovery","results","HANDLERS$3","_HANDLERS$3","_defineProperty","INIT","ctx","readyState","onload","_letter","merge","broadcast","all","SUBSCRIBE","letter","subscribe","from","UNSUBSCRIBE","unsubscribe","_callee4","_callee4$","_context4","reply","spawnProviders","spawn","cb","subscriber","snapshot","snapshoter","update","discovery","isAndroid","test","isSmallIOS","isLargeIOS","isIOS","isMobile","isFn","NAME","UPDATED$1","SET_CURRENT_USER","DEL_CURRENT_USER","DATA","getStoredUser","storage","fallback","stored","removeItem","HANDLERS$2","_HANDLERS$2","user","notExpired","_x5","_x6","_x7","_ref5","_callee5","_callee5$","_context5","_x8","_x9","spawnCurrentUser","Date","now","getAccountProofData","_getAccountProofData","_callee8","accountProofDataResolver","accountProofData","_callee8$","_context8","appIdentifier","nonce","makeConfig","_ref7","_callee6","_ref6","_callee6$","_context6","_x10","authenticate$1","_authenticate","_callee10","_service$provider","_service$provider2","_ref11","_ref11$redir","_service$provider3","_args10","_callee10$","_context10","is_installed","requires_install","href","install_link","_ref12","_callee9","discoveryService","refreshService","response","_response","_callee9$","_context9","t13","t14","t15","t16","t17","t18","t19","t20","finish","_x14","_x15","unauthenticate$1","unauthenticate","normalizePreAuthzResponse","proposer","payer","authorization","resolvePreAuthz","axs","az","_az","_ref8","_ref9","role","tempId","join","signingFunction","signable","authorizer","_x11","_authorization","_callee13","account","_callee13$","_context13","preSignable","_callee12","preAuthz","windowRef","_callee12$","_context12","sequenceNum","_callee11","_callee11$","_context11","callback","EXIT","self","_ref10","_callee7","_callee7$","_context7","receive","tag","_x12","expectReply","timeout","resolveArgument","_resolveArgument","_callee15","_yield$authenticate","_callee15$","_context15","Address","makeSignable","signUserMessage","_x13","_signUserMessage","_callee16","signingService","_callee16$","_context16","compSigs","currentUser","authenticate","mutate","_mutate","txid","transaction","onMessageFromFCL","messageType","buildData","_data$body","interaction","internal","sendMsgToFCL","parent","opener","ready","approve","decline","redirect","CompositeSignature","Number","rightPaddedHexBuffer","pad","Buffer","padEnd","leftPaddedHexBuffer","padStart","addressBuffer","nonceBuffer","encodeAccountProof","includeDomainTag","ACCOUNT_PROOF_DOMAIN_TAG","injectExtService","ACCOUNT_PROOF","USER_SIGNATURE","validateArgs","signatures","every","i","arr","cs","_address","getVerifySignaturesScript","verifyFunction","fclCryptoContract","pkg","subject","transition","verifyAccountProof","_verifyAccountProof","signaturesArr","keyIndices","el","t","String","Int","verifyUserSignatures$1","verifyUserSignatures","_verifyUserSignatures","_args3","serialize","resolveFunction","config$1","pipe","createSignableVoucher","RATE$1","POLL","fetchTxStatus","transactionId","send$1","getTransactionStatus","isExpired","tx","isSealed","isExecuted","isFinalized","isPending","isUnknown","isDiff","cur","HANDLERS$1","_HANDLERS$1","sendSelf","UPDATED$2","SNAPSHOT$1","fatalError","scoped","spawnTransaction","once","predicate","innerOnce","suppress","unsub","txStatus","statusCode","errorMessage","onceFinalized","onceExecuted","onceSealed","RATE","TICK","HIGH_WATER_MARK","scheduleTick","HANDLERS","_HANDLERS","hwm","hasSubs","block","height","getEventsAtBlockHeightRange","clearTimeout","spawnEvents","events","copy","I","O","o","oi","ii","copy_1","defineProperty","exports","_copy","_interopRequireDefault","obj","__esModule","chi","A","C","xy","x1","x2","_default","ROUND_CONSTANTS","Uint32Array","_roundConstants","roundConstants","iota","roundIndex","PI_SHUFFLES","RHO_OFFSETS","_piShuffles","piShuffles","_rhoOffsets","rhoOffsets","rhoPi","W","H","L","Wi","ri","j","theta","D","x20","x21","x22","x23","x24","_chi","_iota","_rhoPi","_theta","permute","fill","_buffer","require$$0","_permute","xorWords","readWords","Sponge","_this","capacity","padding","keccak","stateSize","blockSize","queueSize","queueOffset","state","queue","allocUnsafe","absorb","buffer","squeeze","options","output","offset","slice","reset","SHAKE","SHA3Hash","SHA3","Keccak","_sponge","sponge","createHash","allowedSizes","defaultSize","Hash","size","constructor","input","encoding","isBuffer","TypeError","digest","formatOrOptions","format","genHash","_genHash","utf8String","sha","sha3","generateTemplateId","_generateTemplateId","templateData","messages","_arguments","encodedHex","messageKey","_templateData$message","_templateData$message2","i18n","i18nkeylanguage","_templateData$message3","_templateData$message4","_templateData$message5","dependencyAddressPlaceholder","_templateData$depende","_templateData$depende2","_templateData$depende3","dependencyContractNetwork","_templateData$depende4","_templateData$depende5","_templateData$depende6","_templateData$depende7","_templateData$depende8","_templateData$depende9","_templateData$depende10","_templateData$depende11","_templateData$depende12","_templateData$depende13","_templateData$depende14","_templateData$depende15","_templateData$depende16","_templateData$depende17","_templateData$depende18","contract","fq_address","pin","pin_block_height","argumentLabel","_templateData$argumen","_templateData$argumen2","_templateData$argumen3","_templateData$argumen4","index","balance","argumentMessageKey","_templateData$argumen5","_templateData$argumen6","_templateData$argumen7","_templateData$argumen8","_templateData$argumen9","getInteractionTemplateAudits","_getInteractionTemplateAudits","auditors","recomputedTemplateID","_auditors","FlowInteractionAuditContract","fclNetwork","audits","debug","flowInteractionAuditContract","generateImport","contractName","findImports","imports","importsReg","fileImports","match","fileImport","importLineReg","importLine","contractsReg","contracts","generateDependencyPin","_generateDependencyPin","blockHeight","horizon","_horizon","_account$contracts","horizonImport","contractImports","contractHashes","contractHashesJoined","getAccount","atBlockHeight","iport","generateDependencyPinAtLatestSealedBlock","_generateDependencyPinAtLatestSealedBlock","latestSealedBlock","latestSealedBlockHeight","sealed","normalizeInteractionTemplateInterface","templateInterface","generateTemplateInterfaceId","_generateTemplateInterfaceId","interfaceData","flip","verifyDependencyPinsSame","_verifyDependencyPinsSame","templateDependenciesPlaceholderKeys","_templateDependencies","templateDependencyPlaceholderKey","templateDependencyPlaceholder","templateDependencyPlaceholderContractNames","_i2","_templateDependencyPl","templateDependencyPlaceholderContractName","templateDependencyPlaceholderContractNetworks","templateDependency","verifyDependencyPinsSameAtLatestSealedBlock","_verifyDependencyPinsSameAtLatestSealedBlock","getTemplateMessage","_messages$messageKey","_messages$messageKey$","_ref$localization","localization","getTemplateArgumentMessage","_args$argumentLabel","_args$argumentLabel$m","_args$argumentLabel$m2","_args$argumentLabel$m3","reauthenticate","signUp","logIn"],"sources":["C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\default-config.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\VERSION.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\exec\\utils\\is.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\exec\\utils\\normalize-args.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\document\\document.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\normalizers\\interaction-template\\interaction-template.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\interaction-template-utils\\derive-cadence-by-network.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\exec\\utils\\derive-dependencies.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\exec\\utils\\prep-template-opts.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\exec\\utils\\pre.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\exec\\query.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\fetch-services.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\merge-services.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\normalizers\\service\\__vsn.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\normalizers\\service\\authn.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\normalizers\\service\\authz.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\normalizers\\service\\pre-authz.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\normalizers\\service\\frame.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\normalizers\\service\\back-channel-rpc.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\normalizers\\service\\open-id.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\normalizers\\service\\user-signature.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\normalizers\\service\\local-view.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\normalizers\\service\\account-proof.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\normalizers\\service\\authn-refresh.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\normalizers\\service\\service.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\build-user.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\service-of-type.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\exec-service\\strategies\\utils\\service-endpoint.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\exec-service\\strategies\\utils\\fetch-service.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\normalizers\\service\\polling-response.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\exec-service\\strategies\\utils\\poll.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\exec-service\\strategies\\utils\\render-frame.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\exec-service\\strategies\\utils\\render-pop.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\exec-service\\strategies\\utils\\render-tab.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\exec-service\\exec-local.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\exec-service\\strategies\\http-post.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\exec-service\\strategies\\utils\\buildMessageHandler.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\exec-service\\strategies\\utils\\frame.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\exec-service\\strategies\\iframe-rpc.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\exec-service\\strategies\\utils\\pop.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\exec-service\\strategies\\pop-rpc.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\exec-service\\strategies\\utils\\tab.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\exec-service\\strategies\\tab-rpc.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\exec-service\\strategies\\utils\\extension.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\exec-service\\strategies\\ext-rpc.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\exec-service\\plugins.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\exec-service\\index.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\normalizers\\service\\composite-signature.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\discovery\\utils.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\discovery\\services.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\discovery\\services\\authn.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\discovery\\index.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\utils\\index.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\current-user\\index.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\exec\\mutate.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\wallet-utils\\on-message-from-fcl.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\wallet-utils\\send-msg-to-fcl.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\wallet-utils\\CompositeSignature.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\wallet-utils\\encode-account-proof.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\wallet-utils\\inject-ext-service.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\app-utils\\verify-signatures.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\exec\\verify.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\serialize\\index.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\transaction\\index.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\events\\index.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\node_modules\\sha3\\sponge\\permute\\copy\\index.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\node_modules\\sha3\\sponge\\permute\\chi\\index.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\node_modules\\sha3\\sponge\\permute\\iota\\round-constants\\index.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\node_modules\\sha3\\sponge\\permute\\iota\\index.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\node_modules\\sha3\\sponge\\permute\\rho-pi\\pi-shuffles\\index.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\node_modules\\sha3\\sponge\\permute\\rho-pi\\rho-offsets\\index.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\node_modules\\sha3\\sponge\\permute\\rho-pi\\index.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\node_modules\\sha3\\sponge\\permute\\theta\\index.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\node_modules\\sha3\\sponge\\permute\\index.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\node_modules\\sha3\\sponge\\index.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\node_modules\\sha3\\index.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\interaction-template-utils\\utils\\hash.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\interaction-template-utils\\generate-template-id.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\interaction-template-utils\\get-interaction-template-audits.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\interaction-template-utils\\utils\\generate-import.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\interaction-template-utils\\utils\\find-imports.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\interaction-template-utils\\generate-dependency-pin.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\normalizers\\interaction-template\\interaction-template-interface.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\interaction-template-utils\\generate-template-interface-id.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\interaction-template-utils\\verify-dependency-pin-same-at-block.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\interaction-template-utils\\get-template-message.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\interaction-template-utils\\get-template-argument-message.js","C:\\Users\\gugan\\flow-hackverse\\node_modules\\@onflow\\fcl\\src\\fcl.js"],"sourcesContent":["import {config} from \"@onflow/config\"\n\nconst isServerSide = () => typeof window === \"undefined\"\n\nconst SESSION_STORAGE = {\n  can: !isServerSide(),\n  get: async key => JSON.parse(sessionStorage.getItem(key)),\n  put: async (key, value) => sessionStorage.setItem(key, JSON.stringify(value)),\n}\n\nconfig({\n  \"discovery.wallet.method.default\": \"IFRAME/RPC\",\n  \"fcl.storage.default\": SESSION_STORAGE,\n})\n\nexport async function configLens(regex) {\n  return Object.fromEntries(\n    Object.entries(await config().where(regex)).map(([key, value]) => [\n      key.replace(regex, \"\"),\n      value,\n    ])\n  )\n}\n","export const VERSION = PACKAGE_CURRENT_VERSION || \"TESTVERSION\"\n","const is = type => d => typeof d === type\n\nexport const isRequired = d => d != null\nexport const isObject = is(\"object\")\nexport const isString = is(\"string\")\nexport const isFunc = is(\"function\")\nexport const isNumber = is(\"number\")\n","import {isFunc} from \"./is\"\nimport * as sdk from \"@onflow/sdk\"\nimport * as t from \"@onflow/types\"\n\nexport function normalizeArgs(ax) {\n  if (isFunc(ax)) return ax(sdk.arg, t)\n  return []\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport fetchTransport from \"node-fetch\"\nimport {config} from \"@onflow/config\"\n\nasync function httpDocumentResolver({url}) {\n  invariant(\n    typeof url !== \"undefined\",\n    \"retrieve({ url }) -- url must be defined\"\n  )\n\n  let res\n  try {\n    res = await fetchTransport(url)\n  } catch (e) {\n    throw new Error(\"httpDocumentResolver Error: Failed to retrieve document.\")\n  }\n\n  let document = res.ok ? await res.json() : null\n\n  return document\n}\n\nconst DOCUMENT_RESOLVERS = new Map([\n  [\"http\", httpDocumentResolver],\n  [\"https\", httpDocumentResolver],\n])\n\nexport async function retrieve({url}) {\n  invariant(\n    typeof url !== \"undefined\",\n    \"retrieve({ url }) -- url must be defined\"\n  )\n  invariant(\n    typeof url === \"string\",\n    \"retrieve({ url }) -- url must be a string\"\n  )\n\n  const documentResolversFromConfig = await config().where(\n    /^document\\.resolver\\./\n  )\n  Object.keys(documentResolversFromConfig).map(key => {\n    const resolverFromConfig = documentResolversFromConfig[key]\n    const resolverProtocol = key.replace(/^document\\.resolver\\./, \"\")\n    DOCUMENT_RESOLVERS.set(resolverProtocol, resolverFromConfig)\n  })\n\n  const urlParts = /^(.*):\\/\\/([A-Za-z0-9\\-\\.]+)(:[0-9]+)?(.*)$/.exec(url)\n  invariant(urlParts, \"Failed to parse URL\")\n  const protocol = urlParts[1]\n  invariant(urlParts, \"Failed to parse URL protocol\")\n\n  const resolver = DOCUMENT_RESOLVERS.get(protocol)\n  invariant(resolver, `No resolver found for protcol=${protocol}`)\n\n  let document = await resolver({url})\n\n  return document\n}\n","export function normalizeInteractionTemplate(template) {\n  if (template == null) return null\n\n  switch (template[\"f_version\"]) {\n    case \"1.0.0\":\n      return template\n\n    default:\n      throw new Error(\n        \"normalizeInteractionTemplate Error: Invalid InteractionTemplate\"\n      )\n  }\n}\n","import {invariant} from \"@onflow/sdk\"\nimport {normalizeInteractionTemplate} from \"../normalizers/interaction-template/interaction-template\"\n\nexport function deriveCadenceByNetwork({network, template}) {\n  invariant(\n    network != undefined,\n    \"deriveCadenceByNetwork({ network }) -- network must be defined\"\n  )\n  invariant(\n    typeof network === \"string\",\n    \"deriveCadenceByNetwork({ network }) -- network must be a string\"\n  )\n\n  invariant(\n    template != undefined,\n    \"generateDependencyPin({ template }) -- template must be defined\"\n  )\n  invariant(\n    typeof template === \"object\",\n    \"generateDependencyPin({ template }) -- template must be an object\"\n  )\n  invariant(\n    template.f_type === \"InteractionTemplate\",\n    \"generateDependencyPin({ template }) -- template must be an InteractionTemplate\"\n  )\n\n  template = normalizeInteractionTemplate(template)\n\n  switch (template.f_version) {\n    case \"1.0.0\":\n      let networkDependencies = Object.keys(template?.data?.dependencies).map(\n        dependencyPlaceholder => {\n          let dependencyNetworkContracts = Object.values(\n            template?.data?.dependencies?.[dependencyPlaceholder]\n          )\n\n          invariant(\n            dependencyNetworkContracts,\n            `deriveCadenceByNetwork -- Could not find contracts for dependency placeholder: ${dependencyPlaceholder}`\n          )\n\n          invariant(\n            dependencyNetworkContracts.length === 0,\n            `deriveCadenceByNetwork -- Could not find contracts for dependency placeholder: ${dependencyPlaceholder}`\n          )\n\n          let dependencyContract = dependencyNetworkContracts[0]\n          let dependencyContractForNetwork = dependencyContract?.[network]\n\n          invariant(\n            dependencyContractForNetwork,\n            `deriveCadenceByNetwork -- Could not find ${network} network information for dependency: ${dependencyPlaceholder}`\n          )\n\n          return [dependencyPlaceholder, dependencyContractForNetwork.address]\n        }\n      )\n\n      return networkDependencies.reduce((cadence, [placeholder, address]) => {\n        const regex = new RegExp(\"(\\\\b\" + placeholder + \"\\\\b)\", \"g\")\n        return cadence.replace(regex, address)\n      }, template.data.cadence)\n\n    default:\n      throw new Error(\n        \"deriveCadenceByNetwork Error: Unsupported template version\"\n      )\n  }\n}\n","import {config} from \"@onflow/config\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {withPrefix} from \"@onflow/util-address\"\n\nexport async function deriveDependencies({template}) {\n  const network = await config.get(\"flow.network\")\n\n  invariant(\n    network,\n    \"FCL configureDependencies Error: Missing configuration value for 'flow.network'\"\n  )\n\n  const derivedDependencies = {}\n\n  switch (template[\"f_version\"]) {\n    case \"1.0.0\":\n      const dependencyPlaceholderKeys = Object.keys(\n        template?.data?.dependencies\n      )\n      for (let dependencyPlaceholderKey of dependencyPlaceholderKeys) {\n        let dependencyPlaceholder =\n          template?.data?.dependencies[dependencyPlaceholderKey]\n\n        const dependencyPlaceholderContractsKeys = Object.keys(\n          dependencyPlaceholder\n        )\n        invariant(\n          dependencyPlaceholderContractsKeys.length > 0,\n          `FCL configureDependencies Error: No contracts found in template for placeholder=${dependencyPlaceholderKey}`\n        )\n        const dependencyPlaceholderContract =\n          dependencyPlaceholder[dependencyPlaceholderContractsKeys[0]]\n        const dependency = dependencyPlaceholderContract[network]\n\n        invariant(\n          dependency,\n          `FCL configureDependencies Error: No dependency information for placeholder=${dependencyPlaceholderKey} contract=${dependencyPlaceholderContractsKeys[0]} network=${network}`\n        )\n        invariant(\n          dependency?.address,\n          `FCL configureDependencies Error: No address information for placeholder=${dependencyPlaceholderKey} contract=${dependencyPlaceholderContractsKeys[0]} network=${network}`\n        )\n\n        derivedDependencies[dependencyPlaceholderKey] = withPrefix(\n          dependency?.address\n        )\n      }\n\n      return derivedDependencies\n\n    default:\n      throw new Error(\n        \"FCL configureDependencies Error: Unsupported template version\"\n      )\n  }\n}\n","import * as sdk from \"@onflow/sdk\"\nimport {retrieve} from \"../../document/document.js\"\nimport {normalizeInteractionTemplate} from \"../../normalizers/interaction-template/interaction-template\"\nimport {deriveCadenceByNetwork} from \"../../interaction-template-utils/derive-cadence-by-network.js\"\nimport {deriveDependencies} from \"./derive-dependencies\"\nimport {isString} from \"./is\"\n\nexport async function prepTemplateOpts(opts) {\n  if (isString(opts?.template)) {\n    opts.template = await retrieve({url: opts?.template})\n  }\n\n  let dependencies = {}\n  if (opts?.template) {\n    opts.template = normalizeInteractionTemplate(opts?.template)\n    dependencies = await deriveDependencies({template: opts.template})\n  }\n\n  const cadence =\n    opts.cadence ||\n    deriveCadenceByNetwork({\n      template: opts.template,\n      network: await sdk.config().get(\"flow.network\"),\n    })\n\n  opts.cadence = cadence\n  opts.dependencies = dependencies\n\n  return opts\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport * as sdk from \"@onflow/sdk\"\nimport {isRequired, isObject, isString} from \"./is\"\n\nasync function pre(type, opts) {\n  // prettier-ignore\n  invariant(isRequired(opts), `${type}(opts) -- opts is required`)\n  // prettier-ignore\n  invariant(isObject(opts), `${type}(opts) -- opts must be an object`)\n  // prettier-ignore\n  invariant(!(opts.cadence && opts.template), `${type}({ template, cadence }) -- cannot pass both cadence and template`)\n  // prettier-ignore\n  invariant(isRequired(opts.cadence || opts?.template), `${type}({ cadence }) -- cadence is required`)\n  // // prettier-ignore\n  invariant(\n    isString(opts.cadence) || opts?.template,\n    `${type}({ cadence }) -- cadence must be a string`\n  )\n  // prettier-ignore\n  invariant(\n    opts.cadence || (await sdk.config().get(\"flow.network\")),\n    `${type}(opts) -- Required value for \"flow.network\" not defined in config. See: ${\"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration\"}`\n  )\n  // prettier-ignore\n  invariant(\n    await sdk.config().get(\"accessNode.api\"),\n    `${type}(opts) -- Required value for \"accessNode.api\" not defined in config. See: ${\"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration\"}`\n  )\n}\n\nexport async function preMutate(opts) {\n  return pre(\"mutate\", opts)\n}\n\nexport async function preQuery(opts) {\n  return pre(\"query\", opts)\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport * as sdk from \"@onflow/sdk\"\nimport {isRequired, isObject, isString} from \"./utils/is\"\nimport {normalizeArgs} from \"./utils/normalize-args\"\nimport {prepTemplateOpts} from \"./utils/prep-template-opts.js\"\nimport {preQuery} from \"./utils/pre.js\"\n\n/** Query the Flow Blockchain\n *\n *  @arg {Object} opts         - Query Options and configuration\n *  @arg {string} opts.cadence - Cadence Script used to query Flow\n *  @arg {ArgsFn} opts.args    - Arguments passed to cadence script\n *  @arg {Object} opts.template - Interaction Template for a script\n *  @arg {number} opts.limit   - Compute Limit for Query\n *  @returns {Promise<Response>}\n *\n *  Where:\n *    @callback ArgsFn\n *    @arg {ArgFn}  arg - Argument function to define a single argument\n *    @arg {Object} t   - Cadence Types object used to define the type\n *    @returns {args[]}\n *\n *    @callback ArgFn\n *    @arg {Any}  value - the value of the argument\n *    @arg {Type} type  - the cadence type of the value\n *    @returns {arg}\n *\n *  Example:\n *    const cadence = `\n *      cadence: `\n *        pub fun main(a: Int, b: Int, c: Address): Int {\n *          log(c)\n *          return a + b\n *        }\n *    `.trim()\n *\n *    const args = (arg, t) => [\n *      arg(5, t.Int),\n *      arg(7, t.Int),\n *      arg(\"0xb2db43ad6bc345fec9\", t.Address),\n *    ]\n *\n *    await query({ cadence, args })\n */\nexport async function query(opts = {}) {\n  await preQuery(opts)\n  opts = await prepTemplateOpts(opts)\n\n  return sdk.config().overload(opts.dependencies || {}, async () =>\n    // prettier-ignore\n    sdk.send([\n      sdk.script(opts.cadence),\n      sdk.args(normalizeArgs(opts.args || [])),\n      opts.limit && typeof opts.limit === \"number\" && sdk.limit(opts.limit)\n    ]).then(sdk.decode)\n  )\n}\n","export async function fetchServices(servicesURL, code) {\n  if (servicesURL == null || code == null) return []\n\n  const url = new URL(servicesURL)\n  url.searchParams.append(\"code\", code)\n\n  const resp = await fetch(url, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  }).then(d => d.json())\n\n  if (Array.isArray(resp)) return resp\n\n  // Backwards compatibility for First-Gen Wallet Providers\n  const services = []\n\n  // Convert authorizations into authz services\n  if (Array.isArray(resp.authorizations)) {\n    for (let service of resp.authorizations) {\n      services.push({\n        type: \"authz\",\n        keyId: resp.keyId,\n        ...service,\n      })\n    }\n  }\n\n  // Convert Provider info into an authn service\n  if (resp.provider != null) {\n    services.push({\n      type: \"authn\",\n      id: \"wallet-provider#authn\",\n      ...resp.provider,\n    })\n  }\n\n  return services\n}\n","import {withPrefix} from \"@onflow/util-address\"\n\nexport function mergeServices(sx1 = [], sx2 = []) {\n  // TODO: Make this smarter\n  return [...sx1, ...sx2]\n}\n","export const SERVICE_PRAGMA = {\n  f_type: \"Service\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const IDENTITY_PRAGMA = {\n  f_type: \"Identity\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const PROVIDER_PRAGMA = {\n  f_type: \"Provider\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const USER_PRAGMA = {\n  f_type: \"USER\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const POLLING_RESPONSE_PRAGMA = {\n  f_type: \"PollingResponse\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const COMPOSITE_SIGNATURE_PRAGMA = {\n  f_type: \"CompositeSignature\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const OPEN_ID_PRAGMA = {\n  f_type: \"OpenId\",\n  f_vsn: \"1.0.0\",\n}\n","import {withPrefix} from \"@onflow/util-address\"\nimport {SERVICE_PRAGMA} from \"./__vsn\"\n\n// {\n//   \"f_type\": \"Service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"authn\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"endpoint\": \"https://rawr\",\n//   \"id\": \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\", // wallets internal id for the user\n//   \"identity\": {\n//     \"address\": \"0x____\"\n//   },\n//   \"provider\": {\n//     \"address\": \"0x____\",\n//     \"name\": \"Best Wallet\",\n//     \"description\": \"The Best Wallet\"\n//     \"icon\": \"https://\",\n//   }\n// }\nexport function normalizeAuthn(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return {\n        ...SERVICE_PRAGMA,\n        type: service.type,\n        uid: service.id,\n        endpoint: service.authn,\n        id: service.pid,\n        provider: {\n          address: withPrefix(service.addr),\n          name: service.name,\n          icon: service.icon,\n        },\n      }\n  }\n}\n","import {withPrefix} from \"@onflow/util-address\"\nimport {SERVICE_PRAGMA, IDENTITY_PRAGMA} from \"./__vsn\"\n\n// {\n//   \"f_type\": \"service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"authz\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"endpoint\": \"https://rawr\",\n//   \"method\": \"HTTP/POST\", // HTTP/POST | IFRAME/RPC | HTTP/RPC\n//   \"identity\": {\n//      \"address\": \"0x______\",\n//      \"keyId\": 0,\n//   },\n//   \"data\": {}, // included in body of authz request\n//   \"params\": {}, // included as query params on endpoint url\n// }\nexport function normalizeAuthz(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return {\n        ...SERVICE_PRAGMA,\n        type: service.type,\n        uid: service.id,\n        endpoint: service.endpoint,\n        method: service.method,\n        identity: {\n          ...IDENTITY_PRAGMA,\n          address: withPrefix(service.addr),\n          keyId: service.keyId,\n        },\n        params: service.params,\n        data: service.data,\n      }\n  }\n}\n","import {withPrefix} from \"@onflow/util-address\"\nimport {SERVICE_PRAGMA, IDENTITY_PRAGMA} from \"./__vsn\"\n\n// {\n//   \"f_type\": \"service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"pre-authz\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"endpoint\": \"https://rawr\",\n//   \"method\": \"HTTP/POST\", // HTTP/POST | IFRAME/RPC | HTTP/RPC\n//   \"identity\": {\n//      \"address\": \"0x______\",\n//      \"keyId\": 0,\n//   },\n//   \"data\": {}, // included in body of pre-authz request\n//   \"params\": {}, // included as query params on endpoint url\n// }\nexport function normalizePreAuthz(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return {\n        ...SERVICE_PRAGMA,\n        type: service.type,\n        uid: service.id,\n        endpoint: service.endpoint,\n        method: service.method,\n        identity: {\n          ...IDENTITY_PRAGMA,\n          address: withPrefix(service.addr),\n          keyId: service.keyId,\n        },\n        params: service.params,\n        data: service.data,\n      }\n  }\n}\n","import {SERVICE_PRAGMA} from \"./__vsn\"\n\n// {\n//    \"f_type\": \"Service\",\n//    \"f_vsn\": \"1.0.0\",\n//    \"type\": \"frame\",\n//    \"endpoint\": \"https://rawr\",\n//    \"data\": {},   // Sent to frame when ready\n//    \"params\": {}, // include in query params on frame\n// }\nexport function normalizeFrame(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return {\n        old: service,\n        ...SERVICE_PRAGMA,\n        type: \"frame\",\n        endpoint: service.endpoint,\n        params: service.params || {},\n        data: service.data || {},\n      }\n  }\n}\n","import {SERVICE_PRAGMA} from \"./__vsn\"\n\n// {\n//    \"f_type\": \"Service\",\n//    \"f_vsn\": \"1.0.0\",\n//    \"type\": \"back-channel-rpc\",\n//    \"endpoint\": \"https://rawr\",\n//    \"method\": \"HTTP/GET\", // HTTP/GET | HTTP/POST\n//    \"data\": {},           // included in body of rpc\n//    \"params\": {},         // included as query params on endpoint url\n// }\nexport function normalizeBackChannelRpc(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return {\n        ...SERVICE_PRAGMA,\n        type: \"back-channel-rpc\",\n        endpoint: service.endpoint,\n        method: service.method,\n        params: service.params || {},\n        data: service.data || {},\n      }\n  }\n}\n","import {SERVICE_PRAGMA, OPEN_ID_PRAGMA} from \"./__vsn\"\n\n// {\n//   \"f_type\": \"Service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"open-id\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"method: \"data\",\n//   \"data\": {\n//      \"profile\": {\n//        \"name\": \"Bob\",\n//        \"family_name\": \"Builder\",\n//        \"given_name\": \"Robert\",\n//        \"middle_name\": \"the\",\n//        \"nickname\": \"Bob the Builder\",\n//        \"perferred_username\": \"bob\",\n//        \"profile\": \"https://www.bobthebuilder.com/\",\n//        \"picture\": \"https://avatars.onflow.org/avatar/bob\",\n//        \"gender\": \"...\",\n//        \"birthday\": \"2001-01-18\",\n//        \"zoneinfo\": \"America/Vancouver\",\n//        \"locale\": \"en-us\",\n//        \"updated_at\": \"1614970797388\"\n//      },\n//      \"email\": {\n//        \"email\": \"bob@bob.bob\",\n//        \"email_verified\": true\n//      },\n//      \"address\": {\n//        \"address\": \"One Apple Park Way, Cupertino, CA 95014, USA\"\n//      },\n//      \"phone\": {\n//        \"phone_number\": \"+1 (xxx) yyy-zzzz\",\n//        \"phone_number_verified\": true\n//      },\n//      \"social\": {\n//        \"twitter\": \"@_qvvg\",\n//        \"twitter_verified\": true\n//      },\n//   }\n// }\nexport function normalizeOpenId(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return null\n  }\n}\n","// {\n//   \"f_type\": \"Service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"user-signature\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"endpoint\": \"https://rawr\",\n//   \"method\": \"IFRAME/RPC\", // HTTP/POST | IFRAME/RPC | HTTP/RPC\n//   \"id\": \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\", // wallets internal id for the user\n//   \"data\": {}, // included in body of user-signature request\n//   \"params\": {}, // included as query params on endpoint url\n// }\nexport function normalizeUserSignature(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      throw new Error(\"Invalid user-signature service\")\n  }\n}\n","import {SERVICE_PRAGMA} from \"./__vsn\"\n\n// {\n//    \"f_type\": \"Service\",\n//    \"f_vsn\": \"1.0.0\",\n//    type: \"local-view\",\n//    method: \"VIEW/IFRAME\",\n//    endpoint: \"https://woot.org/authz/local\",\n//    data: {},\n//    params: {},\n// }\nexport function normalizeLocalView(resp) {\n  if (resp == null) return null\n  if (resp.method == null) {\n    resp = {...resp, type: \"local-view\", method: \"VIEW/IFRAME\"}\n  }\n\n  switch (resp[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return resp\n\n    default:\n      return {\n        ...SERVICE_PRAGMA,\n        type: resp.type || \"local-view\",\n        method: resp.method,\n        endpoint: resp.endpoint,\n        data: resp.data || {},\n        params: resp.params || {},\n      }\n  }\n}\n","// {\n//   \"f_type\": \"Service\",                    // Its a service!\n//   \"f_vsn\": \"1.0.0\",                       // Follows the v1.0.0 spec for the service\n//   \"type\": \"account-proof\",                // the type of service it is\n//   \"method\": \"DATA\",                       // Its data!\n//   \"uid\": \"awesome-wallet#account-proof\",  // A unique identifier for the service\n//   \"data\": {\n//     \"f_type\": \"account-proof\",\n//     \"f_vsn\": \"1.0.0\",\n//     \"nonce\": \"0A1BC2FF\",                  // Nonce signed by the current account-proof (minimum 32 bytes in total, i.e 64 hex characters)\n//     \"address\": \"0xUSER\",                  // The user's address (8 bytes, i.e 16 hex characters)\n//     \"signature\": CompositeSignature,      // address (sans-prefix), keyId, signature (hex)\n// }\n\nexport function normalizeAccountProof(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      throw new Error(`FCL Normalizer Error: Invalid account-proof service`)\n  }\n}\n","// {\n//   \"f_type\": \"Service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"authn-refresh\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"endpoint\": \"https://rawr\",\n//   \"method\": \"HTTP/POST\",  // \"HTTP/POST\", // HTTP/POST | IFRAME/RPC | HTTP/RPC\n//   \"id\": \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\", // wallets internal id for the user\n//   \"data\": {}, // included in body of request\n//   \"params\": {}, // included as query params on endpoint url\n// }\nexport function normalizeAuthnRefresh(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      throw new Error(\"Invalid authn-refresh service\")\n  }\n}\n","import {normalizeAuthn} from \"./authn\"\nimport {normalizeAuthz} from \"./authz\"\nimport {normalizePreAuthz} from \"./pre-authz\"\nimport {normalizeFrame} from \"./frame\"\nimport {normalizeBackChannelRpc} from \"./back-channel-rpc\"\nimport {normalizeOpenId} from \"./open-id\"\nimport {normalizeUserSignature} from \"./user-signature\"\nimport {normalizeLocalView} from \"./local-view\"\nimport {normalizeAccountProof} from \"./account-proof\"\nimport {normalizeAuthnRefresh} from \"./authn-refresh\"\n\nexport function normalizeServices(services, data) {\n  return services.map(service => normalizeService(service, data))\n}\n\nconst serviceNormalizers = {\n  \"back-channel-rpc\": normalizeBackChannelRpc,\n  \"pre-authz\": normalizePreAuthz,\n  authz: normalizeAuthz,\n  authn: normalizeAuthn,\n  frame: normalizeFrame,\n  \"open-id\": normalizeOpenId,\n  \"user-signature\": normalizeUserSignature,\n  \"local-view\": normalizeLocalView,\n  \"account-proof\": normalizeAccountProof,\n  \"authn-refresh\": normalizeAuthnRefresh,\n}\n\nexport function normalizeService(service, data) {\n  try {\n    var normalized = serviceNormalizers[service.type](service, data)\n    return normalized\n  } catch (error) {\n    console.error(\n      `Unrecognized FCL Service Type [${service.type}]`,\n      service,\n      error\n    )\n    return service\n  }\n}\n","import {withPrefix} from \"@onflow/util-address\"\nimport * as rlp from \"@onflow/rlp\"\nimport {fetchServices} from \"./fetch-services\"\nimport {mergeServices} from \"./merge-services\"\nimport {USER_PRAGMA} from \"../normalizers/service/__vsn\"\nimport {normalizeService} from \"../normalizers/service/service\"\n\nfunction deriveCompositeId(authn) {\n  return rlp\n    .encode([\n      authn.provider.address || authn.provider.name || \"UNSPECIFIED\",\n      authn.id,\n    ])\n    .toString(\"hex\")\n}\n\nfunction normalizeData(data) {\n  data.addr = data.addr ? withPrefix(data.addr) : null\n  data.paddr = data.paddr ? withPrefix(data.paddr) : null\n  return data\n}\n\nfunction findService(type, services) {\n  return services.find(d => d.type === type)\n}\n\nexport async function buildUser(data) {\n  data = normalizeData(data)\n\n  var services = mergeServices(\n    data.services || [],\n    await fetchServices(data.hks, data.code)\n  ).map(service => normalizeService(service, data))\n\n  const authn = findService(\"authn\", services)\n\n  return {\n    ...USER_PRAGMA,\n    addr: withPrefix(data.addr),\n    cid: deriveCompositeId(authn),\n    loggedIn: true,\n    services: services,\n    expiresAt: data.expires,\n  }\n}\n","export function serviceOfType(services = [], type) {\n  return services.find(service => service.type === type)\n}\n","export function serviceEndpoint(service) {\n  const url = new URL(service.endpoint)\n  url.searchParams.append(\"l6n\", window.location.origin)\n  if (service.params != null) {\n    for (let [key, value] of Object.entries(service.params || {})) {\n      url.searchParams.append(key, value)\n    }\n  }\n  return url\n}\n","import {serviceEndpoint} from \"./service-endpoint\"\n\nexport function fetchService(service, opts = {}) {\n  const method = opts.method || \"POST\"\n  const body =\n    method === \"GET\"\n      ? undefined\n      : JSON.stringify(opts.data || service.data || {})\n\n  return fetch(serviceEndpoint(service), {\n    method: method,\n    headers: {\n      ...(service.headers || {}),\n      ...(opts.headers || {}),\n      \"Content-Type\": \"application/json\",\n    },\n    body: body,\n  }).then(d => d.json())\n}\n","import {POLLING_RESPONSE_PRAGMA} from \"./__vsn\"\nimport {normalizeBackChannelRpc} from \"./back-channel-rpc\"\nimport {normalizeFrame} from \"./frame\"\n\n// {\n//    \"f_type\": \"PollingResponse\",\n//    \"f_vsn\": \"1.0.0\",\n//    \"status\": \"PENDING\", // PENDING | APPROVED | DECLINED | REDIRECT\n//    \"reason\": null,      // Reason for Declining Transaction\n//    \"data\": null,        // Return value for APPROVED\n//    \"updates\": BackChannelRpc,\n//    \"local\": Frame,\n// }\nexport function normalizePollingResponse(resp) {\n  if (resp == null) return null\n\n  switch (resp[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return resp\n\n    default:\n      return {\n        ...POLLING_RESPONSE_PRAGMA,\n        status: resp.status ?? \"APPROVED\",\n        reason: resp.reason ?? null,\n        data: resp.compositeSignature || resp.data || {...resp} || {},\n        updates: normalizeBackChannelRpc(resp.authorizationUpdates),\n        local: normalizeFrame((resp.local || [])[0]),\n      }\n  }\n}\n","import {normalizePollingResponse} from \"../../../../normalizers/service/polling-response\"\nimport {serviceEndpoint} from \"./service-endpoint\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {fetchService} from \"./fetch-service\"\n\nconst OPTIONS = {\n  \"HTTP/GET\": \"GET\",\n  \"HTTP/POST\": \"POST\",\n}\n\nconst serviceMethod = service => {\n  invariant(\n    OPTIONS[service.method],\n    \"Invalid Service Method for type back-channel-rpc\",\n    {service}\n  )\n  return OPTIONS[service.method]\n}\n\nconst serviceBody = service => {\n  if (service.method === \"HTTP/GET\") return undefined\n  if (service.method === \"HTTP/POST\" && service.data != null)\n    return JSON.stringify(service.data)\n  return undefined\n}\n\nexport async function poll(service, canContinue = () => true) {\n  invariant(service, \"Missing Polling Service\", {service})\n  if (!canContinue()) throw new Error(\"Externally Halted\")\n\n  const resp = await fetchService(service, {\n    method: serviceMethod(service),\n  }).then(normalizePollingResponse)\n\n  switch (resp.status) {\n    case \"APPROVED\":\n      return resp.data\n    case \"DECLINED\":\n      throw new Error(`Declined: ${resp.reason || \"No reason supplied.\"}`)\n    default:\n      await new Promise(r => setTimeout(r, 500))\n      return poll(resp.updates, canContinue)\n  }\n}\n","import {invariant} from \"@onflow/util-invariant\"\n\nconst FRAME = \"FCL_IFRAME\"\n\nconst FRAME_STYLES = `\n  position:fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  height: 100%;\n  width: 100vw;\n  display:block;\n  background:rgba(0,0,0,0.25);\n  z-index: 2147483647;\n  box-sizing: border-box;\n  color-scheme: light;\n`\n\nexport function renderFrame(src) {\n  invariant(\n    !document.getElementById(FRAME),\n    \"Attempt at triggering multiple Frames\",\n    {src}\n  )\n\n  const $frame = document.createElement(\"iframe\")\n  $frame.src = src\n  $frame.id = FRAME\n  $frame.allow = \"usb *; hid *\"\n  $frame.frameBorder = \"0\"\n  $frame.style.cssText = FRAME_STYLES\n  document.body.append($frame)\n\n  const unmount = () => {\n    if (document.getElementById(FRAME)) {\n      document.getElementById(FRAME).remove()\n    }\n  }\n\n  return [$frame.contentWindow, unmount]\n}\n","const POP = \"FCL_POP\"\n\nlet popup = null\nlet previousUrl = null\n\nfunction popupWindow(url, windowName, win, w, h) {\n  const y = win.top.outerHeight / 2 + win.top.screenY - h / 2\n  const x = win.top.outerWidth / 2 + win.top.screenX - w / 2\n  const popup = win.open(\n    url,\n    windowName,\n    `toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${w}, height=${h}, top=${y}, left=${x}`\n  )\n  if (!popup)\n    throw new Error(\"Popup failed to open (was it blocked by a popup blocker?)\")\n  return popup\n}\n\nexport function renderPop(src) {\n  if (popup == null || popup?.closed) {\n    popup = popupWindow(src, POP, window, 640, 770)\n  } else if (previousUrl !== src) {\n    popup.location.replace(src)\n    popup.focus()\n  } else {\n    popup.focus()\n  }\n\n  previousUrl = src\n\n  const unmount = () => {\n    if (popup && !popup.closed) {\n      popup.close()\n    }\n    popup = null\n  }\n\n  return [popup, unmount]\n}\n","const TAB = \"FCL_TAB\"\n\nlet tab = null\nlet previousUrl = null\n\nexport function renderTab(src) {\n  if (tab == null || tab?.closed) {\n    tab = window.open(src, \"_blank\")\n    if (!tab)\n      throw new Error(\"Tab failed to open (was it blocked by the browser?)\")\n  } else if (previousUrl !== src) {\n    tab.location.replace(src)\n    tab.focus()\n  } else {\n    tab.focus()\n  }\n\n  previousUrl = src\n\n  const unmount = () => {\n    if (tab && !tab.closed) {\n      tab.close()\n    }\n    tab = null\n  }\n\n  return [tab, unmount]\n}\n","import {renderFrame} from \"./strategies/utils/render-frame\"\nimport {renderPop} from \"./strategies/utils/render-pop\"\nimport {renderTab} from \"./strategies/utils/render-tab\"\nimport {serviceEndpoint} from \"./strategies/utils/service-endpoint\"\n\nconst VIEWS = {\n  \"VIEW/IFRAME\": renderFrame,\n  \"VIEW/POP\": renderPop,\n  \"VIEW/TAB\": renderTab,\n}\n\nexport async function execLocal(service, opts = {}) {\n  try {\n    return VIEWS[service.method](serviceEndpoint(service), opts)\n  } catch (error) {\n    console.error(\"execLocal({service, opts = {}})\", error, {service, opts})\n    throw error\n  }\n}\n","import {fetchService} from \"./utils/fetch-service\"\nimport {normalizePollingResponse} from \"../../../normalizers/service/polling-response\"\nimport {normalizeLocalView} from \"../../../normalizers/service/local-view\"\nimport {poll} from \"./utils/poll\"\nimport {execLocal} from \"../exec-local\"\nimport {VERSION} from \"../../../VERSION\"\n\nexport async function execHttpPost({service, body, config, opts}) {\n  const resp = await fetchService(service, {\n    data: {\n      fclVersion: VERSION,\n      service: {\n        params: service.params,\n        data: service.data,\n        type: service.type,\n      },\n      config,\n      ...body,\n    },\n  }).then(normalizePollingResponse)\n\n  if (resp.status === \"APPROVED\") {\n    return resp.data\n  } else if (resp.status === \"DECLINED\") {\n    throw new Error(`Declined: ${resp.reason || \"No reason supplied.\"}`)\n  } else if (resp.status === \"REDIRECT\") {\n    return resp\n  } else if (resp.status === \"PENDING\") {\n    var canContinue = true\n    const [_, unmount] = await execLocal(normalizeLocalView(resp.local))\n\n    const close = () => {\n      try {\n        unmount()\n        canContinue = false\n      } catch (error) {\n        console.error(\"Frame Close Error\", error)\n      }\n    }\n\n    return poll(resp.updates, () => canContinue)\n      .then(serviceResponse => {\n        close()\n        return serviceResponse\n      })\n      .catch(error => {\n        console.error(error)\n        close()\n        throw error\n      })\n  } else {\n    console.error(`Auto Decline: Invalid Response`, {service, resp})\n    throw new Error(`Auto Decline: Invalid Response`)\n  }\n}\n","const CLOSE_EVENT = \"FCL:VIEW:CLOSE\"\nconst READY_EVENT = \"FCL:VIEW:READY\"\nconst RESPONSE_EVENT = \"FCL:VIEW:RESPONSE\"\n\nconst _ = e => typeof e === \"string\" && e.toLowerCase()\n\nconst IGNORE = new Set([\n  \"monetizationstart\",\n  \"monetizationpending\",\n  \"monetizationprogress\",\n  \"monetizationstop\",\n])\n\nconst deprecate = (was, want) =>\n  console.warn(\n    \"DEPRECATION NOTICE\",\n    `Received ${was}, please use ${want} for this and future versions of FCL`\n  )\n\nexport const buildMessageHandler =\n  ({close, send, onReady, onResponse, onMessage}) =>\n  e => {\n    try {\n      if (typeof e.data !== \"object\") return\n      if (IGNORE.has(e.data.type)) return\n      if (_(e.data.type) === _(CLOSE_EVENT)) close()\n      if (_(e.data.type) === _(READY_EVENT)) onReady(e, {send, close})\n      if (_(e.data.type) === _(RESPONSE_EVENT)) onResponse(e, {send, close})\n      onMessage(e, {send, close})\n\n      // Backwards Compatible\n      if (_(e.data.type) === _(\"FCL:FRAME:READY\")) {\n        deprecate(e.data.type, READY_EVENT)\n        onReady(e, {send, close})\n      }\n      if (_(e.data.type) === _(\"FCL:FRAME:RESPONSE\")) {\n        deprecate(e.data.type, RESPONSE_EVENT)\n        onResponse(e, {send, close})\n      }\n      if (_(e.data.type) === _(\"FCL:FRAME:CLOSE\")) {\n        deprecate(e.data.type, CLOSE_EVENT)\n        close()\n      }\n      //\n      if (_(e.data.type) === _(\"FCL::CHALLENGE::RESPONSE\")) {\n        deprecate(e.data.type, RESPONSE_EVENT)\n        onResponse(e, {send, close})\n      }\n      if (_(e.data.type) === _(\"FCL::AUTHZ_READY\")) {\n        deprecate(e.data.type, READY_EVENT)\n        onReady(e, {send, close})\n      }\n      if (_(e.data.type) === _(\"FCL::CHALLENGE::CANCEL\")) {\n        deprecate(e.data.type, CLOSE_EVENT)\n        close()\n      }\n      if (_(e.data.type) === _(\"FCL::CANCEL\")) {\n        deprecate(e.data.type, CLOSE_EVENT)\n        close()\n      }\n    } catch (error) {\n      console.error(\"Frame Callback Error\", error)\n      close()\n    }\n  }\n","import {renderFrame} from \"./render-frame\"\nimport {serviceEndpoint} from \"./service-endpoint\"\nimport {buildMessageHandler} from \"./buildMessageHandler\"\n\nconst noop = () => {}\n\nexport function frame(service, opts = {}) {\n  if (service == null) return {send: noop, close: noop}\n\n  const onClose = opts.onClose || noop\n  const onMessage = opts.onMessage || noop\n  const onReady = opts.onReady || noop\n  const onResponse = opts.onResponse || noop\n\n  const handler = buildMessageHandler({\n    close,\n    send,\n    onReady,\n    onResponse,\n    onMessage,\n  })\n  window.addEventListener(\"message\", handler)\n\n  const [$frame, unmount] = renderFrame(serviceEndpoint(service))\n  return {send, close}\n\n  function close() {\n    try {\n      window.removeEventListener(\"message\", handler)\n      unmount()\n      onClose()\n    } catch (error) {\n      console.error(\"Frame Close Error\", error)\n    }\n  }\n\n  function send(msg) {\n    try {\n      $frame.postMessage(JSON.parse(JSON.stringify(msg || {})), \"*\")\n    } catch (error) {\n      console.error(\"Frame Send Error\", msg, error)\n    }\n  }\n}\n","import {uid} from \"@onflow/util-uid\"\nimport {frame} from \"./utils/frame\"\nimport {normalizePollingResponse} from \"../../../normalizers/service/polling-response\"\nimport {VERSION} from \"../../../VERSION\"\n\nexport function execIframeRPC({service, body, config, opts}) {\n  return new Promise((resolve, reject) => {\n    const id = uid()\n    const includeOlderJsonRpcCall = opts.includeOlderJsonRpcCall\n\n    frame(service, {\n      async onReady(_, {send}) {\n        try {\n          send({\n            type: \"FCL:VIEW:READY:RESPONSE\",\n            fclVersion: VERSION,\n            body,\n            service: {\n              params: service.params,\n              data: service.data,\n              type: service.type,\n            },\n            config,\n          })\n          send({\n            fclVersion: VERSION,\n            type: \"FCL:FRAME:READY:RESPONSE\",\n            body,\n            service: {\n              params: service.params,\n              data: service.data,\n              type: service.type,\n            },\n            config,\n            deprecated: {\n              message:\n                \"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE\",\n            },\n          })\n          if (includeOlderJsonRpcCall) {\n            send({\n              jsonrpc: \"2.0\",\n              id: id,\n              method: \"fcl:sign\",\n              params: [body, service.params],\n              deprecated: {\n                message:\n                  \"jsonrpc is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE\",\n              },\n            })\n          }\n        } catch (error) {\n          throw error\n        }\n      },\n\n      onResponse(e, {close}) {\n        try {\n          if (typeof e.data !== \"object\") return\n          const resp = normalizePollingResponse(e.data)\n\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data)\n              close()\n              break\n\n            case \"DECLINED\":\n              reject(`Declined: ${resp.reason || \"No reason supplied\"}`)\n              close()\n              break\n\n            case \"REDIRECT\":\n              resolve(resp)\n              close()\n              break\n\n            default:\n              reject(`Declined: No reason supplied`)\n              close()\n              break\n          }\n        } catch (error) {\n          console.error(\"execIframeRPC onResponse error\", error)\n          throw error\n        }\n      },\n\n      onMessage(e, {close}) {\n        try {\n          if (typeof e.data !== \"object\") return\n          if (e.data.jsonrpc !== \"2.0\") return\n          if (e.data.id !== id) return\n          const resp = normalizePollingResponse(e.data.result)\n\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data)\n              close()\n              break\n\n            case \"DECLINED\":\n              reject(`Declined: ${resp.reason || \"No reason supplied\"}`)\n              close()\n              break\n\n            case \"REDIRECT\":\n              resolve(resp)\n              close()\n              break\n\n            default:\n              reject(`Declined: No reason supplied`)\n              close()\n              break\n          }\n        } catch (error) {\n          console.error(\"execIframeRPC onMessage error\", error)\n          throw error\n        }\n      },\n\n      onClose() {\n        reject(`Declined: Externally Halted`)\n      },\n    })\n  })\n}\n","import {renderPop} from \"./render-pop\"\nimport {serviceEndpoint} from \"./service-endpoint\"\nimport {buildMessageHandler} from \"./buildMessageHandler\"\n\nconst noop = () => {}\n\nexport function pop(service, opts = {}) {\n  if (service == null) return {send: noop, close: noop}\n\n  const onClose = opts.onClose || noop\n  const onMessage = opts.onMessage || noop\n  const onReady = opts.onReady || noop\n  const onResponse = opts.onResponse || noop\n\n  const handler = buildMessageHandler({\n    close,\n    send,\n    onReady,\n    onResponse,\n    onMessage,\n  })\n  window.addEventListener(\"message\", handler)\n\n  const [$pop, unmount] = renderPop(serviceEndpoint(service))\n\n  const timer = setInterval(function () {\n    if ($pop && $pop.closed) {\n      close()\n    }\n  }, 500)\n\n  return {send, close}\n\n  function close() {\n    try {\n      window.removeEventListener(\"message\", handler)\n      clearInterval(timer)\n      unmount()\n      onClose()\n    } catch (error) {\n      console.error(\"Popup Close Error\", error)\n    }\n  }\n\n  function send(msg) {\n    try {\n      $pop.postMessage(JSON.parse(JSON.stringify(msg || {})), \"*\")\n    } catch (error) {\n      console.error(\"Popup Send Error\", msg, error)\n    }\n  }\n}\n","import {uid} from \"@onflow/util-uid\"\nimport {pop} from \"./utils/pop\"\nimport {normalizePollingResponse} from \"../../../normalizers/service/polling-response\"\nimport {VERSION} from \"../../../VERSION\"\n\nexport function execPopRPC({service, body, config, opts}) {\n  return new Promise((resolve, reject) => {\n    const id = uid()\n    const {redir, includeOlderJsonRpcCall} = opts\n\n    pop(service, {\n      async onReady(_, {send}) {\n        try {\n          send({\n            fclVersion: VERSION,\n            type: \"FCL:VIEW:READY:RESPONSE\",\n            body,\n            service: {\n              params: service.params,\n              data: service.data,\n              type: service.type,\n            },\n            config,\n          })\n          send({\n            fclVersion: VERSION,\n            type: \"FCL:FRAME:READY:RESPONSE\",\n            body,\n            service: {\n              params: service.params,\n              data: service.data,\n              type: service.type,\n            },\n            config,\n            deprecated: {\n              message:\n                \"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE\",\n            },\n          })\n          if (includeOlderJsonRpcCall) {\n            send({\n              jsonrpc: \"2.0\",\n              id: id,\n              method: \"fcl:sign\",\n              params: [body, service.params],\n            })\n          }\n        } catch (error) {\n          throw error\n        }\n      },\n\n      onResponse(e, {close}) {\n        try {\n          if (typeof e.data !== \"object\") return\n          const resp = normalizePollingResponse(e.data)\n\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data)\n              !redir && close()\n              break\n\n            case \"DECLINED\":\n              reject(`Declined: ${resp.reason || \"No reason supplied\"}`)\n              close()\n              break\n\n            case \"REDIRECT\":\n              resolve(resp)\n              close()\n              break\n\n            default:\n              reject(`Declined: No reason supplied`)\n              close()\n              break\n          }\n        } catch (error) {\n          console.error(\"execPopRPC onResponse error\", error)\n          throw error\n        }\n      },\n\n      onMessage(e, {close}) {\n        try {\n          if (typeof e.data !== \"object\") return\n          if (e.data.jsonrpc !== \"2.0\") return\n          if (e.data.id !== id) return\n          const resp = normalizePollingResponse(e.data.result)\n\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data)\n              !redir && close()\n              break\n\n            case \"DECLINED\":\n              reject(`Declined: ${resp.reason || \"No reason supplied\"}`)\n              close()\n              break\n\n            case \"REDIRECT\":\n              resolve(resp)\n              close()\n              break\n\n            default:\n              reject(`Declined: No reason supplied`)\n              close()\n              break\n          }\n        } catch (error) {\n          console.error(\"execPopRPC onMessage error\", error)\n          throw error\n        }\n      },\n\n      onClose() {\n        reject(`Declined: Externally Halted`)\n      },\n    })\n  })\n}\n","import {renderTab} from \"./render-tab\"\nimport {serviceEndpoint} from \"./service-endpoint\"\nimport {buildMessageHandler} from \"./buildMessageHandler\"\n\nconst noop = () => {}\n\nexport function tab(service, opts = {}) {\n  if (service == null) return {send: noop, close: noop}\n\n  const onClose = opts.onClose || noop\n  const onMessage = opts.onMessage || noop\n  const onReady = opts.onReady || noop\n  const onResponse = opts.onResponse || noop\n\n  const handler = buildMessageHandler({\n    close,\n    send,\n    onReady,\n    onResponse,\n    onMessage,\n  })\n  window.addEventListener(\"message\", handler)\n\n  const [$tab, unmount] = renderTab(serviceEndpoint(service))\n  const timer = setInterval(function () {\n    if ($tab && $tab.closed) {\n      close()\n    }\n  }, 500)\n\n  return {send, close}\n\n  function close() {\n    try {\n      window.removeEventListener(\"message\", handler)\n      clearInterval(timer)\n      unmount()\n      onClose()\n    } catch (error) {\n      console.error(\"Tab Close Error\", error)\n    }\n  }\n\n  function send(msg) {\n    try {\n      $tab.postMessage(JSON.parse(JSON.stringify(msg || {})), \"*\")\n    } catch (error) {\n      console.error(\"Tab Send Error\", msg, error)\n    }\n  }\n}\n","import {uid} from \"@onflow/util-uid\"\nimport {tab} from \"./utils/tab\"\nimport {normalizePollingResponse} from \"../../../normalizers/service/polling-response\"\nimport {VERSION} from \"../../../VERSION\"\n\nexport function execTabRPC({service, body, config, opts}) {\n  return new Promise((resolve, reject) => {\n    const id = uid()\n    const {redir, includeOlderJsonRpcCall} = opts\n\n    tab(service, {\n      async onReady(_, {send}) {\n        try {\n          send({\n            fclVersion: VERSION,\n            type: \"FCL:VIEW:READY:RESPONSE\",\n            body,\n            service: {\n              params: service.params,\n              data: service.data,\n              type: service.type,\n            },\n            config,\n          })\n          send({\n            fclVersion: VERSION,\n            type: \"FCL:FRAME:READY:RESPONSE\",\n            body,\n            service: {\n              params: service.params,\n              data: service.data,\n              type: service.type,\n            },\n            config,\n            deprecated: {\n              message:\n                \"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE\",\n            },\n          })\n          if (includeOlderJsonRpcCall) {\n            send({\n              jsonrpc: \"2.0\",\n              id: id,\n              method: \"fcl:sign\",\n              params: [body, service.params],\n            })\n          }\n        } catch (error) {\n          throw error\n        }\n      },\n\n      onResponse(e, {close}) {\n        try {\n          if (typeof e.data !== \"object\") return\n          const resp = normalizePollingResponse(e.data)\n\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data)\n              !redir && close()\n              break\n\n            case \"DECLINED\":\n              reject(`Declined: ${resp.reason || \"No reason supplied\"}`)\n              close()\n              break\n\n            case \"REDIRECT\":\n              resolve(resp)\n              close()\n              break\n\n            default:\n              reject(`Declined: No reason supplied`)\n              close()\n              break\n          }\n        } catch (error) {\n          console.error(\"execPopRPC onResponse error\", error)\n          throw error\n        }\n      },\n\n      onMessage(e, {close}) {\n        try {\n          if (typeof e.data !== \"object\") return\n          if (e.data.jsonrpc !== \"2.0\") return\n          if (e.data.id !== id) return\n          const resp = normalizePollingResponse(e.data.result)\n\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data)\n              !redir && close()\n              break\n\n            case \"DECLINED\":\n              reject(`Declined: ${resp.reason || \"No reason supplied\"}`)\n              close()\n              break\n\n            case \"REDIRECT\":\n              resolve(resp)\n              close()\n              break\n\n            default:\n              reject(`Declined: No reason supplied`)\n              close()\n              break\n          }\n        } catch (error) {\n          console.error(\"execPopRPC onMessage error\", error)\n          throw error\n        }\n      },\n\n      onClose() {\n        reject(`Declined: Externally Halted`)\n      },\n    })\n  })\n}\n","import {buildMessageHandler} from \"./buildMessageHandler\"\n\nconst noop = () => {}\n\nexport function extension(service, opts = {}) {\n  if (service == null) return {send: noop, close: noop}\n\n  const onClose = opts.onClose || noop\n  const onMessage = opts.onMessage || noop\n  const onReady = opts.onReady || noop\n  const onResponse = opts.onResponse || noop\n\n  const handler = buildMessageHandler({\n    close,\n    send,\n    onReady,\n    onResponse,\n    onMessage,\n  })\n  window.addEventListener(\"message\", handler)\n\n  send({service})\n\n  return {send, close}\n\n  function close() {\n    try {\n      window.removeEventListener(\"message\", handler)\n      onClose()\n    } catch (error) {\n      console.error(\"Ext Close Error\", error)\n    }\n  }\n\n  function send(msg) {\n    try {\n      window && window.postMessage(JSON.parse(JSON.stringify(msg || {})), \"*\")\n    } catch (error) {\n      console.error(\"Ext Send Error\", msg, error)\n    }\n  }\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {extension} from \"./utils/extension\"\nimport {normalizePollingResponse} from \"../../../normalizers/service/polling-response\"\nimport {VERSION} from \"../../../VERSION\"\n\nexport function execExtRPC({service, body, config, opts}) {\n  return new Promise((resolve, reject) => {\n    extension(service, {\n      async onReady(_, {send}) {\n        try {\n          send({\n            fclVersion: VERSION,\n            type: \"FCL:VIEW:READY:RESPONSE\",\n            body,\n            service: {\n              params: service.params,\n              data: service.data,\n              type: service.type,\n            },\n            config,\n          })\n        } catch (error) {\n          throw error\n        }\n      },\n\n      onResponse(e, {close}) {\n        try {\n          if (typeof e.data !== \"object\") return\n          const resp = normalizePollingResponse(e.data)\n\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data)\n              close()\n              break\n\n            case \"DECLINED\":\n              reject(`Declined: ${resp.reason || \"No reason supplied\"}`)\n              close()\n              break\n\n            case \"REDIRECT\":\n              resolve(resp)\n              close()\n              break\n\n            default:\n              reject(`Declined: No reason supplied`)\n              close()\n              break\n          }\n        } catch (error) {\n          console.error(\"execExtRPC onResponse error\", error)\n          throw error\n        }\n      },\n\n      onClose() {\n        reject(`Declined: Externally Halted`)\n      },\n    })\n  })\n}\n","import {execHttpPost} from \"./strategies/http-post\"\nimport {execIframeRPC} from \"./strategies/iframe-rpc\"\nimport {execPopRPC} from \"./strategies/pop-rpc\"\nimport {execTabRPC} from \"./strategies/tab-rpc\"\nimport {execExtRPC} from \"./strategies/ext-rpc\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {LEVELS, log} from \"@onflow/util-logger\"\nimport {isRequired, isString, isObject, isFunc} from \"../../exec/utils/is\"\n\nconst CORE_STRATEGIES = {\n  \"HTTP/RPC\": execHttpPost,\n  \"HTTP/POST\": execHttpPost,\n  \"IFRAME/RPC\": execIframeRPC,\n  \"POP/RPC\": execPopRPC,\n  \"TAB/RPC\": execTabRPC,\n  \"EXT/RPC\": execExtRPC,\n}\n\nconst supportedPlugins = [\"ServicePlugin\"]\nconst supportedServicePlugins = [\"discovery-service\"]\n\nconst validateDiscoveryPlugin = servicePlugin => {\n  const {services, serviceStrategy} = servicePlugin\n  invariant(\n    Array.isArray(services) && services.length,\n    \"Array of Discovery Services is required\"\n  )\n\n  for (const ds of services) {\n    invariant(\n      isRequired(ds.f_type) && ds.f_type === \"Service\",\n      \"Service is required\"\n    )\n    invariant(\n      isRequired(ds.type) && ds.type === \"authn\",\n      `Service must be type authn. Received ${ds.type}`\n    )\n    invariant(\n      ds.method in CORE_STRATEGIES || serviceStrategy.method === ds.method,\n      `Service method ${ds.method} is not supported`\n    )\n  }\n\n  invariant(isRequired(serviceStrategy), \"Service strategy is required\")\n  invariant(\n    isRequired(serviceStrategy.method) && isString(serviceStrategy.method),\n    \"Service strategy method is required\"\n  )\n  invariant(\n    isRequired(serviceStrategy.exec) && isFunc(serviceStrategy.exec),\n    \"Service strategy exec function is required\"\n  )\n\n  return {discoveryServices: services, serviceStrategy}\n}\n\nconst ServiceRegistry = () => {\n  let services = new Set()\n  let strategies = new Map(Object.entries(CORE_STRATEGIES))\n\n  const add = servicePlugin => {\n    invariant(\n      supportedServicePlugins.includes(servicePlugin.type),\n      `Service Plugin type ${servicePlugin.type} is not supported`\n    )\n    if (servicePlugin.type === \"discovery-service\") {\n      const {discoveryServices, serviceStrategy} =\n        validateDiscoveryPlugin(servicePlugin)\n      setServices(discoveryServices)\n      if (!strategies.has(serviceStrategy.method)) {\n        strategies.set(serviceStrategy.method, serviceStrategy.exec)\n      } else {\n        log({\n          title: `Add Service Plugin`,\n          message: `Service strategy for ${serviceStrategy.method} already exists`,\n          level: LEVELS.warn,\n        })\n      }\n    }\n  }\n\n  const setServices = discoveryServices =>\n    (services = new Set([...discoveryServices]))\n\n  const getServices = () => [...services]\n\n  const getStrategy = method => strategies.get(method)\n\n  const getStrategies = () => [...strategies.keys()]\n\n  return Object.freeze({\n    add,\n    getServices,\n    getStrategy,\n    getStrategies,\n  })\n}\n\nconst validatePlugins = plugins => {\n  let pluginsArray\n  invariant(plugins, \"No plugins supplied\")\n\n  if (!Array.isArray(plugins)) {\n    pluginsArray = [plugins]\n  } else {\n    pluginsArray = [...plugins]\n  }\n  for (const p of pluginsArray) {\n    invariant(isRequired(p.name), \"Plugin name is required\")\n    invariant(isRequired(p.f_type), \"Plugin f_type is required\")\n    invariant(\n      supportedPlugins.includes(p.f_type),\n      `Plugin type ${p.f_type} is not supported`\n    )\n  }\n\n  return pluginsArray\n}\n\nconst PluginRegistry = () => {\n  const pluginsMap = new Map()\n\n  const getPlugins = () => pluginsMap\n\n  const add = plugins => {\n    const pluginsArray = validatePlugins(plugins)\n    for (const p of pluginsArray) {\n      pluginsMap.set(p.name, p)\n      if (p.f_type === \"ServicePlugin\") {\n        serviceRegistry.add(p)\n      }\n    }\n  }\n\n  return Object.freeze({\n    add,\n    getPlugins,\n  })\n}\n\nexport const serviceRegistry = ServiceRegistry()\nexport const pluginRegistry = PluginRegistry()\n","import {invariant} from \"@onflow/util-invariant\"\nimport {log, LEVELS} from \"@onflow/util-logger\"\nimport {serviceRegistry} from \"./plugins\"\nimport {configLens} from \"../../default-config\"\nimport {VERSION} from \"../../VERSION\"\n\nconst execStrategy = async ({service, body, config, opts}) => {\n  const strategy = serviceRegistry.getStrategy(service.method)\n  return strategy({service, body, config, opts})\n}\n\nexport async function execService({service, msg = {}, config = {}, opts = {}}) {\n  msg.data = service.data\n  const execConfig = {\n    services: await configLens(/^service\\./),\n    app: await configLens(/^app\\.detail\\./),\n    client: {\n      ...config.client,\n      fclVersion: VERSION,\n      fclLibrary: \"https://github.com/onflow/fcl-js\",\n      hostname: window?.location?.hostname ?? null,\n    },\n  }\n\n  try {\n    const res = await execStrategy({\n      service,\n      body: msg,\n      config: execConfig,\n      opts,\n    })\n    if (res.status === \"REDIRECT\") {\n      invariant(\n        service.type === res.data.type,\n        \"Cannot shift recursive service type in execService\"\n      )\n      return await execService({\n        service: res.data,\n        msg,\n        config: execConfig,\n        opts,\n      })\n    } else {\n      return res\n    }\n  } catch (error) {\n    log({\n      title: `Error on execService ${service?.type}`,\n      message: error,\n      level: LEVELS.error,\n    })\n    throw error\n  }\n}\n","import {COMPOSITE_SIGNATURE_PRAGMA} from \"./__vsn\"\nimport {sansPrefix} from \"@onflow/util-address\"\n\n// {\n//    \"f_type\": \"CompositeSignature\",\n//    \"f_vsn\": \"1.0.0\",\n//    \"addr\": \"_____\",         // sans-prefix\n//    \"signature\": \"adfe1234\", // hex\n//    \"keyId\": 3,\n// }\nexport function normalizeCompositeSignature(resp) {\n  if (resp == null) return null\n\n  switch (resp[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return resp\n\n    default:\n      return {\n        ...COMPOSITE_SIGNATURE_PRAGMA,\n        addr: sansPrefix(resp.addr || resp.address),\n        signature: resp.signature || resp.sig,\n        keyId: resp.keyId,\n      }\n  }\n}\n","import {config} from \"@onflow/config\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {serviceRegistry} from \"../current-user/exec-service/plugins\"\n\nexport const makeDiscoveryServices = async () => {\n  const extensionServices = window?.fcl_extensions || []\n  return [...extensionServices, ...serviceRegistry.getServices()]\n}\n\nexport async function getDiscoveryService(service) {\n  const discoveryAuthnInclude = await config.get(\"discovery.authn.include\", [])\n  const discoveryWalletMethod = await config.first([\n    \"discovery.wallet.method\",\n    \"discovery.wallet.method.default\",\n  ])\n  const method = service?.method ? service.method : discoveryWalletMethod\n  const endpoint =\n    service?.endpoint ??\n    (await config.first([\"discovery.wallet\", \"challenge.handshake\"]))\n\n  invariant(\n    endpoint,\n    `\n    If no service is passed to \"authenticate,\" then \"discovery.wallet\" must be defined in fcl config.\n    See: \"https://docs.onflow.org/fcl/reference/api/#setting-configuration-values\"\n    `\n  )\n\n  return {\n    ...service,\n    type: \"authn\",\n    endpoint,\n    method,\n    discoveryAuthnInclude,\n  }\n}\n","import {config} from \"@onflow/config\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {serviceRegistry} from \"../current-user/exec-service/plugins\"\nimport {VERSION} from \"../VERSION\"\nimport {makeDiscoveryServices} from \"./utils\"\n\nexport async function getServices({types}) {\n  const endpoint = await config.get(\"discovery.authn.endpoint\")\n  invariant(\n    Boolean(endpoint),\n    `\"discovery.authn.endpoint\" in config must be defined.`\n  )\n\n  const include = await config.get(\"discovery.authn.include\", [])\n  const url = new URL(endpoint)\n\n  return fetch(url, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      type: types,\n      fclVersion: VERSION,\n      include,\n      clientServices: await makeDiscoveryServices(),\n      supportedStrategies: serviceRegistry.getStrategies(),\n      userAgent: window?.navigator?.userAgent,\n    }),\n  }).then(d => d.json())\n}\n","import {\n  spawn,\n  subscriber,\n  snapshoter,\n  INIT,\n  SUBSCRIBE,\n  UNSUBSCRIBE,\n  send,\n} from \"@onflow/util-actor\"\nimport {getServices} from \"../services\"\nimport {LEVELS, log} from \"@onflow/util-logger\"\n\nexport const SERVICE_ACTOR_KEYS = {\n  AUTHN: \"authn\",\n  RESULTS: \"results\",\n  SNAPSHOT: \"SNAPSHOT\",\n  UPDATED: \"UPDATED\",\n  UPDATE_RESULTS: \"UPDATE_RESULTS\",\n}\n\nconst warn = (fact, msg) => {\n  if (fact) {\n    console.warn(\n      `\n      %cFCL Warning\n      ============================\n      ${msg}\n      For more info, please see the docs: https://docs.onflow.org/fcl/\n      ============================\n      `,\n      \"font-weight:bold;font-family:monospace;\"\n    )\n  }\n}\n\nconst fetchServicesFromDiscovery = async () => {\n  try {\n    const services = await getServices({types: [SERVICE_ACTOR_KEYS.AUTHN]})\n    send(SERVICE_ACTOR_KEYS.AUTHN, SERVICE_ACTOR_KEYS.UPDATE_RESULTS, {\n      results: services,\n    })\n  } catch (error) {\n    log({\n      title: `${error.name} Error fetching Discovery API services.`,\n      message: error.message,\n      level: LEVELS.error,\n    })\n  }\n}\n\nconst HANDLERS = {\n  [INIT]: async ctx => {\n    warn(\n      typeof window === \"undefined\",\n      '\"fcl.discovery\" is only available in the browser.'\n    )\n    // If you call this before the window is loaded extensions will not be set yet\n    if (document.readyState === 'complete') {\n      fetchServicesFromDiscovery()\n    } else {\n      window.onload = async () => {\n        fetchServicesFromDiscovery()\n      }\n    }\n  },\n  [SERVICE_ACTOR_KEYS.UPDATE_RESULTS]: (ctx, _letter, data) => {\n    ctx.merge(data)\n    ctx.broadcast(SERVICE_ACTOR_KEYS.UPDATED, {...ctx.all()})\n  },\n  [SUBSCRIBE]: (ctx, letter) => {\n    ctx.subscribe(letter.from)\n    ctx.send(letter.from, SERVICE_ACTOR_KEYS.UPDATED, {...ctx.all()})\n  },\n  [UNSUBSCRIBE]: (ctx, letter) => ctx.unsubscribe(letter.from),\n  [SERVICE_ACTOR_KEYS.SNAPSHOT]: async (ctx, letter) =>\n    letter.reply({...ctx.all()}),\n}\n\nconst spawnProviders = () => spawn(HANDLERS, SERVICE_ACTOR_KEYS.AUTHN)\n\nconst authn = {\n  subscribe: cb => subscriber(SERVICE_ACTOR_KEYS.AUTHN, spawnProviders, cb),\n  snapshot: () => snapshoter(SERVICE_ACTOR_KEYS.AUTHN, spawnProviders),\n  update: () => fetchServicesFromDiscovery(),\n}\n\nexport default authn\n","import authn from \"./services/authn\"\nexport {getDiscoveryService, makeDiscoveryServices} from \"./utils\"\n\nconst discovery = {\n  authn,\n}\n\nexport {discovery}\n","export function isAndroid() {\n  return (\n    typeof navigator !== \"undefined\" && /android/i.test(navigator.userAgent)\n  )\n}\n\nexport function isSmallIOS() {\n  return (\n    typeof navigator !== \"undefined\" && /iPhone|iPod/.test(navigator.userAgent)\n  )\n}\n\nexport function isLargeIOS() {\n  return typeof navigator !== \"undefined\" && /iPad/.test(navigator.userAgent)\n}\n\nexport function isIOS() {\n  return isSmallIOS() || isLargeIOS()\n}\n\nexport function isMobile() {\n  return isAndroid() || isIOS()\n}\n","import \"../default-config\"\nimport * as t from \"@onflow/types\"\nimport {account, arg} from \"@onflow/sdk\"\nimport {config} from \"@onflow/config\"\nimport {spawn, send, INIT, SUBSCRIBE, UNSUBSCRIBE} from \"@onflow/util-actor\"\nimport {withPrefix, sansPrefix} from \"@onflow/util-address\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {buildUser} from \"./build-user\"\nimport {serviceOfType} from \"./service-of-type\"\nimport {execService} from \"./exec-service\"\nimport {normalizeCompositeSignature} from \"../normalizers/service/composite-signature\"\nimport {getDiscoveryService, makeDiscoveryServices} from \"../discovery\"\nimport {serviceRegistry} from \"./exec-service/plugins\"\nimport {isMobile} from \"../utils\"\n\nexport const isFn = d => typeof d === \"function\"\n\nconst NAME = \"CURRENT_USER\"\nconst UPDATED = \"CURRENT_USER/UPDATED\"\nconst SNAPSHOT = \"SNAPSHOT\"\nconst SET_CURRENT_USER = \"SET_CURRENT_USER\"\nconst DEL_CURRENT_USER = \"DEL_CURRENT_USER\"\n\nconst DATA = `{\n  \"f_type\": \"User\",\n  \"f_vsn\": \"1.0.0\",\n  \"addr\":null,\n  \"cid\":null,\n  \"loggedIn\":null,\n  \"expiresAt\":null,\n  \"services\":[]\n}`\n\nconst getStoredUser = async storage => {\n  const fallback = JSON.parse(DATA)\n  const stored = await storage.get(NAME)\n  if (stored != null && fallback[\"f_vsn\"] !== stored[\"f_vsn\"]) {\n    storage.removeItem(NAME)\n    return fallback\n  }\n  return stored || fallback\n}\n\nconst HANDLERS = {\n  [INIT]: async ctx => {\n    if (typeof window === \"undefined\") {\n      console.warn(\n        `\n        %cFCL Warning\n        ============================\n        \"currentUser\" is only available in the browser.\n        For more info, please see the docs: https://docs.onflow.org/fcl/\n        ============================\n        `,\n        \"font-weight:bold;font-family:monospace;\"\n      )\n    }\n\n    ctx.merge(JSON.parse(DATA))\n    const storage = await config.first([\"fcl.storage\", \"fcl.storage.default\"])\n    if (storage.can) {\n      const user = await getStoredUser(storage)\n      if (notExpired(user)) ctx.merge(user)\n    }\n  },\n  [SUBSCRIBE]: (ctx, letter) => {\n    ctx.subscribe(letter.from)\n    ctx.send(letter.from, UPDATED, {...ctx.all()})\n  },\n  [UNSUBSCRIBE]: (ctx, letter) => {\n    ctx.unsubscribe(letter.from)\n  },\n  [SNAPSHOT]: async (ctx, letter) => {\n    letter.reply({...ctx.all()})\n  },\n  [SET_CURRENT_USER]: async (ctx, letter, data) => {\n    ctx.merge(data)\n    const storage = await config.first([\"fcl.storage\", \"fcl.storage.default\"])\n    if (storage.can) storage.put(NAME, ctx.all())\n    ctx.broadcast(UPDATED, {...ctx.all()})\n  },\n  [DEL_CURRENT_USER]: async (ctx, letter) => {\n    ctx.merge(JSON.parse(DATA))\n    const storage = await config.first([\"fcl.storage\", \"fcl.storage.default\"])\n    if (storage.can) storage.put(NAME, ctx.all())\n    ctx.broadcast(UPDATED, {...ctx.all()})\n  },\n}\n\nconst spawnCurrentUser = () => spawn(HANDLERS, NAME)\n\nfunction notExpired(user) {\n  return (\n    user.expiresAt == null ||\n    user.expiresAt === 0 ||\n    user.expiresAt > Date.now()\n  )\n}\n\nasync function getAccountProofData() {\n  let accountProofDataResolver = await config.get(\"fcl.accountProof.resolver\")\n\n  if (!isFn(accountProofDataResolver)) return\n\n  const accountProofData = await accountProofDataResolver()\n\n  if (accountProofData == null) return\n\n  invariant(\n    typeof accountProofData.appIdentifier === \"string\",\n    \"appIdentifier must be a string\"\n  )\n  invariant(\n    /^[0-9a-f]+$/i.test(accountProofData.nonce),\n    \"Nonce must be a hex string\"\n  )\n\n  return accountProofData\n}\n\nconst makeConfig = async ({discoveryAuthnInclude}) => {\n  return {\n    client: {\n      discoveryAuthnInclude,\n      clientServices: await makeDiscoveryServices(),\n      supportedStrategies: serviceRegistry.getStrategies(),\n    },\n  }\n}\n\nasync function authenticate({service, redir = false} = {}) {\n  if (\n    service &&\n    !service?.provider?.is_installed &&\n    service?.provider?.requires_install\n  ) {\n    window.location.href = service?.provider?.install_link\n    return\n  }\n\n  return new Promise(async (resolve, reject) => {\n    spawnCurrentUser()\n    const opts = {redir}\n    const user = await snapshot()\n    const discoveryService = await getDiscoveryService(service)\n    const refreshService = serviceOfType(user.services, \"authn-refresh\")\n    let accountProofData\n\n    try {\n      accountProofData = await getAccountProofData()\n    } catch (error) {\n      console.error(\n        `Error During Authentication: Could not resolve account proof data.\n        ${error}`\n      )\n      return reject(error)\n    }\n\n    if (user.loggedIn) {\n      if (refreshService) {\n        try {\n          const response = await execService({\n            service: refreshService,\n            msg: accountProofData,\n            opts,\n          })\n          send(NAME, SET_CURRENT_USER, await buildUser(response))\n        } catch (e) {\n          console.error(\"Error: Could not refresh authentication.\", e)\n        } finally {\n          return resolve(await snapshot())\n        }\n      } else {\n        return resolve(user)\n      }\n    }\n\n    try {\n      const response = await execService({\n        service: discoveryService,\n        msg: accountProofData,\n        config: await makeConfig(discoveryService),\n        opts,\n      })\n      send(NAME, SET_CURRENT_USER, await buildUser(response))\n    } catch (e) {\n      console.error(\"Error while authenticating\", e)\n    } finally {\n      resolve(await snapshot())\n    }\n  })\n}\n\nfunction unauthenticate() {\n  spawnCurrentUser()\n  send(NAME, DEL_CURRENT_USER)\n}\n\nconst normalizePreAuthzResponse = authz => ({\n  f_type: \"PreAuthzResponse\",\n  f_vsn: \"1.0.0\",\n  proposer: (authz || {}).proposer,\n  payer: (authz || {}).payer || [],\n  authorization: (authz || {}).authorization || [],\n})\n\nfunction resolvePreAuthz(authz) {\n  const resp = normalizePreAuthzResponse(authz)\n  const axs = []\n\n  if (resp.proposer != null) axs.push([\"PROPOSER\", resp.proposer])\n  for (let az of resp.payer || []) axs.push([\"PAYER\", az])\n  for (let az of resp.authorization || []) axs.push([\"AUTHORIZER\", az])\n\n  var result = axs.map(([role, az]) => ({\n    tempId: [az.identity.address, az.identity.keyId].join(\"|\"),\n    addr: az.identity.address,\n    keyId: az.identity.keyId,\n    signingFunction(signable) {\n      return execService({service: az, msg: signable})\n    },\n    role: {\n      proposer: role === \"PROPOSER\",\n      payer: role === \"PAYER\",\n      authorizer: role === \"AUTHORIZER\",\n    },\n  }))\n  return result\n}\n\nasync function authorization(account) {\n  spawnCurrentUser()\n\n  return {\n    ...account,\n    tempId: \"CURRENT_USER\",\n    async resolve(account, preSignable) {\n      const user = await authenticate({redir: true})\n      const authz = serviceOfType(user.services, \"authz\")\n      const preAuthz = serviceOfType(user.services, \"pre-authz\")\n\n      if (preAuthz)\n        return resolvePreAuthz(\n          await execService({\n            service: preAuthz,\n            msg: preSignable,\n          })\n        )\n      if (authz) {\n        let windowRef\n        if (isMobile() && authz.method === \"WC/RPC\") {\n          windowRef = window.open(\"\", \"_blank\")\n        }\n        return {\n          ...account,\n          tempId: \"CURRENT_USER\",\n          resolve: null,\n          addr: sansPrefix(authz.identity.address),\n          keyId: authz.identity.keyId,\n          sequenceNum: null,\n          signature: null,\n          async signingFunction(signable) {\n            return normalizeCompositeSignature(\n              await execService({\n                service: authz,\n                msg: signable,\n                opts: {\n                  includeOlderJsonRpcCall: true,\n                  windowRef,\n                },\n              })\n            )\n          },\n        }\n      }\n      throw new Error(\n        \"No Authz or PreAuthz Service configured for CURRENT_USER\"\n      )\n    },\n  }\n}\n\nfunction subscribe(callback) {\n  spawnCurrentUser()\n  const EXIT = \"@EXIT\"\n  const self = spawn(async ctx => {\n    ctx.send(NAME, SUBSCRIBE)\n    while (1) {\n      const letter = await ctx.receive()\n      if (letter.tag === EXIT) {\n        ctx.send(NAME, UNSUBSCRIBE)\n        return\n      }\n      callback(letter.data)\n    }\n  })\n  return () => send(self, EXIT)\n}\n\nfunction snapshot() {\n  spawnCurrentUser()\n  return send(NAME, SNAPSHOT, null, {expectReply: true, timeout: 0})\n}\n\nasync function info() {\n  spawnCurrentUser()\n  const {addr} = await snapshot()\n  if (addr == null) throw new Error(\"No Flow Address for Current User\")\n  return account(addr)\n}\n\nasync function resolveArgument() {\n  const {addr} = await authenticate()\n  return arg(withPrefix(addr), t.Address)\n}\n\nconst makeSignable = msg => {\n  invariant(/^[0-9a-f]+$/i.test(msg), \"Message must be a hex string\")\n\n  return {\n    message: msg,\n  }\n}\n\nasync function signUserMessage(msg) {\n  spawnCurrentUser()\n  const user = await authenticate({redir: true})\n\n  const signingService = serviceOfType(user.services, \"user-signature\")\n\n  invariant(\n    signingService,\n    \"Current user must have authorized a signing service.\"\n  )\n\n  try {\n    const response = await execService({\n      service: signingService,\n      msg: makeSignable(msg),\n    })\n    if (Array.isArray(response)) {\n      return response.map(compSigs => normalizeCompositeSignature(compSigs))\n    } else {\n      return [normalizeCompositeSignature(response)]\n    }\n  } catch (error) {\n    return error\n  }\n}\n\nlet currentUser = () => {\n  return {\n    authenticate,\n    unauthenticate,\n    authorization,\n    signUserMessage,\n    subscribe,\n    snapshot,\n    resolveArgument,\n  }\n}\n\ncurrentUser.authenticate = authenticate\ncurrentUser.unauthenticate = unauthenticate\ncurrentUser.authorization = authorization\ncurrentUser.signUserMessage = signUserMessage\ncurrentUser.subscribe = subscribe\ncurrentUser.snapshot = snapshot\ncurrentUser.resolveArgument = resolveArgument\n\nexport {currentUser}\n","import {invariant} from \"@onflow/util-invariant\"\nimport * as sdk from \"@onflow/sdk\"\nimport {isRequired, isObject, isString, isNumber} from \"./utils/is\"\nimport {normalizeArgs} from \"./utils/normalize-args\"\nimport {currentUser} from \"../current-user\"\nimport {prepTemplateOpts} from \"./utils/prep-template-opts.js\"\nimport {preMutate} from \"./utils/pre.js\"\n\n/** As the current user Mutate the Flow Blockchain\n *\n *  @arg {Object} opts - Mutation Options and configuration\n *  @arg {string} opts.cadence - Cadence Transaction used to mutate Flow\n *  @arg {ArgsFn} opts.args - Arguments passed to cadence transaction\n *  @arg {Object} opts.template - Interaction Template for a transaction\n *  @arg {number} opts.limit - Compute Limit for transaction\n *  @returns {string} Transaction Id\n *\n *  Where:\n *    @callback ArgsFn\n *    @arg {ArgFn}  arg - Argument function to define a single argument\n *    @arg {Object} t   - Cadence Types object used to define the type\n *    @returns {args[]}\n *\n *    @callback ArgFn\n *    @arg {Any}  value - the value of the argument\n *    @arg {Type} type  - the cadence type of the value\n *    @returns {arg}\n *\n *  Example:\n *    fcl.mutate({\n *      cadence: `\n *        transaction(a: Int, b: Int, c: Address) {\n *          prepare(acct: AuthAccount) {\n *            log(acct)\n *            log(a)\n *            log(b)\n *            log(c)\n *          }\n *        }\n *      `,\n *      args: (arg, t) => [\n *        arg(6, t.Int),\n *        arg(7, t.Int),\n *        arg(\"0xba1132bc08f82fe2\", t.Address),\n *      ],\n *    })\n *\n *\n *  Options:\n *    type Options = {\n *      template: InteractionTemplate | String // InteractionTemplate or url to one\n *      cadence: String!,\n *      args: (arg, t) => Array<Arg>,\n *      limit: Number,\n *      authz: AuthzFn, // will overload the trinity of signatory roles\n *      proposer: AuthzFn, // will overload the proposer signatory role\n *      payer: AuthzFn, // will overload the payer signatory role\n *      authorizations: [AuthzFn], // an array of authorization functions used as authorizations signatory roles\n *    }\n */\nexport async function mutate(opts = {}) {\n  var txid\n  try {\n    await preMutate(opts)\n    opts = await prepTemplateOpts(opts)\n\n    // Allow for a config to overwrite the authorization function.\n    // prettier-ignore\n    const authz = await sdk.config().get(\"fcl.authz\", currentUser().authorization)\n\n    txid = sdk.config().overload(opts.dependencies || {}, async () =>\n      // prettier-ignore\n      sdk.send([\n        sdk.transaction(opts.cadence),\n\n        sdk.args(normalizeArgs(opts.args || [])),\n\n        opts.limit && isNumber(opts.limit) && sdk.limit(opts.limit),\n\n        // opts.proposer > opts.authz > authz\n        sdk.proposer(opts.proposer || opts.authz || authz),\n\n        // opts.payer > opts.authz > authz\n        sdk.payer(opts.payer || opts.authz || authz),\n\n        // opts.authorizations > [opts.authz > authz]\n        sdk.authorizations(opts.authorizations || [opts.authz || authz]),\n      ]).then(sdk.decode)\n    )\n\n    return txid\n  } catch (error) {\n    throw error\n  }\n}\n","export const onMessageFromFCL = (messageType, cb = () => {}) => {\n  const buildData = data => {\n    if (data.deprecated)\n      console.warn(\"DEPRECATION NOTICE\", data.deprecated.message)\n    delete data?.body?.interaction\n\n    return data\n  }\n\n  const internal = e => {\n    const {data} = e\n    if (typeof data !== \"object\") return\n    if (typeof data == null) return\n    if (data.type !== messageType) return\n\n    cb(buildData(data))\n  }\n\n  window.addEventListener(\"message\", internal)\n  return () => window.removeEventListener(\"message\", internal)\n}\n","import {onMessageFromFCL} from \"./on-message-from-fcl\"\n\nexport const sendMsgToFCL = (type, msg = {}) => {\n  if (window.location !== window.parent.location) {\n    window.parent.postMessage({...msg, type}, \"*\")\n  } else if (window.opener) {\n    window.opener.postMessage({...msg, type}, \"*\")\n  } else {\n    throw new Error(\"Unable to communicate with parent FCL instance\")\n  }\n}\n\nexport const ready = (cb, msg = {}) => {\n  onMessageFromFCL(\"FCL:VIEW:READY:RESPONSE\", cb)\n  sendMsgToFCL(\"FCL:VIEW:READY\")\n}\n\nexport const close = () => {\n  sendMsgToFCL(\"FCL:VIEW:CLOSE\")\n}\n\nexport const approve = data => {\n  sendMsgToFCL(\"FCL:VIEW:RESPONSE\", {\n    f_type: \"PollingResponse\",\n    f_vsn: \"1.0.0\",\n    status: \"APPROVED\",\n    reason: null,\n    data: data,\n  })\n}\n\nexport const decline = reason => {\n  sendMsgToFCL(\"FCL:VIEW:RESPONSE\", {\n    f_type: \"PollingResponse\",\n    f_vsn: \"1.0.0\",\n    status: \"DECLINED\",\n    reason: reason,\n    data: null,\n  })\n}\n\nexport const redirect = data => {\n  sendMsgToFCL(\"FCL:VIEW:RESPONSE\", {\n    f_type: \"PollingResponse\",\n    f_vsn: \"1.0.0\",\n    status: \"REDIRECT\",\n    reason: null,\n    data: data,\n  })\n}\n","import {withPrefix} from \"@onflow/util-address\"\nimport {COMPOSITE_SIGNATURE_PRAGMA} from \"../normalizers/service/__vsn\"\n\nexport function CompositeSignature(addr, keyId, signature) {\n  this.f_type = COMPOSITE_SIGNATURE_PRAGMA.f_type\n  this.f_vsn = COMPOSITE_SIGNATURE_PRAGMA.f_vsn\n  this.addr = withPrefix(addr)\n  this.keyId = Number(keyId)\n  this.signature = signature\n}\n","import {sansPrefix} from \"@onflow/util-address\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {Buffer, encode as rlpEncode} from \"@onflow/rlp\"\n\nconst rightPaddedHexBuffer = (value, pad) =>\n  Buffer.from(value.padEnd(pad * 2, \"0\"), \"hex\")\n\nconst leftPaddedHexBuffer = (value, pad) =>\n  Buffer.from(value.padStart(pad * 2, \"0\"), \"hex\")\n\nconst addressBuffer = addr => leftPaddedHexBuffer(addr, 8)\n\nconst nonceBuffer = nonce => Buffer.from(nonce, \"hex\")\n\nexport const encodeAccountProof = (\n  {address, nonce, appIdentifier},\n  includeDomainTag = true\n) => {\n  invariant(\n    address,\n    \"Encode Message For Provable Authn Error: address must be defined\"\n  )\n  invariant(\n    nonce,\n    \"Encode Message For Provable Authn Error: nonce must be defined\"\n  )\n  invariant(\n    appIdentifier,\n    \"Encode Message For Provable Authn Error: appIdentifier must be defined\"\n  )\n\n  invariant(\n    nonce.length >= 64,\n    \"Encode Message For Provable Authn Error: nonce must be minimum of 32 bytes\"\n  )\n\n  const ACCOUNT_PROOF_DOMAIN_TAG = rightPaddedHexBuffer(\n    Buffer.from(\"FCL-ACCOUNT-PROOF-V0.0\").toString(\"hex\"),\n    32\n  )\n\n  if (includeDomainTag) {\n    return Buffer.concat([\n      ACCOUNT_PROOF_DOMAIN_TAG,\n      rlpEncode([\n        appIdentifier,\n        addressBuffer(sansPrefix(address)),\n        nonceBuffer(nonce),\n      ]),\n    ]).toString(\"hex\")\n  }\n\n  return rlpEncode([\n    appIdentifier,\n    addressBuffer(sansPrefix(address)),\n    nonceBuffer(nonce),\n  ]).toString(\"hex\")\n}\n","export function injectExtService(service) {\n  if (service.type === \"authn\" && service.endpoint != null) {\n    if (!Array.isArray(window.fcl_extensions)) {\n      window.fcl_extensions = []\n    }\n    window.fcl_extensions.push(service)\n  } else {\n    console.warn(\"Authn service is required\")\n  }\n}\n","import {config} from \"@onflow/config\"\nimport {log} from \"@onflow/util-logger\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {withPrefix, sansPrefix} from \"@onflow/util-address\"\nimport {query} from \"../exec/query\"\nimport {encodeAccountProof} from \"../wallet-utils\"\nimport {isString} from \"../exec/utils/is\"\n\nconst ACCOUNT_PROOF = \"ACCOUNT_PROOF\"\nconst USER_SIGNATURE = \"USER_SIGNATURE\"\n\nexport const validateArgs = args => {\n  if (args.appIdentifier) {\n    const {appIdentifier, address, nonce, signatures} = args\n    invariant(\n      isString(appIdentifier),\n      \"verifyAccountProof({ appIdentifier }) -- appIdentifier must be a string\"\n    )\n    invariant(\n      isString(address) && sansPrefix(address).length === 16,\n      \"verifyAccountProof({ address }) -- address must be a valid address\"\n    )\n    invariant(/^[0-9a-f]+$/i.test(nonce), \"nonce must be a hex string\")\n    invariant(\n      Array.isArray(signatures) &&\n        signatures.every((sig, i, arr) => sig.f_type === \"CompositeSignature\"),\n      \"Must include an Array of CompositeSignatures to verify\"\n    )\n    invariant(\n      signatures.map(cs => cs.addr).every((addr, i, arr) => addr === arr[0]),\n      \"User signatures to be verified must be from a single account address\"\n    )\n    return true\n  } else {\n    const {message, address, compSigs} = args\n    invariant(\n      /^[0-9a-f]+$/i.test(message),\n      \"Signed message must be a hex string\"\n    )\n    invariant(\n      isString(address) && sansPrefix(address).length === 16,\n      \"verifyUserSignatures({ address }) -- address must be a valid address\"\n    )\n    invariant(\n      Array.isArray(compSigs) &&\n        compSigs.every((sig, i, arr) => sig.f_type === \"CompositeSignature\"),\n      \"Must include an Array of CompositeSignatures to verify\"\n    )\n    invariant(\n      compSigs.map(cs => cs.addr).every((addr, i, arr) => addr === arr[0]),\n      \"User signatures to be verified must be from a single account address\"\n    )\n    return true\n  }\n}\n\nconst getVerifySignaturesScript = async (sig, opts) => {\n  const verifyFunction =\n    sig === \"ACCOUNT_PROOF\"\n      ? \"verifyAccountProofSignatures\"\n      : \"verifyUserSignatures\"\n\n  let network = await config.get(\"flow.network\")\n  if (!network) {\n    network = await config.get(\"env\")\n    if (network)\n      log.deprecate({\n        pkg: \"FCL\",\n        subject:\n          'Using the \"env\" configuration key for specifying the flow network',\n        message: 'Please use \"flow.network\" instead.',\n        transition:\n          \"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/TRANSITIONS.md#0001-deprecate-env-config-key\",\n      })\n  }\n\n  let fclCryptoContract\n\n  invariant(\n    opts.fclCryptoContract || network === \"testnet\" || network === \"mainnet\",\n    \"${verifyFunction}({ fclCryptoContract }) -- config.flow.network must be specified (testnet || mainnet) or contract address provided via opts.fclCryptoContract\"\n  )\n\n  if (opts.fclCryptoContract) {\n    fclCryptoContract = opts.fclCryptoContract\n  } else {\n    fclCryptoContract =\n      network === \"testnet\" ? \"0x74daa6f9c7ef24b1\" : \"0xb4b82a1c9d21d284\"\n  }\n\n  return `\n      import FCLCrypto from ${fclCryptoContract}\n\n      pub fun main(\n          address: Address, \n          message: String, \n          keyIndices: [Int], \n          signatures: [String]\n      ): Bool {\n        return FCLCrypto.${verifyFunction}(address: address, message: message, keyIndices: keyIndices, signatures: signatures)\n      }\n    `\n}\n\n/**\n * Verify a valid account proof signature or signatures for an account on Flow.\n *\n * @param {string} appIdentifier - A message string in hexadecimal format\n * @param {Object} accountProofData - An object consisting of address, nonce, and signatures\n * @param {string} accountProofData.address - A Flow account address\n * @param {string} accountProofData.nonce - A random string in hexadecimal format (minimum 32 bytes in total, i.e 64 hex characters)\n * @param {Object[]} accountProofData.signatures - An array of composite signatures to verify\n * @param {Object} [opts={}] - Options object\n * @param {string} opts.fclCryptoContract - An optional override Flow account address where the FCLCrypto contract is deployed\n * @return {bool}\n *\n * @example\n *\n *  const accountProofData = {\n *   address: \"0x123\",\n *   nonce: \"F0123\"\n *   signatures: [{f_type: \"CompositeSignature\", f_vsn: \"1.0.0\", addr: \"0x123\", keyId: 0, signature: \"abc123\"}],\n *  }\n *\n *  const isValid = await fcl.AppUtils.verifyAccountProof(\n *    \"AwesomeAppId\",\n *    accountProofData,\n *    {fclCryptoContract}\n *  )\n */\n\nexport async function verifyAccountProof(\n  appIdentifier,\n  {address, nonce, signatures},\n  opts = {}\n) {\n  validateArgs({appIdentifier, address, nonce, signatures})\n  const message = encodeAccountProof({address, nonce, appIdentifier}, false)\n\n  let signaturesArr = []\n  let keyIndices = []\n\n  for (const el of signatures) {\n    signaturesArr.push(el.signature)\n    keyIndices.push(el.keyId.toString())\n  }\n\n  return query({\n    cadence: await getVerifySignaturesScript(ACCOUNT_PROOF, opts),\n    args: (arg, t) => [\n      arg(withPrefix(address), t.Address),\n      arg(message, t.String),\n      arg(keyIndices, t.Array(t.Int)),\n      arg(signaturesArr, t.Array(t.String)),\n    ],\n  })\n}\n\n/**\n * Verify a valid signature/s for an account on Flow.\n *\n * @param {string} msg - A message string in hexadecimal format\n * @param {Array} compSigs - An array of Composite Signatures\n * @param {string} compSigs[].addr - The account address\n * @param {number} compSigs[].keyId - The account keyId\n * @param {string} compSigs[].signature - The signature to verify\n * @param {Object} [opts={}] - Options object\n * @param {string} opts.fclCryptoContract - An optional override of Flow account address where the FCLCrypto contract is deployed\n * @return {bool}\n *\n * @example\n *\n *  const isValid = await fcl.AppUtils.verifyUserSignatures(\n *    Buffer.from('FOO').toString(\"hex\"),\n *    [{f_type: \"CompositeSignature\", f_vsn: \"1.0.0\", addr: \"0x123\", keyId: 0, signature: \"abc123\"}],\n *    {fclCryptoContract}\n *  )\n */\nexport async function verifyUserSignatures(message, compSigs, opts = {}) {\n  const address = withPrefix(compSigs[0].addr)\n  validateArgs({message, address, compSigs})\n\n  let signaturesArr = []\n  let keyIndices = []\n\n  for (const el of compSigs) {\n    signaturesArr.push(el.signature)\n    keyIndices.push(el.keyId.toString())\n  }\n\n  return query({\n    cadence: await getVerifySignaturesScript(USER_SIGNATURE, opts),\n    args: (arg, t) => [\n      arg(address, t.Address),\n      arg(message, t.String),\n      arg(keyIndices, t.Array(t.Int)),\n      arg(signaturesArr, t.Array(t.String)),\n    ],\n  })\n}\n","import {log} from \"@onflow/util-logger\"\nimport {verifyUserSignatures as verify} from \"../app-utils\"\n\n/**\n * Verify a valid signature/s for an account on Flow.\n *\n * @deprecated since version '1.0.0-alpha.0', use AppUtils.verifyUserSignatures instead\n *\n */\nexport const verifyUserSignatures = log.deprecate({\n  pkg: \"FCL\",\n  subject: \"fcl.verifyUserSignatures()\",\n  message: \"Please use fcl.AppUtils.verifyUserSignatures()\",\n  callback: function verifyUserSignatures(message, compSigs) {\n    return verify(message, compSigs)\n  },\n})\n","import {interaction, pipe} from \"@onflow/sdk\"\nimport {resolve as defaultResolve} from \"@onflow/sdk\"\nimport {config, createSignableVoucher} from \"@onflow/sdk\"\n\nexport const serialize = async (args = [], opts = {}) => {\n  const resolveFunction = await config.first(\n    [\"sdk.resolve\"],\n    opts.resolve || defaultResolve\n  )\n\n  if (Array.isArray(args)) args = await pipe(interaction(), args)\n\n  return JSON.stringify(\n    createSignableVoucher(await resolveFunction(args)),\n    null,\n    2\n  )\n}\n","import \"../default-config\"\nimport {\n  spawn,\n  send,\n  subscriber,\n  snapshoter,\n  UPDATED,\n  SNAPSHOT,\n  INIT,\n  SUBSCRIBE,\n  UNSUBSCRIBE,\n  ERROR,\n} from \"@onflow/util-actor\"\nimport {send as fclSend, decode, getTransactionStatus} from \"@onflow/sdk\"\n\nconst RATE = 2500\nconst POLL = \"POLL\"\n\nconst fetchTxStatus = async transactionId => {\n  return fclSend([getTransactionStatus(transactionId)]).then(decode)\n}\n\nconst isExpired = tx => tx.status === 5\nconst isSealed = tx => tx.status >= 4\nconst isExecuted = tx => tx.status >= 3\nconst isFinalized = tx => tx.status >= 2\nconst isPending = tx => tx.status >= 1\nconst isUnknown = tx => tx.status >= 0\n\nconst isDiff = (cur, next) => {\n  return JSON.stringify(cur) !== JSON.stringify(next)\n}\n\nconst HANDLERS = {\n  [INIT]: async ctx => {\n    ctx.sendSelf(POLL)\n  },\n  [SUBSCRIBE]: (ctx, letter) => {\n    ctx.subscribe(letter.from)\n    ctx.send(letter.from, UPDATED, ctx.all())\n  },\n  [UNSUBSCRIBE]: (ctx, letter) => {\n    ctx.unsubscribe(letter.from)\n  },\n  [SNAPSHOT]: async (ctx, letter) => {\n    letter.reply(ctx.all())\n  },\n  [POLL]: async ctx => {\n    let tx\n    try {\n      tx = await fetchTxStatus(ctx.self())\n    } catch (e) {\n      return ctx.fatalError(e)\n    }\n\n    if (!isSealed(tx)) setTimeout(() => ctx.sendSelf(POLL), RATE)\n    if (isDiff(ctx.all(), tx)) ctx.broadcast(UPDATED, tx)\n    ctx.merge(tx)\n  },\n}\n\nconst scoped = transactionId => {\n  if (typeof transactionId === \"object\")\n    transactionId = transactionId.transactionId\n  if (transactionId == null) throw new Error(\"transactionId required\")\n  return transactionId\n}\n\nconst spawnTransaction = transactionId => {\n  return spawn(HANDLERS, scoped(transactionId))\n}\n\nexport function transaction(transactionId) {\n  function snapshot() {\n    return snapshoter(transactionId, spawnTransaction)\n  }\n\n  function subscribe(callback) {\n    return subscriber(scoped(transactionId), spawnTransaction, callback)\n  }\n\n  function once(predicate) {\n    return function innerOnce(opts = {}) {\n      const suppress = opts.suppress || false\n      return new Promise((resolve, reject) => {\n        const unsub = subscribe((txStatus, error) => {\n          if ((error || txStatus.statusCode) && !suppress) {\n            reject(error || txStatus.errorMessage)\n            unsub()\n          } else if (predicate(txStatus)) {\n            resolve(txStatus)\n            unsub()\n          }\n        })\n      })\n    }\n  }\n\n  return {\n    snapshot,\n    subscribe,\n    onceFinalized: once(isFinalized),\n    onceExecuted: once(isExecuted),\n    onceSealed: once(isSealed),\n  }\n}\n\ntransaction.isUnknown = isUnknown\ntransaction.isPending = isPending\ntransaction.isFinalized = isFinalized\ntransaction.isExecuted = isExecuted\ntransaction.isSealed = isSealed\ntransaction.isExpired = isExpired\n","import {spawn, subscriber, SUBSCRIBE, UNSUBSCRIBE} from \"@onflow/util-actor\"\nimport {\n  config,\n  block,\n  getEventsAtBlockHeightRange,\n  send,\n  decode,\n} from \"@onflow/sdk\"\n\nconst RATE = 10000\nconst UPDATED = \"UPDATED\"\nconst TICK = \"TICK\"\nconst HIGH_WATER_MARK = \"hwm\"\n\nconst scheduleTick = async ctx => {\n  return setTimeout(\n    () => ctx.sendSelf(TICK),\n    await config().get(\"fcl.eventPollRate\", RATE)\n  )\n}\n\nconst HANDLERS = {\n  [TICK]: async ctx => {\n    if (!ctx.hasSubs()) return\n    let hwm = ctx.get(HIGH_WATER_MARK)\n    if (hwm == null) {\n      ctx.put(HIGH_WATER_MARK, await block())\n      ctx.put(TICK, await scheduleTick(ctx))\n    } else {\n      let next = await block()\n      ctx.put(HIGH_WATER_MARK, next)\n      if (hwm.height < next.height) {\n        const data = await send([\n          getEventsAtBlockHeightRange(ctx.self(), hwm.height + 1, next.height),\n        ]).then(decode)\n        for (let d of data) ctx.broadcast(UPDATED, d.data)\n      }\n      ctx.put(TICK, await scheduleTick(ctx))\n    }\n  },\n  [SUBSCRIBE]: async (ctx, letter) => {\n    if (!ctx.hasSubs()) {\n      ctx.put(TICK, await scheduleTick(ctx))\n    }\n    ctx.subscribe(letter.from)\n  },\n  [UNSUBSCRIBE]: (ctx, letter) => {\n    ctx.unsubscribe(letter.from)\n    if (!ctx.hasSubs()) {\n      clearTimeout(ctx.get(TICK))\n      ctx.delete(TICK)\n      ctx.delete(HIGH_WATER_MARK)\n    }\n  },\n}\n\nconst spawnEvents = key => spawn(HANDLERS, key)\n\nexport function events(key) {\n  return {\n    subscribe: callback => subscriber(key, spawnEvents, callback),\n  }\n}\n","\"use strict\";var copy=function copy(I,i){return function(O,o){var oi=o*2;var ii=i*2;O[oi]=I[ii];O[oi+1]=I[ii+1]}};module.exports=copy;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports[\"default\"]=void 0;var _copy=_interopRequireDefault(require(\"../copy\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{\"default\":obj}}var chi=function chi(_ref){var A=_ref.A,C=_ref.C;for(var y=0;y<25;y+=5){for(var x=0;x<5;x++){(0,_copy[\"default\"])(A,y+x)(C,x)}for(var _x=0;_x<5;_x++){var xy=(y+_x)*2;var x1=(_x+1)%5*2;var x2=(_x+2)%5*2;A[xy]^=~C[x1]&C[x2];A[xy+1]^=~C[x1+1]&C[x2+1]}}};var _default=chi;exports[\"default\"]=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports[\"default\"]=void 0;var ROUND_CONSTANTS=new Uint32Array([0,1,0,32898,2147483648,32906,2147483648,2147516416,0,32907,0,2147483649,2147483648,2147516545,2147483648,32777,0,138,0,136,0,2147516425,0,2147483658,0,2147516555,2147483648,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,0,32778,2147483648,2147483658,2147483648,2147516545,2147483648,32896,0,2147483649,2147483648,2147516424]);var _default=ROUND_CONSTANTS;exports[\"default\"]=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports[\"default\"]=void 0;var _roundConstants=_interopRequireDefault(require(\"./round-constants\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{\"default\":obj}}var iota=function iota(_ref){var A=_ref.A,roundIndex=_ref.roundIndex;var i=roundIndex*2;A[0]^=_roundConstants[\"default\"][i];A[1]^=_roundConstants[\"default\"][i+1]};var _default=iota;exports[\"default\"]=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports[\"default\"]=void 0;var PI_SHUFFLES=[10,7,11,17,18,3,5,16,8,21,24,4,15,23,19,13,12,2,20,14,22,9,6,1];var _default=PI_SHUFFLES;exports[\"default\"]=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports[\"default\"]=void 0;var RHO_OFFSETS=[1,3,6,10,15,21,28,36,45,55,2,14,27,41,56,8,25,43,62,18,39,61,20,44];var _default=RHO_OFFSETS;exports[\"default\"]=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports[\"default\"]=void 0;var _piShuffles=_interopRequireDefault(require(\"./pi-shuffles\"));var _rhoOffsets=_interopRequireDefault(require(\"./rho-offsets\"));var _copy=_interopRequireDefault(require(\"../copy\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{\"default\":obj}}var rhoPi=function rhoPi(_ref){var A=_ref.A,C=_ref.C,W=_ref.W;(0,_copy[\"default\"])(A,1)(W,0);var H=0;var L=0;var Wi=0;var ri=32;for(var i=0;i<24;i++){var j=_piShuffles[\"default\"][i];var r=_rhoOffsets[\"default\"][i];(0,_copy[\"default\"])(A,j)(C,0);H=W[0];L=W[1];ri=32-r;Wi=r<32?0:1;W[Wi]=H<<r|L>>>ri;W[(Wi+1)%2]=L<<r|H>>>ri;(0,_copy[\"default\"])(W,0)(A,j);(0,_copy[\"default\"])(C,0)(W,0)}};var _default=rhoPi;exports[\"default\"]=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports[\"default\"]=void 0;var _copy=_interopRequireDefault(require(\"../copy\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{\"default\":obj}}var theta=function theta(_ref){var A=_ref.A,C=_ref.C,D=_ref.D,W=_ref.W;var H=0;var L=0;for(var x=0;x<5;x++){var x20=x*2;var x21=(x+5)*2;var x22=(x+10)*2;var x23=(x+15)*2;var x24=(x+20)*2;C[x20]=A[x20]^A[x21]^A[x22]^A[x23]^A[x24];C[x20+1]=A[x20+1]^A[x21+1]^A[x22+1]^A[x23+1]^A[x24+1]}for(var _x=0;_x<5;_x++){(0,_copy[\"default\"])(C,(_x+1)%5)(W,0);H=W[0];L=W[1];W[0]=H<<1|L>>>31;W[1]=L<<1|H>>>31;D[_x*2]=C[(_x+4)%5*2]^W[0];D[_x*2+1]=C[(_x+4)%5*2+1]^W[1];for(var y=0;y<25;y+=5){A[(y+_x)*2]^=D[_x*2];A[(y+_x)*2+1]^=D[_x*2+1]}}};var _default=theta;exports[\"default\"]=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports[\"default\"]=void 0;var _chi=_interopRequireDefault(require(\"./chi\"));var _iota=_interopRequireDefault(require(\"./iota\"));var _rhoPi=_interopRequireDefault(require(\"./rho-pi\"));var _theta=_interopRequireDefault(require(\"./theta\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{\"default\":obj}}var permute=function permute(){var C=new Uint32Array(10);var D=new Uint32Array(10);var W=new Uint32Array(2);return function(A){for(var roundIndex=0;roundIndex<24;roundIndex++){(0,_theta[\"default\"])({A:A,C:C,D:D,W:W});(0,_rhoPi[\"default\"])({A:A,C:C,W:W});(0,_chi[\"default\"])({A:A,C:C});(0,_iota[\"default\"])({A:A,roundIndex:roundIndex})}C.fill(0);D.fill(0);W.fill(0)}};var _default=permute;exports[\"default\"]=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports[\"default\"]=void 0;var _buffer=require(\"buffer\");var _permute=_interopRequireDefault(require(\"./permute\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{\"default\":obj}}var xorWords=function xorWords(I,O){for(var i=0;i<I.length;i+=8){var o=i/4;O[o]^=I[i+7]<<24|I[i+6]<<16|I[i+5]<<8|I[i+4];O[o+1]^=I[i+3]<<24|I[i+2]<<16|I[i+1]<<8|I[i]}return O};var readWords=function readWords(I,O){for(var o=0;o<O.length;o+=8){var i=o/4;O[o]=I[i+1];O[o+1]=I[i+1]>>>8;O[o+2]=I[i+1]>>>16;O[o+3]=I[i+1]>>>24;O[o+4]=I[i];O[o+5]=I[i]>>>8;O[o+6]=I[i]>>>16;O[o+7]=I[i]>>>24}return O};var Sponge=function Sponge(_ref){var _this=this;var capacity=_ref.capacity,padding=_ref.padding;var keccak=(0,_permute[\"default\"])();var stateSize=200;var blockSize=capacity/8;var queueSize=stateSize-capacity/4;var queueOffset=0;var state=new Uint32Array(stateSize/4);var queue=_buffer.Buffer.allocUnsafe(queueSize);this.absorb=function(buffer){for(var i=0;i<buffer.length;i++){queue[queueOffset]=buffer[i];queueOffset+=1;if(queueOffset>=queueSize){xorWords(queue,state);keccak(state);queueOffset=0}}return _this};this.squeeze=function(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var output={buffer:options.buffer||_buffer.Buffer.allocUnsafe(blockSize),padding:options.padding||padding,queue:_buffer.Buffer.allocUnsafe(queue.length),state:new Uint32Array(state.length)};queue.copy(output.queue);for(var i=0;i<state.length;i++){output.state[i]=state[i]}output.queue.fill(0,queueOffset);output.queue[queueOffset]|=output.padding;output.queue[queueSize-1]|=128;xorWords(output.queue,output.state);for(var offset=0;offset<output.buffer.length;offset+=queueSize){keccak(output.state);readWords(output.state,output.buffer.slice(offset,offset+queueSize))}return output.buffer};this.reset=function(){queue.fill(0);state.fill(0);queueOffset=0;return _this};return this};var _default=Sponge;exports[\"default\"]=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports[\"default\"]=exports.SHAKE=exports.SHA3Hash=exports.SHA3=exports.Keccak=void 0;var _buffer=require(\"buffer\");var _sponge=_interopRequireDefault(require(\"./sponge\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{\"default\":obj}}var createHash=function createHash(_ref){var allowedSizes=_ref.allowedSizes,defaultSize=_ref.defaultSize,padding=_ref.padding;return function Hash(){var _this=this;var size=arguments.length>0&&arguments[0]!==undefined?arguments[0]:defaultSize;if(!this||this.constructor!==Hash){return new Hash(size)}if(allowedSizes&&!allowedSizes.includes(size)){throw new Error(\"Unsupported hash length\")}var sponge=new _sponge[\"default\"]({capacity:size});this.update=function(input){var encoding=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"utf8\";if(_buffer.Buffer.isBuffer(input)){sponge.absorb(input);return _this}if(typeof input===\"string\"){return _this.update(_buffer.Buffer.from(input,encoding))}throw new TypeError(\"Not a string or buffer\")};this.digest=function(){var formatOrOptions=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"binary\";var options=typeof formatOrOptions===\"string\"?{format:formatOrOptions}:formatOrOptions;var buffer=sponge.squeeze({buffer:options.buffer,padding:options.padding||padding});if(options.format&&options.format!==\"binary\"){return buffer.toString(options.format)}return buffer};this.reset=function(){sponge.reset();return _this};return this}};var Keccak=createHash({allowedSizes:[224,256,384,512],defaultSize:512,padding:1});exports.Keccak=Keccak;var SHA3=createHash({allowedSizes:[224,256,384,512],defaultSize:512,padding:6});exports.SHA3=SHA3;var SHAKE=createHash({allowedSizes:[128,256],defaultSize:256,padding:31});exports.SHAKE=SHAKE;var SHA3Hash=Keccak;exports.SHA3Hash=SHA3Hash;SHA3.SHA3Hash=SHA3Hash;var _default=SHA3;exports[\"default\"]=_default;","import {SHA3} from \"sha3\"\nimport {Buffer} from \"@onflow/rlp\"\n\nexport async function genHash(utf8String) {\n  const sha = new SHA3(256)\n  sha.update(Buffer.from(utf8String, \"utf8\"))\n  return sha.digest(\"hex\")\n}\n","import {invariant} from \"@onflow/sdk\"\nimport {encode as rlpEncode} from \"@onflow/rlp\"\nimport {genHash} from \"./utils/hash.js\"\nimport {normalizeInteractionTemplate} from \"../normalizers/interaction-template/interaction-template.js\"\n\nexport async function generateTemplateId({template}) {\n  invariant(\n    template != undefined,\n    \"generateTemplateId({ template }) -- template must be defined\"\n  )\n  invariant(\n    typeof template === \"object\",\n    \"generateTemplateId({ template }) -- template must be an object\"\n  )\n  invariant(\n    typeof template.f_type === \"InteractionTemplate\",\n    \"generateTemplateId({ template }) -- template object must be an InteractionTemplate\"\n  )\n\n  template = normalizeInteractionTemplate(template)\n\n  switch (template.f_version) {\n    case \"1.0.0\":\n      const templateData = template.data\n\n      const messages = await Promise.all(\n        Object.keys(templateData.messages).map(async messageKey => [\n          await genHash(messageKey),\n          await Promise.all(\n            Object.keys(templateData.messages?.[messageKey]?.i18n).map(\n              async i18nkeylanguage => [\n                await genHash(i18nkeylanguage),\n                await genHash(\n                  templateData.messages?.[messageKey]?.i18n?.[i18nkeylanguage]\n                ),\n              ]\n            )\n          ),\n        ])\n      )\n\n      const dependencies = await Promise.all(\n        Object.keys(templateData?.dependencies).map(\n          async dependencyAddressPlaceholder => [\n            await genHash(dependencyAddressPlaceholder),\n            await Promise.all(\n              Object.keys(\n                templateData?.dependencies?.[dependencyAddressPlaceholder]\n              ).map(async dependencyContract => [\n                await genHash(dependencyContract),\n                await Promise.all(\n                  Object.keys(\n                    templateData?.dependencies?.[\n                      dependencyAddressPlaceholder\n                    ]?.[dependencyContract]\n                  ).map(async dependencyContractNetwork => [\n                    await genHash(dependencyContractNetwork),\n                    [\n                      await genHash(\n                        templateData?.dependencies?.[\n                          dependencyAddressPlaceholder\n                        ]?.[dependencyContract]?.[dependencyContractNetwork]\n                          .address\n                      ),\n                      await genHash(\n                        templateData?.dependencies?.[\n                          dependencyAddressPlaceholder\n                        ]?.[dependencyContract]?.[dependencyContractNetwork]\n                          .contract\n                      ),\n                      await genHash(\n                        templateData?.dependencies?.[\n                          dependencyAddressPlaceholder\n                        ]?.[dependencyContract]?.[dependencyContractNetwork]\n                          .fq_address\n                      ),\n                      await genHash(\n                        templateData?.dependencies?.[\n                          dependencyAddressPlaceholder\n                        ]?.[dependencyContract]?.[dependencyContractNetwork].pin\n                      ),\n                      await genHash(\n                        String(\n                          templateData?.dependencies?.[\n                            dependencyAddressPlaceholder\n                          ]?.[dependencyContract]?.[dependencyContractNetwork]\n                            .pin_block_height\n                        )\n                      ),\n                    ],\n                  ])\n                ),\n              ])\n            ),\n          ]\n        )\n      )\n\n      const _arguments = await Promise.all(\n        Object.keys(templateData?.[\"arguments\"]).map(async argumentLabel => [\n          await genHash(argumentLabel),\n          [\n            await genHash(\n              String(templateData?.[\"arguments\"]?.[argumentLabel].index)\n            ),\n            await genHash(templateData?.[\"arguments\"]?.[argumentLabel].type),\n            await genHash(\n              templateData?.[\"arguments\"]?.[argumentLabel].balance || \"\"\n            ),\n            await Promise.all(\n              Object.keys(\n                templateData?.[\"arguments\"]?.[argumentLabel].messages\n              ).map(async argumentMessageKey => [\n                await genHash(argumentMessageKey),\n                await Promise.all(\n                  Object.keys(\n                    templateData?.[\"arguments\"]?.[argumentLabel].messages?.[\n                      argumentMessageKey\n                    ].i18n\n                  ).map(async i18nkeylanguage => [\n                    await genHash(i18nkeylanguage),\n                    await genHash(\n                      templateData?.[\"arguments\"]?.[argumentLabel].messages?.[\n                        argumentMessageKey\n                      ].i18n?.[i18nkeylanguage]\n                    ),\n                  ])\n                ),\n              ])\n            ),\n          ],\n        ])\n      )\n\n      const encodedHex = rlpEncode([\n        await genHash(\"InteractionTemplate\"),\n        await genHash(\"1.0.0\"),\n        await genHash(templateData?.type),\n        await genHash(templateData?.interface),\n        messages,\n        await genHash(templateData?.cadence),\n        dependencies,\n        _arguments,\n      ]).toString(\"hex\")\n\n      return genHash(encodedHex)\n\n    default:\n      throw new Error(\"generateTemplateId Error: Unsupported template version\")\n  }\n}\n","import {config, invariant} from \"@onflow/sdk\"\nimport {log, LEVELS} from \"@onflow/util-logger\"\nimport {query} from \"../exec/query.js\"\nimport {generateTemplateId} from \"./generate-template-id.js\"\nimport {normalizeInteractionTemplate} from \"../normalizers/interaction-template/interaction-template.js\"\n\nexport async function getInteractionTemplateAudits(\n  {template, auditors},\n  opts = {}\n) {\n  invariant(\n    template != undefined,\n    \"getInteractionTemplateAudits({ template }) -- template must be defined\"\n  )\n\n  template = normalizeInteractionTemplate(template)\n\n  invariant(\n    template.f_type === \"InteractionTemplate\",\n    \"getInteractionTemplateAudits({ template }) -- template must be an InteractionTemplate\"\n  )\n\n  // Recompute ID to be sure it matches\n  let recomputedTemplateID = await generateTemplateId({template})\n\n  if (recomputedTemplateID !== template.id) {\n    log({\n      title: \"getInteractionTemplateAudits Debug Error\",\n      message: `Could not recompute and match template ID\n                computed: ${recomputedTemplateID}\n                template: ${template.id}\n            `,\n      level: LEVELS.debug,\n    })\n    throw new Error(\n      \"getInteractionTemplateAudits Error: Could not recompute and match template ID\"\n    )\n  }\n\n  switch (template.f_version) {\n    case \"1.0.0\":\n      const _auditors = auditors || (await config().get(\"flow.auditors\"))\n\n      invariant(\n        _auditors,\n        \"getInteractionTemplateAudits Error: Required configuration for 'fcl.auditors' is not set\"\n      )\n      invariant(\n        Array.isArray(_auditors),\n        \"getInteractionTemplateAudits Error: Required configuration for 'fcl.auditors' is not an array\"\n      )\n\n      let FlowInteractionAuditContract = opts.flowInteractionAuditContract\n      if (!FlowInteractionAuditContract) {\n        const fclNetwork = await config().get(\"flow.network\")\n        invariant(\n          fclNetwork === \"mainnet\" || fclNetwork === \"testnet\",\n          \"getInteractionTemplateAudits Error: Unable to determine address for FlowInteractionTemplateAudit contract. Set configuration for 'fcl.network' to 'mainnet' or 'testnet'\"\n        )\n        if (fclNetwork === \"mainnet\") {\n          FlowInteractionAuditContract = \"0xfd100e39d50a13e6\"\n        } else {\n          FlowInteractionAuditContract = \"0xf78bfc12d0a786dc\"\n        }\n      }\n\n      const audits = await query({\n        cadence: `\n        import FlowInteractionTemplateAudit from ${FlowInteractionAuditContract}\n        pub fun main(templateId: String, auditors: [Address]): {Address:Bool} {\n          return FlowInteractionTemplateAudit.getHasTemplateBeenAuditedByAuditors(templateId: templateId, auditors: auditors)\n        }\n        `,\n        args: (arg, t) => [\n          arg(recomputedTemplateID, t.String),\n          arg(_auditors, t.Array(t.Address)),\n        ],\n      })\n\n      return audits\n\n    default:\n      throw new Error(\n        \"getInteractionTemplateAudits Error: Unsupported template version\"\n      )\n  }\n}\n","export function generateImport({contractName, address}) {\n  return {contractName, address, contract: \"\"}\n}\n","import {generateImport} from \"./generate-import.js\"\n\nexport function findImports(cadence) {\n  let imports = []\n\n  let importsReg = /import ((\\w|,| )+)* from 0x\\w+/g\n  let fileImports = cadence.match(importsReg) || []\n\n  for (const fileImport of fileImports) {\n    const importLineReg = /import ((\\w+|, |)*) from (0x\\w+)/g\n    const importLine = importLineReg.exec(fileImport)\n\n    const contractsReg = /((?:\\w+)+),?/g\n    const contracts = importLine[1].match(contractsReg) || []\n\n    for (const contract of contracts) {\n      imports.push(\n        generateImport({\n          address: importLine[3],\n          contractName: contract.replace(/,/g, \"\"),\n        })\n      )\n    }\n  }\n\n  return imports\n}\n","import {\n  invariant,\n  block,\n  send,\n  getAccount,\n  atBlockHeight,\n  config,\n  decode,\n} from \"@onflow/sdk\"\nimport {genHash} from \"./utils/hash.js\"\nimport {findImports} from \"./utils/find-imports.js\"\nimport {generateImport} from \"./utils/generate-import.js\"\n\nexport async function generateDependencyPin(\n  {address, contractName, blockHeight},\n  opts = {}\n) {\n  invariant(\n    address != undefined,\n    \"generateDependencyPin({ address }) -- address must be defined\"\n  )\n  invariant(\n    contractName != undefined,\n    \"generateDependencyPin({ contractName }) -- contractName must be defined\"\n  )\n  invariant(\n    blockHeight != undefined,\n    \"generateDependencyPin({ blockHeight }) -- blockHeight must be defined\"\n  )\n  invariant(\n    typeof address === \"string\",\n    \"generateDependencyPin({ address }) -- address must be a string\"\n  )\n  invariant(\n    typeof contractName === \"string\",\n    \"generateDependencyPin({ contractName }) -- contractName must be a string\"\n  )\n  invariant(\n    typeof blockHeight === \"number\",\n    \"generateDependencyPin({ blockHeight }) -- blockHeight must be a number\"\n  )\n\n  let horizon = [generateImport({contractName, address})]\n\n  for (const horizonImport of horizon) {\n    let account = await send(\n      [\n        getAccount(\n          await config().get(horizonImport.address, horizonImport.address)\n        ),\n        atBlockHeight(blockHeight),\n      ],\n      opts\n    ).then(decode)\n\n    horizonImport.contract = account.contracts?.[horizonImport.contractName]\n\n    if (!horizonImport.contract) {\n      console.error(\"Did not find expected contract\", horizonImport, account)\n      throw new Error(\"Did not find expected contract\")\n    }\n\n    let contractImports = findImports(horizonImport.contract)\n\n    horizon.push(...contractImports)\n  }\n\n  let contractHashes = horizon.map(iport => genHash(iport.contract))\n\n  let contractHashesJoined = contractHashes.join(\"\")\n\n  return genHash(contractHashesJoined)\n}\n\nexport async function generateDependencyPinAtLatestSealedBlock(\n  {address, contractName},\n  opts = {}\n) {\n  let latestSealedBlock = await block({sealed: true}, opts)\n  let latestSealedBlockHeight = latestSealedBlock?.height\n\n  return generateDependencyPin(\n    {address, contractName, blockHeight: latestSealedBlockHeight},\n    opts\n  )\n}\n","export function normalizeInteractionTemplateInterface(templateInterface) {\n  if (templateInterface == null) return null\n\n  switch (templateInterface[\"f_version\"]) {\n    case \"1.0.0\":\n      return templateInterface\n\n    default:\n      throw new Error(\n        \"normalizeInteractionTemplateInterface Error: Invalid InteractionTemplateInterface\"\n      )\n  }\n}\n","import {invariant} from \"@onflow/sdk\"\nimport {encode as rlpEncode} from \"@onflow/rlp\"\nimport {genHash} from \"./utils/hash.js\"\nimport {normalizeInteractionTemplateInterface} from \"../normalizers/interaction-template/interaction-template-interface.js\"\n\nexport async function generateTemplateInterfaceId({templateInterface}) {\n  invariant(\n    templateInterface != undefined,\n    \"generateTemplateInterfaceId({ templateInterface }) -- templateInterface must be defined\"\n  )\n  invariant(\n    typeof templateInterface === \"object\",\n    \"generateTemplateInterfaceId({ templateInterface }) -- templateInterface must be an object\"\n  )\n  invariant(\n    typeof templateInterface.f_type === \"InteractionTemplateInterface\",\n    \"generateTemplateInterfaceId({ templateInterface }) -- templateInterface object must be an InteractionTemplate\"\n  )\n\n  templateInterface = normalizeInteractionTemplateInterface(templateInterface)\n\n  switch (templateInterface.f_version) {\n    case \"1.0.0\":\n      const interfaceData = templateInterface.data\n\n      const encodedHex = rlpEncode([\n        await genHash(\"InteractionTemplateInterface\"),\n        await genHash(\"1.0.0\"),\n        await genHash(interfaceData.flip),\n        await Promise.all(\n          Object.keys(interfaceData.arguments).map(async argumentLabel => [\n            await genHash(argumentLabel),\n            await genHash(String(interfaceData.arguments[argumentLabel].index)),\n            await genHash(interfaceData.arguments[argumentLabel].type),\n          ])\n        ),\n      ]).toString(\"hex\")\n\n      return genHash(encodedHex)\n\n    default:\n      throw new Error(\n        \"generateTemplateInterfaceId Error: Unsupported templateInterface version\"\n      )\n  }\n}\n","import {generateDependencyPin} from \"./generate-dependency-pin.js\"\nimport {invariant, block} from \"@onflow/sdk\"\nimport {log, LEVELS} from \"@onflow/util-logger\"\nimport {normalizeInteractionTemplate} from \"../normalizers/interaction-template/interaction-template.js\"\n\nexport async function verifyDependencyPinsSame(\n  {template, blockHeight, network},\n  opts = {}\n) {\n  invariant(\n    template != undefined,\n    \"generateDependencyPin({ template }) -- template must be defined\"\n  )\n  invariant(\n    typeof template === \"object\",\n    \"generateDependencyPin({ template }) -- template must be an object\"\n  )\n  invariant(\n    template.f_type === \"InteractionTemplate\",\n    \"generateDependencyPin({ template }) -- template must be an InteractionTemplate\"\n  )\n\n  template = normalizeInteractionTemplate(template)\n\n  invariant(\n    network != undefined,\n    \"generateDependencyPin({ network }) network must be defined\"\n  )\n  invariant(\n    blockHeight != undefined,\n    \"generateDependencyPin({ blockHeight }) blockHeight must be defined\"\n  )\n  invariant(\n    typeof blockHeight === \"number\",\n    \"generateDependencyPin({ blockHeight }) blockHeight must be a number\"\n  )\n\n  switch (template.f_version) {\n    case \"1.0.0\":\n      let templateDependenciesPlaceholderKeys = Object.keys(\n        template.data.dependencies\n      )\n\n      for (let templateDependencyPlaceholderKey of templateDependenciesPlaceholderKeys) {\n        let templateDependencyPlaceholder =\n          template.data.dependencies[templateDependencyPlaceholderKey]\n\n        let templateDependencyPlaceholderContractNames = Object.keys(\n          templateDependencyPlaceholder\n        )\n\n        for (let templateDependencyPlaceholderContractName of templateDependencyPlaceholderContractNames) {\n          let templateDependencyPlaceholderContractNetworks =\n            template.data.dependencies[templateDependencyPlaceholderKey][\n              templateDependencyPlaceholderContractName\n            ]\n\n          let templateDependency =\n            templateDependencyPlaceholderContractNetworks[network]\n          if (typeof templateDependency === \"undefined\") continue\n\n          let pin = await generateDependencyPin(\n            {\n              address: templateDependency.address,\n              contractName: templateDependency.contract,\n              blockHeight,\n            },\n            opts\n          )\n\n          if (pin !== templateDependency.pin) {\n            log({\n              title: \"verifyDependencyPinsSame Debug Error\",\n              message: `Could not recompute and match dependency pin.\n                                address: ${templateDependency.address} | contract: ${templateDependency.contract}\n                                computed: ${pin}\n                                template: ${templateDependency.pin}\n                            `,\n              level: LEVELS.debug,\n            })\n            return false\n          }\n        }\n      }\n\n      return true\n\n    default:\n      throw new Error(\n        \"verifyDependencyPinsSame Error: Unsupported template version\"\n      )\n  }\n}\n\nexport async function verifyDependencyPinsSameAtLatestSealedBlock(\n  {template, network},\n  opts = {}\n) {\n  let latestSealedBlock = await block({sealed: true})\n  let latestSealedBlockHeight = latestSealedBlock?.height\n\n  return verifyDependencyPinsSame(\n    {template, network, blockHeight: latestSealedBlockHeight},\n    opts\n  )\n}\n","import {invariant} from \"@onflow/sdk\"\n\nexport function getTemplateMessage({\n  localization = \"en-US\",\n  messageKey,\n  template,\n}) {\n  invariant(\n    messageKey,\n    \"getMessage({ messageKey }) -- messageKey must be defined\"\n  )\n  invariant(\n    typeof messageKey === \"stirng\",\n    \"getMessage({ messageKey }) -- messageKey must be a string\"\n  )\n\n  invariant(\n    localization,\n    \"getMessage({ localization }) -- localization must be defined\"\n  )\n  invariant(\n    typeof localization === \"stirng\",\n    \"getMessage({ localization }) -- localization must be a string\"\n  )\n\n  invariant(\n    template != undefined,\n    \"generateTemplateId({ template }) -- template must be defined\"\n  )\n  invariant(\n    typeof template === \"object\",\n    \"generateTemplateId({ template }) -- template must be an object\"\n  )\n  invariant(\n    typeof template.f_type === \"InteractionTemplate\",\n    \"generateTemplateId({ template }) -- template object must be an InteractionTemplate\"\n  )\n\n  const messages = template?.data?.messages\n\n  return messages?.[messageKey]?.i18n?.[localization]\n}\n","import {invariant} from \"@onflow/sdk\"\n\nexport function getTemplateArgumentMessage({\n  localization = \"en-US\",\n  argumentLabel,\n  messageKey,\n  template,\n}) {\n  invariant(\n    messageKey,\n    \"getMessage({ messageKey }) -- messageKey must be defined\"\n  )\n  invariant(\n    typeof messageKey === \"stirng\",\n    \"getMessage({ messageKey }) -- messageKey must be a string\"\n  )\n\n  invariant(\n    argumentLabel,\n    \"getMessage({ argumentLabel }) -- argumentLabel must be defined\"\n  )\n  invariant(\n    typeof messageKey === \"stirng\",\n    \"getMessage({ argumentLabel }) -- argumentLabel must be a string\"\n  )\n\n  invariant(\n    localization,\n    \"getMessage({ localization }) -- localization must be defined\"\n  )\n  invariant(\n    typeof localization === \"stirng\",\n    \"getMessage({ localization }) -- localization must be a string\"\n  )\n\n  invariant(\n    template != undefined,\n    \"generateTemplateId({ template }) -- template must be defined\"\n  )\n  invariant(\n    typeof template === \"object\",\n    \"generateTemplateId({ template }) -- template must be an object\"\n  )\n  invariant(\n    typeof template.f_type === \"InteractionTemplate\",\n    \"generateTemplateId({ template }) -- template object must be an InteractionTemplate\"\n  )\n\n  const args = template?.data?.arguments\n\n  return args?.[argumentLabel]?.messages?.[messageKey]?.i18n?.[localization]\n}\n","import \"./default-config\"\nexport {VERSION} from \"./VERSION\"\nexport {query} from \"./exec/query\"\nexport {mutate} from \"./exec/mutate\"\nexport {verifyUserSignatures} from \"./exec/verify\"\nexport {serialize} from \"./serialize\"\nexport {transaction as tx} from \"./transaction\"\nexport {events} from \"./events\"\nexport {pluginRegistry} from \"./current-user/exec-service/plugins\"\n\nimport {currentUser} from \"./current-user\"\nexport {currentUser}\n\nimport {discovery} from \"./discovery\"\nexport {discovery}\n\nexport const authenticate = (opts = {}) => currentUser().authenticate(opts)\nexport const unauthenticate = () => currentUser().unauthenticate()\nexport const reauthenticate = (opts = {}) => {\n  currentUser().unauthenticate()\n  return currentUser().authenticate(opts)\n}\nexport const signUp = (opts = {}) => currentUser().authenticate(opts)\nexport const logIn = (opts = {}) => currentUser().authenticate(opts)\n\nexport const authz = currentUser().authorization\n\nimport * as types from \"@onflow/types\"\nexport const t = types\n\nimport * as WalletUtils from \"./wallet-utils\"\nexport {WalletUtils}\n\nimport * as AppUtils from \"./app-utils\"\nexport {AppUtils}\n\nimport * as InteractionTemplateUtils from \"./interaction-template-utils\"\nexport {InteractionTemplateUtils}\n\nexport {TestUtils} from \"@onflow/sdk\"\nexport {config} from \"@onflow/config\"\nexport {send} from \"@onflow/sdk\"\nexport {decode} from \"@onflow/sdk\"\nexport {account} from \"@onflow/sdk\"\nexport {block} from \"@onflow/sdk\"\nexport {isOk, isBad, why, pipe, build} from \"@onflow/sdk\"\nexport {withPrefix, sansPrefix, display} from \"@onflow/util-address\"\nexport {template as cadence} from \"@onflow/util-template\"\nexport {template as cdc} from \"@onflow/util-template\"\nexport {createSignableVoucher} from \"@onflow/sdk\"\nexport {voucherIntercept} from \"@onflow/sdk\"\nexport {voucherToTxId} from \"@onflow/sdk\"\n\n// builders\nexport {transaction} from \"@onflow/sdk\"\nexport {script} from \"@onflow/sdk\"\nexport {ping} from \"@onflow/sdk\"\nexport {atBlockHeight} from \"@onflow/sdk\"\nexport {atBlockId} from \"@onflow/sdk\"\nexport {getAccount} from \"@onflow/sdk\"\nexport {getEvents} from \"@onflow/sdk\"\nexport {getEventsAtBlockHeightRange} from \"@onflow/sdk\"\nexport {getEventsAtBlockIds} from \"@onflow/sdk\"\nexport {getBlock} from \"@onflow/sdk\"\nexport {getBlockHeader} from \"@onflow/sdk\"\nexport {getCollection} from \"@onflow/sdk\"\nexport {getTransactionStatus} from \"@onflow/sdk\"\nexport {getTransaction} from \"@onflow/sdk\"\nexport {authorizations, authorization} from \"@onflow/sdk\"\nexport {args, arg} from \"@onflow/sdk\"\nexport {proposer} from \"@onflow/sdk\"\nexport {payer} from \"@onflow/sdk\"\nexport {limit} from \"@onflow/sdk\"\nexport {ref} from \"@onflow/sdk\"\nexport {params, param} from \"@onflow/sdk\"\nexport {validator} from \"@onflow/sdk\"\nexport {invariant} from \"@onflow/sdk\"\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}